if(typeof Math.imul == "undefined" || (Math.imul(0xffffffff,5) == 0)) {
    Math.imul = function (a, b) {
        var ah  = (a >>> 16) & 0xffff;
        var al = a & 0xffff;
        var bh  = (b >>> 16) & 0xffff;
        var bl = b & 0xffff;
        // the shift by 0 fixes the sign on the high part
        // the final |0 converts the unsigned value into a signed value
        return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0)|0);
    }
}

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).firebase=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=v(e[r],t[r]));return e}var e,t,o,f=(o=Error,r(e=s,t=o),void(e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)),s);function i(){this.constructor=e}function s(e,t){var r=o.call(this,t)||this;return r.code=e,r.name="FirebaseError",Object.setPrototypeOf(r,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,a.prototype.create),r}var a=(c.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=t[0]||{},o=this.service+"/"+e,i=this.errors[e],s=i?function(e,n){return e.replace(h,function(e,t){var r=n[t];return null!=r?r.toString():"<"+t+"?>"})}(i,n):"Error",a=this.serviceName+": "+s+" ("+o+").",c=new f(o,a),p=0,l=Object.keys(n);p<l.length;p++){var u=l[p];"_"!==u.slice(-1)&&(u in c&&console.warn('Overwriting FirebaseError base field "'+u+'" can cause unexpected behavior.'),c[u]=n[u])}return c},c);function c(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var h=/\{\$([^}]+)}/g;function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e,t){var r=new b(e,t);return r.subscribe.bind(r)}var l,u,b=(y.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},y.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},y.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},y.prototype.subscribe=function(e,t,r){var n,o=this;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(e,t){if("object"!=typeof e||null===e)return!1;for(var r=0,n=t;r<n.length;r++){var o=n[r];if(o in e&&"function"==typeof e[o])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(n.next=g),void 0===n.error&&(n.error=g),void 0===n.complete&&(n.complete=g);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?n.error(o.finalError):n.complete()}catch(e){}}),this.observers.push(n),i},y.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},y.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},y.prototype.sendOne=function(e,t){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[e])try{t(r.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},y.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},y);function y(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(r)}).catch(function(e){r.error(e)})}function g(){}(u=l=l||{})[u.DEBUG=0]="DEBUG",u[u.VERBOSE=1]="VERBOSE",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.SILENT=5]="SILENT";function m(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case l.DEBUG:case l.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case l.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case l.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case l.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}var _,E=l.INFO,N=(Object.defineProperty(O.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in l))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),O.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,l.DEBUG].concat(e))},O.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,l.VERBOSE].concat(e))},O.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,l.INFO].concat(e))},O.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,l.WARN].concat(e))},O.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,l.ERROR].concat(e))},O);function O(e){this.name=e,this._logLevel=E,this._logHandler=m}var k=((_={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",_["bad-app-name"]="Illegal App name: '{$appName}",_["duplicate-app"]="Firebase App named '{$appName}' already exists",_["app-deleted"]="Firebase App named '{$appName}' already deleted",_["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",_),A=new a("app","Firebase",k),w="[DEFAULT]",R=(Object.defineProperty(L.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),L.prototype.delete=function(){var a=this;return new Promise(function(e){a.checkDestroyed_(),e()}).then(function(){a.firebase_.INTERNAL.removeApp(a.name_);for(var e=[],t=0,r=Object.keys(a.services_);t<r.length;t++)for(var n=r[t],o=0,i=Object.keys(a.services_[n]);o<i.length;o++){var s=i[o];e.push(a.services_[n][s])}return Promise.all(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){a.isDeleted_=!0,a.services_={}})},L.prototype._getService=function(e,t){if(void 0===t&&(t=w),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var r=t!==w?t:void 0,n=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),r);this.services_[e][t]=n}return this.services_[e][t]},L.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=w),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},L.prototype.extendApp=function(e){if(v(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,r=this.tokenListeners_;t<r.length;t++){var n=r[t];this.INTERNAL.addAuthTokenListener(n)}this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var o=0,i=this.analyticsEventRequests_;o<i.length;o++){var s=i[o];this.INTERNAL.analytics.logEvent.apply(void 0,s)}this.analyticsEventRequests_=[]}}},L.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw A.create("app-deleted",{appName:this.name_})},L);function L(e,t,r){var n=this;this.firebase_=r,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=function(e){return v(void 0,e)}(e);var o=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){n.tokenListeners_.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(t){n.tokenListeners_=n.tokenListeners_.filter(function(e){return e!==t})},analytics:{logEvent:function(){o.analyticsEventRequests_.push(arguments)}}}}R.prototype.name&&R.prototype.options||R.prototype.delete||console.log("dc");var T="7.1.0",I=new N("@firebase/app");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){I.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var j=self.firebase.SDK_VERSION;j&&0<=j.indexOf("LITE")&&I.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var D=function e(){var t=function(s){var i={},a={},c={},p={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={}),"object"==typeof t&&null!==t||(t={name:t});var r=t;void 0===r.name&&(r.name=w);var n=r.name;if("string"!=typeof n||!n)throw A.create("bad-app-name",{appName:String(n)});if(d(i,n))throw A.create("duplicate-app",{appName:n});var o=new s(e,r,p);return f(i[n]=o,"create"),o},app:l,apps:null,SDK_VERSION:T,INTERNAL:{registerService:function(r,e,t,n,o){if(void 0===o&&(o=!1),a[r])return I.debug("There were multiple attempts to register service "+r+"."),p[r];function i(e){if(void 0===e&&(e=l()),"function"!=typeof e[r])throw A.create("invalid-app-argument",{appName:r});return e[r]()}return a[r]=e,n&&(c[r]=n,u().forEach(function(e){n("create",e)})),void 0!==t&&v(i,t),p[r]=i,s.prototype[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,o?e:[])},i},removeApp:function(e){f(i[e],"delete"),delete i[e]},factories:a,useAsService:h}};function l(e){if(!d(i,e=e||w))throw A.create("no-app",{appName:e});return i[e]}function u(){return Object.keys(i).map(function(e){return i[e]})}function f(e,t){for(var r=0,n=Object.keys(a);r<n.length;r++){var o=h(0,n[r]);if(null===o)return;c[o]&&c[o](t,e)}}function h(e,t){return"serverAuth"===t?null:t}return p.default=p,Object.defineProperty(p,"apps",{get:u}),l.App=s,p}(R);return t.INTERNAL=n({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){v(t,e)},createSubscribe:p,ErrorFactory:a,deepExtend:v}),t}(),F=D.initializeApp;return D.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}()&&I.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),F.apply(void 0,e)},D});
//# sourceMappingURL=firebase-app.js.map

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(Pd){"use strict";try{(function(){var o,t;Pd=Pd&&Pd.hasOwnProperty("default")?Pd.default:Pd,(t=o=o||{})[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT";function e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}var n=o.INFO,r=(Object.defineProperty(i.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),i.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.DEBUG].concat(t))},i.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.VERBOSE].concat(t))},i.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.INFO].concat(t))},i.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.WARN].concat(t))},i.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.ERROR].concat(t))},i);function i(t){this.name=t,this._logLevel=n,this._logHandler=e}var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function p(o,a,s,u){return new(s=s||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function d(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var c,f=(s(h,c=Error),h);function h(t,e){var n=c.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,m.prototype.create),n}var m=(y.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,r){return t.replace(v,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new f(i,s),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},y);function y(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var g,v=/\{\$([^}]+)}/g,b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},w=w||{},S=b;function E(t){return"string"==typeof t}function T(t){return"number"==typeof t}function I(t,e){t=t.split("."),e=e||S;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function C(){}function D(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function N(t){return"array"==D(t)}function A(t){var e=D(t);return"array"==e||"object"==e&&"number"==typeof t.length}function k(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var R="closure_uid_"+(1e9*Math.random()>>>0),M=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function O(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function L(t,e,n){return(L=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:O).apply(null,arguments)}function P(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var x=Date.now||function(){return+new Date};function q(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).yb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function F(){this.j=this.j,this.i=this.i}F.prototype.j=!1,F.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[R]||(this[R]=++M)},F.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(E(t))return E(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=E(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function U(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function K(t){return/^[\s\xa0]*$/.test(t)}var j,W=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function G(t,e){return-1!=t.indexOf(e)}function z(t,e){return t<e?-1:e<t?1:0}t:{var H=S.navigator;if(H){var Y=H.userAgent;if(Y){j=Y;break t}}j=""}function X(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function J(t){var e,n={};for(e in t)n[e]=t[e];return n}var $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$.length;o++)n=$[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function tt(t){return tt[" "](t),t}tt[" "]=C;var et,nt,rt=G(j,"Opera"),it=G(j,"Trident")||G(j,"MSIE"),ot=G(j,"Edge"),at=ot||it,st=G(j,"Gecko")&&!(G(j.toLowerCase(),"webkit")&&!G(j,"Edge"))&&!(G(j,"Trident")||G(j,"MSIE"))&&!G(j,"Edge"),ut=G(j.toLowerCase(),"webkit")&&!G(j,"Edge");function ct(){var t=S.document;return t?t.documentMode:void 0}t:{var ht="",lt=(nt=j,st?/rv:([^\);]+)(\)|;)/.exec(nt):ot?/Edge\/([\d\.]+)/.exec(nt):it?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(nt):ut?/WebKit\/(\S+)/.exec(nt):rt?/(?:Version)[ \/]?(\S+)/.exec(nt):void 0);if(lt&&(ht=lt?lt[1]:""),it){var ft=ct();if(null!=ft&&ft>parseFloat(ht)){et=String(ft);break t}}et=ht}var pt,dt={};function mt(s){return function(t,e){var n=dt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(s,function(){for(var t=0,e=W(String(et)).split("."),n=W(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=z(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||z(0==o[2].length,0==a[2].length)||z(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t})}var yt=S.document;pt=yt&&it?ct()||("CSS1Compat"==yt.compatMode?parseInt(et,10):5):void 0;var gt=!it||9<=Number(pt),vt=it&&!mt("9"),bt=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{S.addEventListener("test",C,e),S.removeEventListener("test",C,e)}catch(t){}return t}();function wt(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function St(t,e){if(wt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(st){t:{try{tt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=E(t.pointerType)?t.pointerType:Et[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}wt.prototype.b=function(){this.Ja=!1},q(St,wt);var Et={2:"touch",3:"pen",4:"mouse"};St.prototype.b=function(){St.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Tt="closure_listenable_"+(1e6*Math.random()|0),It=0;function Ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++It,this.X=this.Z=!1}function Dt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Nt(t){this.src=t,this.a={},this.b=0}function At(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=V(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Dt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function kt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Nt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=kt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Rt="closure_lm_"+(1e6*Math.random()|0),Mt={};function _t(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(N(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}r=Bt(r);return e&&e[Tt]?e.Ba(n,r,k(i)?!!i.capture:!!i,o):Ot(e,n,r,!0,i,o)}(t,e,n,r,i);if(N(e)){for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);return null}return n=Bt(n),t&&t[Tt]?t.Aa(e,n,k(r)?!!r.capture:!!r,i):Ot(t,e,n,!1,r,i)}function Ot(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=k(i)?!!i.capture:!!i;if(a&&!gt)return null;var s=Ft(t);if(s||(t[Rt]=s=new Nt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var e=qt,n=gt?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)bt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Lt(t){if(!T(t)&&t&&!t.X){var e=t.src;if(e&&e[Tt])At(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ft(e))?(At(n,t),0==n.b&&(n.src=null,e[Rt]=null)):Dt(t)}}}function Pt(t){return t in Mt?Mt[t]:Mt[t]="on"+t}function xt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Lt(t),n.call(r,e)}function qt(t,e){return!!t.X||(gt?xt(t,new St(e,this)):xt(t,e=new St(e||I("window.event"),this)))}function Ft(t){return(t=t[Rt])instanceof Nt?t:null}var Vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(e){return"function"==D(e)?e:(e[Vt]||(e[Vt]=function(t){return e.handleEvent(t)}),e[Vt])}function Ut(){F.call(this),this.c=new Nt(this),(this.J=this).B=null}function Qt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&At(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}q(Ut,F),Ut.prototype[Tt]=!0,(g=Ut.prototype).addEventListener=function(t,e,n,r){_t(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(N(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=k(i)?!!i.capture:!!i,r=Bt(r),e&&e[Tt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=kt(a=e.a[n],r,i,o))&&(Dt(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&Ft(e))&&(n=e.a[n.toString()],e=-1,n&&(e=kt(n,r,i,o)),(r=-1<e?n[e]:null)&&Lt(r))}(this,t,e,n,r)},g.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(E(t))t=new wt(t,n);else if(t instanceof wt)t.target=t.target||n;else{var i=t;Z(t=new wt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Qt(a,r,!0,t)&&i}if(i=Qt(a=t.a=n,r,!0,t)&&i,i=Qt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Qt(a=t.a=e[o],r,!1,t)&&i;return i},g.G=function(){if(Ut.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Dt(n[r]);delete e.a[t],e.b--}}this.B=null},g.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},g.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Kt=S.JSON.stringify;function jt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Wt(){this.b=this.a=null}jt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Gt,zt=new jt(function(){return new Ht},function(t){t.reset()});function Ht(){this.next=this.b=this.a=null}function Yt(t){S.setTimeout(function(){throw t},0)}function Xt(t,e){Gt||function(){var t=S.Promise.resolve(void 0);Gt=function(){t.then(Zt)}}(),Jt||(Gt(),Jt=!0),$t.add(t,e)}Wt.prototype.add=function(t,e){var n=zt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ht.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Jt=!(Ht.prototype.reset=function(){this.next=this.b=this.a=null}),$t=new Wt;function Zt(){for(var t;r=n=void 0,r=null,(n=$t).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){Yt(t)}var e=zt;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;Jt=!1}function te(t,e){Ut.call(this),this.b=t||1,this.a=e||S,this.f=L(this.gb,this),this.g=x()}function ee(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ne(t,e,n){if("function"==D(t))n&&(t=L(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=L(t.handleEvent,t)}return 2147483647<Number(e)?-1:S.setTimeout(t,e||0)}function re(t,e,n){F.call(this),this.f=null!=n?L(t,n):t,this.c=e,this.b=L(this.ab,this),this.a=[]}function ie(t){t.U=ne(t.b,t.c),t.f.apply(null,t.a)}function oe(t){F.call(this),this.b=t,this.a={}}q(te,Ut),(g=te.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var t=x()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(ee(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=x())},g.G=function(){te.N.G.call(this),ee(this),delete this.a},q(re,F),(g=re.prototype).ea=!1,g.U=null,g.Ua=function(t){this.a=arguments,this.U?this.ea=!0:ie(this)},g.G=function(){re.N.G.call(this),this.U&&(S.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.ab=function(){this.U=null,this.ea&&(this.ea=!1,ie(this))},q(oe,F);var ae=[];function se(t,e,n,r){N(n)||(n&&(ae[0]=n.toString()),n=ae);for(var i=0;i<n.length;i++){var o=_t(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ue(t){X(t.a,function(t,e){this.a.hasOwnProperty(e)&&Lt(t)},t),t.a={}}function ce(){}oe.prototype.G=function(){oe.N.G.call(this),ue(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=new Ut;function le(t){wt.call(this,"serverreachability",t)}function fe(t){he.dispatchEvent(new le(he,t))}function pe(t){wt.call(this,"statevent",t)}function de(t){he.dispatchEvent(new pe(he,t))}function me(t){wt.call(this,"timingevent",t)}function ye(t,e){if("function"!=D(t))throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){t()},e)}q(le,wt),q(pe,wt),q(me,wt);var ge={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ve={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function be(){}function we(t){var e;return(e=t.a)||(e=t.a={}),e}function Se(){}be.prototype.a=null;var Ee,Te={OPEN:"a",ib:"b",Na:"c",rb:"d"};function Ie(){wt.call(this,"d")}function Ce(){wt.call(this,"c")}function De(){}function Ne(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new oe(this),this.O=Ae,t=at?125:void 0,this.P=new te(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}q(Ie,wt),q(Ce,wt),q(De,be),Ee=new De;var Ae=45e3,ke={},Re={};function Me(t,e,n){t.F=1,t.f=nn(Ye(e)),t.l=n,t.H=!0,Oe(t,null)}function _e(t,e,n,r){t.F=1,t.f=nn(Ye(e)),t.l=null,t.H=n,Oe(t,r)}function Oe(t,e){t.v=x(),xe(t),t.D=Ye(t.f),en(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new re(L(t.Ka,t,t.a),t.J)),se(t.I,t.a,"readystatechange",t.eb),e=t.h?J(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),fe(1)}function Le(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=Pe(t,n);if(i==Re){4==e&&(t.c=4,de(14),r=!1);break}if(i==ke){t.c=4,de(15),r=!1;break}Ue(t,i)}4==e&&0==n.length&&(t.c=1,de(16),r=!1),t.b=t.b&&r,r||(Be(t),Ve(t))}function Pe(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?Re:(n=Number(e.substring(n,r)),isNaN(n)?ke:(r+=1)+n>e.length?Re:(e=e.substr(r,n),t.A=r+n,e))}function xe(t){t.R=x()+t.O,qe(t,t.O)}function qe(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ye(L(t.bb,t),e)}function Fe(t){t.i&&(S.clearTimeout(t.i),t.i=null)}function Ve(t){t.g.Da()||t.m||t.g.na(t)}function Be(t){Fe(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,ee(t.P),ue(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Ue(t,e){try{t.g.Ga(t,e),fe(4)}catch(t){}}function Qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(A(t)||E(t))B(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(A(t)||E(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(E(t))return t.split("");if(A(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ke)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t,e){Ge(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&We(t))}function We(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ge(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ge(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(g=Ne.prototype).setTimeout=function(t){this.O=t},g.eb=function(t){t=t.target;var e=this.B;e&&3==Yn(t)?e.Ua():this.Ka(t)},g.Ka=function(t){try{if(t==this.a)t:{var e=Yn(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!at&&!this.a.aa())){this.m||4!=e||7==n||fe(8==n||r<=0?3:2),Fe(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Xn(this.a,"X-HTTP-Initial-Response");if(a&&!K(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,de(12),Be(this),Ve(this);break t}this.s=!0,Ue(this,s)}this.H?(Le(this,e,o),at&&this.b&&3==e&&(se(this.I,this.P,"tick",this.cb),this.P.start())):Ue(this,o),4==e&&Be(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,xe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,de(12)):(this.c=0,de(13)),Be(this),Ve(this)}}}catch(t){}},g.cb=function(){if(this.a){var t=Yn(this.a),e=this.a.aa();this.A<e.length&&(Fe(this),Le(this,t,e),this.b&&4!=t&&xe(this))}},g.cancel=function(){this.m=!0,Be(this)},g.bb=function(){this.i=null;var t=x();0<=t-this.R?(2!=this.F&&(fe(3),de(17)),Be(this),this.c=2,Ve(this)):qe(this,this.R-t)},(g=Ke.prototype).C=function(){We(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.K=function(){return We(this),this.a.concat()},g.get=function(t,e){return Ge(this.b,t)?this.b[t]:e},g.set=function(t,e){Ge(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function He(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof He?(this.h=void 0!==e?e:t.h,Xe(this,t.f),this.j=t.j,Je(this,t.b),$e(this,t.i),this.a=t.a,Ze(this,gn(t.c)),this.g=t.g):t&&(n=String(t).match(ze))?(this.h=!!e,Xe(this,n[1]||"",!0),this.j=rn(n[2]||""),Je(this,n[3]||"",!0),$e(this,n[4]),this.a=rn(n[5]||"",!0),Ze(this,n[6]||"",!0),this.g=rn(n[7]||"")):(this.h=!!e,this.c=new fn(null,this.h))}function Ye(t){return new He(t)}function Xe(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Je(t,e,n){t.b=n?rn(e,!0):e}function $e(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ze(t,e,n){e instanceof fn?(t.c=e,function(t,e){e&&!t.f&&(pn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dn(this,e),yn(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=on(e,hn)),t.c=new fn(e,t.h))}function tn(t,e,n){t.c.set(e,n)}function en(t,e,n){N(n)||(n=[String(n)]),yn(t.c,e,n)}function nn(t){return tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),t}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return E(t)?(t=encodeURI(t).replace(e,an),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function an(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}He.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,sn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(on(e,sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?cn:un,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",on(n,ln)),t.join("")},He.prototype.resolve=function(t){var e=Ye(this),n=!!t.f;n?Xe(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Je(e,t.b):n=null!=t.i;var r=t.a;if(n)$e(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(G(i,"./")||G(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Ze(e,gn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var sn=/[#\/\?@]/g,un=/[#\?:]/g,cn=/[#\?]/g,hn=/[#\?@]/g,ln=/#/g;function fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function pn(n){n.a||(n.a=new Ke,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function dn(t,e){pn(t),e=vn(t,e),Ge(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,je(t.a,e))}function mn(t,e){return pn(t),e=vn(t,e),Ge(t.a.b,e)}function yn(t,e,n){dn(t,e),0<n.length&&(t.c=null,t.a.set(vn(t,e),Q(n)),t.b+=n.length)}function gn(t){var e=new fn;return e.c=t.c,t.a&&(e.a=new Ke(t.a),e.b=t.b),e}function vn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function bn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function wn(t){var e=t.a.F.a;if(null!=e)de(4),e?(de(10),ur(t.a,t,!1)):(de(11),ur(t.a,t,!0));else{t.b=new Ne(t,void 0,void 0),t.b.h=t.h,e=pr(e=t.a,e.Y()?t.f:null,t.i),de(4),en(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&tn(e,n,r),_e(t.b,e,!1,t.f)}}function Sn(){this.a=this.b=null}function En(){this.a=new Ke}function Tn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[R]||(t[R]=++M)):e.charAt(0)+t}function In(t,e){this.b=t,this.a=e}function Cn(t){this.g=t||Dn,t=S.PerformanceNavigationTiming?0<(t=S.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(S.ka&&S.ka.Ea&&S.ka.Ea()&&S.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new En),this.b=null,this.c=[]}(g=fn.prototype).add=function(t,e){pn(this),this.c=null,t=vn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(n,r){pn(this),this.a.forEach(function(t,e){B(t,function(t){n.call(r,t,e,this)},this)},this)},g.K=function(){pn(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.C=function(t){pn(this);var e=[];if(E(t))mn(this,t)&&(e=U(e,this.a.get(vn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=U(e,t[n])}return e},g.set=function(t,e){return pn(this),this.c=null,mn(this,t=vn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},q(function(){},function(){}),(g=bn.prototype).M=null,g.$=function(t){return this.a.$(t)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Da=function(){return!1},g.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Xn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Xn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void lr(e,2)}this.f=r[0]}else(e=this.a).m=this.c,lr(e,2)}else 1==this.M&&(this.g?de(6):"11111"==e?(de(5),this.g=!0,(!it||10<=Number(pt))&&(this.c=200,this.b.cancel(),de(11),ur(this.a,this,!0))):(de(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,wn(this)):1==this.M&&(this.g?(de(11),ur(this.a,this,!0)):(de(10),ur(this.a,this,!1)));else{0==this.M?de(8):1==this.M&&de(9);var t=this.a;t.m=this.c,lr(t,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},En.prototype.add=function(t){this.a.set(Tn(t),t)},En.prototype.C=function(){return this.a.C()};var Dn=10;function Nn(t,e){!t.a&&(G(e,"spdy")||G(e,"quic")||G(e,"h2"))&&(t.f=t.g,t.a=new En,t.b&&(Mn(t,t.b),t.b=null))}function An(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function kn(t){return t.b?1:t.a?t.a.a.c:0}function Rn(t,e){return t=t.b?t.b==e:!!t.a&&(e=Tn(e),Ge(t.a.a.b,e))}function Mn(t,e){t.a?t.a.add(e):t.b=e}function _n(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Tn(e),n=Ge(t.a.a.b,n)),n&&je(t.a.a,Tn(e)))}function On(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return Q(t.c);var e=t.c;return B(t.a.C(),function(t){e=e.concat(t.j)}),e}function Ln(){}function Pn(){this.a=new Ln}function xn(t,r,e){var i=e||"";try{Qe(t,function(t,e){var n=t;k(t)&&(n=Kt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function qn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Cn.prototype.cancel=function(){this.c=On(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(B(this.a.C(),function(t){t.cancel()}),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},Ln.prototype.stringify=function(t){return S.JSON.stringify(t,void 0)},Ln.prototype.parse=function(t){return S.JSON.parse(t,void 0)};var Fn=S.JSON.parse;function Vn(t){Ut.call(this),this.headers=new Ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Bn,this.D=this.F=!1}q(Vn,Ut);var Bn="",Un=/^https?$/i,Qn=["POST","PUT"];function Kn(t){return"content-type"==t.toLowerCase()}function jn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Wn(t),zn(t)}function Wn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Gn(t){if(t.b&&void 0!==w&&(!t.s[1]||4!=Yn(t)||2!=t.T()))if(t.l&&4==Yn(t))ne(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Yn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(ze)[1]||null;if(!o&&S.self&&S.self.location){var a=S.self.location.protocol;o=a.substr(0,a.length-1)}i=!Un.test(o?o.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Wn(t))}finally{zn(t)}}}function zn(t,e){if(t.a){Hn(t);var n=t.a,r=t.s[0]?C:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Hn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(S.clearTimeout(t.m),t.m=null)}function Yn(t){return t.a?t.a.readyState:0}function Xn(t,e){return t.a?t.a.getResponseHeader(e):null}function Jn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var n="";return X(t,function(t,e){n+=e,n+=":",n+=t,n+="\r\n"}),n}(n),E(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return tn(t,e,n),t}function $n(t){this.f=[],this.F=new Sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!I("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=I("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=I("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=I("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=I("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Cn(t&&t.concurrentRequestLimit),this.ja=new Pn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Zn(t){if(tr(t),3==t.u){var e=t.P++,n=Ye(t.B);tn(n,"SID",t.H),tn(n,"RID",e),tn(n,"TYPE","terminate"),ir(t,n),(e=new Ne(t,e,void 0)).F=2,e.f=nn(Ye(n)),n=!1,S.navigator&&S.navigator.sendBeacon&&(n=S.navigator.sendBeacon(e.f.toString(),"")),!n&&S.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=x(),xe(e)}fr(t)}function tr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(S.clearTimeout(t.l),t.l=null),cr(t),t.b.cancel(),t.h&&(T(t.h)&&S.clearTimeout(t.h),t.h=null)}function er(t,e){t.f.push(new In(t.Ra++,e)),3==t.u&&nr(t)}function nr(t){An(t.b)||t.h||(t.h=!0,Xt(t.Ia,t),t.A=0)}function rr(t,e){var n;n=e?e.W:t.P++;var r=Ye(t.B);tn(r,"SID",t.H),tn(r,"RID",n),tn(r,"AID",t.O),ir(t,r),t.g&&t.i&&Jn(r,t.g,t.i),n=new Ne(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=or(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),Mn(t.b,n),Me(n,r,e)}function ir(t,n){t.c&&Qe({},function(t,e){tn(n,e,t)})}function or(t,e,n){n=Math.min(t.f.length,n);var r=t.c?L(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{xn(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function ar(t){t.a||t.l||(t.S=1,Xt(t.Ha,t),t.v=0)}function sr(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=ye(L(t.Ha,t),hr(t,t.v)),t.v++,!0)}function ur(t,e,n){var r=e.l;r&&Nn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=pr(t,null,t.ha),nr(t)}function cr(t){null!=t.s&&(S.clearTimeout(t.s),t.s=null)}function hr(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function lr(t,e){if(2==e){var n=null;t.c&&(n=null);var r=L(t.fb,t);n||(n=new He("//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||Xe(n,"https"),nn(n)),function(t,e){var n=new ce;if(S.Image){var r=new Image;r.onload=P(qn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=P(qn,n,r,"TestLoadImage: error",!1,e),r.onabort=P(qn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=P(qn,n,r,"TestLoadImage: timeout",!1,e),S.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else de(2);t.u=0,t.c&&t.c.ta(e),fr(t),tr(t)}function fr(t){t.u=0,t.m=-1,t.c&&(0==On(t.b).length&&0==t.f.length||(t.b.c.length=0,Q(t.f),t.f.length=0),t.c.sa())}function pr(t,e,n){var r=function(t){return t instanceof He?Ye(t):new He(t,void 0)}(n);if(""!=r.b)e&&Je(r,e+"."+r.b),$e(r,r.i);else{var i,o=S.location;i=e?e+"."+o.hostname:o.hostname,r=function(t,e,n,r){var i=new He(null,void 0);return t&&Xe(i,t),e&&Je(i,e),n&&$e(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return t.V&&X(t.V,function(t,e){tn(r,e,t)}),e=t.j,n=t.I,e&&n&&tn(r,e,n),tn(r,"VER",t.wa),ir(t,r),r}function dr(){}function mr(){if(it&&!(10<=Number(pt)))throw Error("Environmental error: no available transport.")}function yr(t,e){Ut.call(this),this.a=new $n(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!K(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!K(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new br(this)}function gr(t){Ie.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function vr(){Ce.call(this),this.status=1}function br(t){this.a=t}(g=Vn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?we(this.H):we(Ee),this.a.onreadystatechange=L(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void jn(this,t)}t=n||"";var i=new Ke(this.headers);r&&Qe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Kn,n=t.length,r=E(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:E(t)?t.charAt(e):t[e]}(i.K()),n=S.FormData&&t instanceof S.FormData,0<=V(Qn,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hn(this),0<this.o&&((this.D=function(t){return it&&mt(9)&&T(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=L(this.Ca,this)):this.m=ne(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){jn(this,t)}},g.Ca=function(){void 0!==w&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),zn(this,!0)),Vn.N.G.call(this)},g.Fa=function(){this.j||(this.w||this.l||this.g?Gn(this):this.$a())},g.$a=function(){Gn(this)},g.T=function(){try{return 2<Yn(this)?this.a.status:-1}catch(t){return-1}},g.za=function(){try{return 2<Yn(this)?this.a.statusText:""}catch(t){return""}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fn(e)}},g.ya=function(){return this.h},g.Ya=function(){return E(this.f)?this.f:String(this.f)},(g=$n.prototype).wa=8,g.u=1,g.Da=function(){return 0==this.u},g.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new Ne(this,t,void 0),r=this.i;if(this.J&&(r?Z(r=J(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&E(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=or(this,n,e),tn(i=Ye(this.B),"RID",t),tn(i,"CVER",22),this.o&&this.j&&tn(i,"X-HTTP-Session-Id",this.j),ir(this,i),this.g&&r&&Jn(i,this.g,r),Mn(this.b,n),this.W?(tn(i,"$req",e),tn(i,"SID","null"),n.S=!0,Me(n,i,null)):Me(n,i,e),this.u=2}}else 3==this.u&&(t?rr(this,t):0==this.f.length||An(this.b)||rr(this))},g.Ha=function(){this.l=null,this.a=new Ne(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Ye(this.pa);tn(t,"RID","rpc"),tn(t,"SID",this.H),tn(t,"CI",this.ia?"0":"1"),tn(t,"AID",this.O),ir(this,t),tn(t,"TYPE","xmlhttp"),this.g&&this.i&&Jn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),_e(this.a,t,!0,this.ga)},g.Ga=function(t,e){if(0!=this.u&&(this.a==t||Rn(this.b,t)))if(this.m=t.o,!t.s&&Rn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(N(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;cr(this),this.a.cancel(),this.a=null}sr(this),de(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=ye(L(this.Za,this),6e3));if(kn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else lr(this,11)}else if(!t.s&&this.a!=t||cr(this),!K(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&T(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Xn(r,"X-Client-Wire-Protocol"))&&Nn(this.b,i),this.j&&(r=Xn(r,"X-HTTP-Session-Id")))&&(this.I=r,tn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=pr(this,this.Y()?this.ga:null,this.ha),r.s?(_n(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Fe(r),xe(r)),this.a=r):ar(this),0<this.f.length&&nr(this)}else"stop"!=r[0]&&"close"!=r[0]||lr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?lr(this,7):Zn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},g.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,sr(this),de(19))},g.na=function(t){var e=null;if(this.a==t){cr(this),this.a=null;var n=2}else{if(!Rn(this.b,t))return;e=t.j,_n(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=x()-t.v,he.dispatchEvent(new me(he,t.l?t.l.length:0,e,this.A)),nr(this)):ar(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(kn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.f=e.j.concat(t.f),!0):!(1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa))&&(t.h=ye(L(t.Ia,t,e),hr(t,t.A)),t.A++,!0))}(this,t)||2==n&&sr(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:lr(this,5);break;case 4:lr(this,10);break;case 3:lr(this,6);break;default:lr(this,2)}}},g.fb=function(t){de(t?2:1)},g.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Vn(this.La)).F=this.R,t},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=dr.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Ta=function(){},mr.prototype.a=function(t,e){return new yr(t,e)},q(yr,Ut),(g=yr.prototype).addEventListener=function(t,e,n,r){yr.N.addEventListener.call(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){yr.N.removeEventListener.call(this,t,e,n,r)},g.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;de(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new bn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Jn(e,t.g,t.i)),(t=t.w).i=n,e=pr(t.a,null,t.i),de(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,wn(t)):(en(e,"MODE","init"),!t.a.o&&t.a.j&&en(e,"X-HTTP-Session-Id",t.a.j),t.b=new Ne(t,void 0,void 0),t.b.h=t.h,_e(t.b,e,!1,null),t.M=0)},g.close=function(){Zn(this.a)},g.Xa=function(t){if(E(t)){var e={};e.__data__=t,er(this.a,e)}else this.h?((e={}).__data__=Kt(t),er(this.a,e)):er(this.a,t)},g.G=function(){this.a.c=null,delete this.f,Zn(this.a),delete this.a,yr.N.G.call(this)},q(gr,Ie),q(vr,Ce),q(br,dr),br.prototype.va=function(){this.a.dispatchEvent("a")},br.prototype.ua=function(t){this.a.dispatchEvent(new gr(t))},br.prototype.ta=function(t){this.a.dispatchEvent(new vr(t))},br.prototype.sa=function(){this.a.dispatchEvent("b")};var wr=P(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},mr);mr.prototype.createWebChannel=mr.prototype.a,yr.prototype.send=yr.prototype.Xa,yr.prototype.open=yr.prototype.Wa,yr.prototype.close=yr.prototype.close,ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,ve.COMPLETE="complete",(Se.EventType=Te).OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",Ut.prototype.listen=Ut.prototype.Aa,Vn.prototype.listenOnce=Vn.prototype.Ba,Vn.prototype.getLastError=Vn.prototype.Ya,Vn.prototype.getLastErrorCode=Vn.prototype.ya,Vn.prototype.getStatus=Vn.prototype.T,Vn.prototype.getStatusText=Vn.prototype.za,Vn.prototype.getResponseJson=Vn.prototype.Va,Vn.prototype.getResponseText=Vn.prototype.aa,Vn.prototype.send=Vn.prototype.ca;var Sr,Er,Tr={createWebChannelTransport:wr,ErrorCode:ge,EventType:ve,WebChannel:Se,XhrIo:Vn},Ir=Tr.createWebChannelTransport,Cr=Tr.ErrorCode,Dr=Tr.EventType,Nr=Tr.WebChannel,Ar=Tr.XhrIo,kr=Pd.SDK_VERSION,Rr=new r("@firebase/firestore");function Mr(){return Rr.logLevel===o.DEBUG?Sr.DEBUG:Rr.logLevel===o.SILENT?Sr.SILENT:Sr.ERROR}function _r(t){switch(t){case Sr.DEBUG:Rr.logLevel=o.DEBUG;break;case Sr.ERROR:Rr.logLevel=o.ERROR;break;case Sr.SILENT:Rr.logLevel=o.SILENT;break;default:Rr.error("Firestore ("+kr+"): Invalid value passed to `setLogLevel`")}}function Or(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Rr.logLevel<=o.DEBUG){var i=n.map(Pr);Rr.debug.apply(Rr,["Firestore ("+kr+") ["+t+"]: "+e].concat(i))}}function Lr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Rr.logLevel<=o.ERROR){var r=e.map(Pr);Rr.error.apply(Rr,["Firestore ("+kr+"): "+t].concat(r))}}function Pr(e){if("string"==typeof e)return e;var t=Fr.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function xr(t){var e="FIRESTORE ("+kr+") INTERNAL ASSERTION FAILED: "+t;throw Lr(e),new Error(e)}function qr(t,e){t||xr(e)}(Er=Sr=Sr||{})[Er.DEBUG=0]="DEBUG",Er[Er.ERROR=1]="ERROR",Er[Er.SILENT=2]="SILENT";var Fr=(Vr.setPlatform=function(t){Vr.platform&&xr("Platform already defined"),Vr.platform=t},Vr.getPlatform=function(){return Vr.platform||xr("Platform not set"),Vr.platform},Vr);function Vr(){}function Br(){return Fr.getPlatform().emptyByteString}var Ur,Qr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Kr=(s(jr,Ur=Error),jr);function jr(t,e){var n=Ur.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Wr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Kr(Qr.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function Gr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zr(t,e){return void 0!==t?t:e}function Hr(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Yr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xr(t){for(var e in qr(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(0!==e.length)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+di(e.length,"argument")+".")}function $r(t,e,n){if(e.length!==n)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires "+di(n,"argument")+", but was called with "+di(e.length,"argument")+".")}function Zr(t,e,n){if(e.length<n)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires at least "+di(n,"argument")+", but was called with "+di(e.length,"argument")+".")}function ti(t,e,n,r){if(e.length<n||e.length>r)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+di(e.length,"argument")+".")}function ei(t,e,n,r){si(t,e,pi(n)+" argument",r)}function ni(t,e,n,r){void 0!==r&&ei(t,e,n,r)}function ri(t,e,n,r){si(t,e,n+" option",r)}function ii(t,e,n,r){void 0!==r&&ri(t,e,n,r)}function oi(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+ci(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+ci(r[o]))}(t,e,n,r,i)}function ai(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(ci(u))}var c=ci(r);throw new Kr(Qr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function si(t,e,n,r){if(!("object"===e?ui(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=ci(r);throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function ui(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ci(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":xr("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function hi(t,e,n){if(void 0===n)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+pi(e)+" argument, but it was undefined.")}function li(n,t,r){Yr(t,function(t,e){if(r.indexOf(t)<0)throw new Kr(Qr.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function fi(t,e,n,r){var i=ci(r);return new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires its "+pi(n)+" argument to be a "+e+", but it was: "+i)}function pi(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function di(t,e){return t+" "+e+(1===t?"":"s")}var mi=(yi.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return qr(20===e.length,"Invalid auto ID: "+e),e},yi);function yi(){}function gi(t,e){return t<e?-1:e<t?1:0}function vi(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function bi(t){return t+"\0"}function wi(){if("undefined"==typeof Uint8Array)throw new Kr(Qr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Si(){if(!Fr.getPlatform().base64Available)throw new Kr(Qr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ei=(Ti.fromBase64String=function(t){$r("Blob.fromBase64String",arguments,1),ei("Blob.fromBase64String","string",1,t),Si();try{return new Ti(Fr.getPlatform().atob(t))}catch(t){throw new Kr(Qr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Ti.fromUint8Array=function(t){if($r("Blob.fromUint8Array",arguments,1),wi(),!(t instanceof Uint8Array))throw fi("Blob.fromUint8Array","Uint8Array",1,t);return new Ti(Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""))},Ti.prototype.toBase64=function(){return $r("Blob.toBase64",arguments,0),Si(),Fr.getPlatform().btoa(this._binaryString)},Ti.prototype.toUint8Array=function(){$r("Blob.toUint8Array",arguments,0),wi();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},Ti.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ti.prototype.isEqual=function(t){return this._binaryString===t._binaryString},Ti.prototype._compareTo=function(t){return gi(this._binaryString,t._binaryString)},Ti);function Ti(t){Si(),this._binaryString=t}var Ii=Wr(Ei,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ci=function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Di="(default)",Ni=(Object.defineProperty(Ai.prototype,"isDefaultDatabase",{get:function(){return this.database===Di},enumerable:!0,configurable:!0}),Ai.prototype.isEqual=function(t){return t instanceof Ai&&t.projectId===this.projectId&&t.database===this.database},Ai.prototype.compareTo=function(t){return gi(this.projectId,t.projectId)||gi(this.database,t.database)},Ai);function Ai(t,e){this.projectId=t,this.database=e||Di}var ki=(Ri.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ri.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},Ri.INVALID=-1,Ri);function Ri(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}var Mi="__name__",_i=(Object.defineProperty(Oi.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Oi.prototype.isEqual=function(t){return 0===Oi.comparator(this,t)},Oi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},Oi.prototype.limit=function(){return this.offset+this.length},Oi.prototype.popFirst=function(t){return t=void 0===t?1:t,qr(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},Oi.prototype.popLast=function(){return qr(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Oi.prototype.firstSegment=function(){return qr(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Oi.prototype.lastSegment=function(){return this.get(this.length-1)},Oi.prototype.get=function(t){return qr(t<this.length,"Index out of range"),this.segments[this.offset+t]},Oi.prototype.isEmpty=function(){return 0===this.length},Oi.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Oi.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Oi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Oi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Oi.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Oi);function Oi(t,e,n){void 0===e?e=0:e>t.length&&xr("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&xr("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}var Li,Pi=(s(xi,Li=_i),xi.prototype.construct=function(t,e,n){return new xi(t,e,n)},xi.prototype.canonicalString=function(){return this.toArray().join("/")},xi.prototype.toString=function(){return this.canonicalString()},xi.fromString=function(t){if(0<=t.indexOf("//"))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new xi(t.split("/").filter(function(t){return 0<t.length}))},xi.EMPTY_PATH=new xi([]),xi);function xi(){return null!==Li&&Li.apply(this,arguments)||this}var qi,Fi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vi=(s(Bi,qi=_i),Bi.prototype.construct=function(t,e,n){return new Bi(t,e,n)},Bi.isValidIdentifier=function(t){return Fi.test(t)},Bi.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Bi.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},Bi.prototype.toString=function(){return this.canonicalString()},Bi.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Mi},Bi.keyField=function(){return new Bi([Mi])},Bi.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new Kr(Qr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Kr(Qr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Kr(Qr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bi(e)},Bi.EMPTY_PATH=new Bi([]),Bi);function Bi(){return null!==qi&&qi.apply(this,arguments)||this}var Ui=(Qi.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Qi.prototype.isEqual=function(t){return null!==t&&0===Pi.comparator(this.path,t.path)},Qi.prototype.toString=function(){return this.path.toString()},Qi.comparator=function(t,e){return Pi.comparator(t.path,e.path)},Qi.isDocumentKey=function(t){return t.length%2==0},Qi.fromSegments=function(t){return new Qi(new Pi(t.slice()))},Qi.fromPathString=function(t){return new Qi(Pi.fromString(t))},Qi.EMPTY=new Qi(new Pi([])),Qi);function Qi(t){this.path=t,qr(Qi.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}var Ki,ji,Wi=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};(ji=Ki=Ki||{}).All="all",ji.ListenStreamIdle="listen_stream_idle",ji.ListenStreamConnectionBackoff="listen_stream_connection_backoff",ji.WriteStreamIdle="write_stream_idle",ji.WriteStreamConnectionBackoff="write_stream_connection_backoff",ji.OnlineStateTimeout="online_state_timeout",ji.ClientMetadataRefresh="client_metadata_refresh",ji.LruGarbageCollection="lru_garbage_collection",ji.RetryTransaction="retry_transaction";var Gi=(zi.createAndSchedule=function(t,e,n,r,i){var o=new zi(t,e,Date.now()+n,r,i);return o.start(n),o},zi.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},zi.prototype.skipDelay=function(){return this.handleDelayElapsed()},zi.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kr(Qr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},zi.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},zi.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},zi);function zi(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}var Hi=(Object.defineProperty(Yi.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Yi.prototype.enqueueAndForget=function(t){this.enqueue(t)},Yi.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},Yi.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},Yi.prototype.enqueueAndInitiateShutdown=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Yi.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},Yi.prototype.enqueueInternal=function(t){var n=this,e=this.tail.then(function(){return n.operationInProgress=!0,t().catch(function(t){n.failure=t,n.operationInProgress=!1;var e=t.stack||t.message||"";throw Lr("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.operationInProgress=!1,t})});return this.tail=e},Yi.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),qr(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.timerIdsToSkip.indexOf(t)&&(e=0);var i=Gi.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},Yi.prototype.verifyNotFailed=function(){this.failure&&xr("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Yi.prototype.verifyOperationInProgress=function(){qr(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Yi.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},Yi.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},Yi.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){qr(r===Ki.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.delayedOperations;t<e.length;t++){var n=e[t];if(n.skipDelay(),r!==Ki.All&&n.timerId===r)break}return i.drain()})},Yi.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},Yi.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);qr(0<=e,"Delayed operation not found."),this.delayedOperations.splice(e,1)},Yi);function Yi(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var Xi="",Ji="",$i="",Zi="";function to(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=no(e)),e=eo(t.get(n),e);return no(e)}function eo(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Xi+$i;break;case Xi:n+=Xi+Zi;break;default:n+=o}}return n}function no(t){return t+Xi+Ji}function ro(t){var e=t.length;if(qr(2<=e,"Invalid path "+t),2===e)return qr(t.charAt(0)===Xi&&t.charAt(1)===Ji,"Non-empty path "+t+" had length 2"),Pi.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(Xi,o);switch((a<0||n<a)&&xr('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case Ji:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case $i:i+=t.substring(o,a),i+="\0";break;case Zi:i+=t.substring(o,a+1);break;default:xr('Invalid encoded resource path: "'+t+'"')}o=a+2}return new Pi(r)}var io=(oo.now=function(){return oo.fromMillis(Date.now())},oo.fromDate=function(t){return oo.fromMillis(t.getTime())},oo.fromMillis=function(t){var e=Math.floor(t/1e3);return new oo(e,1e6*(t-1e3*e))},oo.prototype.toDate=function(){return new Date(this.toMillis())},oo.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},oo.prototype._compareTo=function(t){return this.seconds===t.seconds?gi(this.nanoseconds,t.nanoseconds):gi(this.seconds,t.seconds)},oo.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},oo.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},oo);function oo(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Kr(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Kr(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Kr(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Kr(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}var ao=(so.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new so(new io(e,t%1e6*1e3))},so.fromTimestamp=function(t){return new so(t)},so.forDeletedDoc=function(){return so.MIN},so.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},so.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},so.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},so.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},so.prototype.toTimestamp=function(){return this.timestamp},so.MIN=new so(new io(0,0)),so);function so(t){this.timestamp=t}var uo=(co.prototype.insert=function(t,e){return new co(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,fo.BLACK,null,null))},co.prototype.remove=function(t){return new co(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fo.BLACK,null,null))},co.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},co.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},co.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(co.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),co.prototype.minKey=function(){return this.root.minKey()},co.prototype.maxKey=function(){return this.root.maxKey()},co.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},co.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},co.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},co.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},co.prototype.getIterator=function(){return new ho(this.root,null,this.comparator,!1)},co.prototype.getIteratorFrom=function(t){return new ho(this.root,t,this.comparator,!1)},co.prototype.getReverseIterator=function(){return new ho(this.root,null,this.comparator,!0)},co.prototype.getReverseIteratorFrom=function(t){return new ho(this.root,t,this.comparator,!0)},co);function co(t,e){this.comparator=t,this.root=e||fo.EMPTY}var ho=(lo.prototype.getNext=function(){qr(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},lo.prototype.hasNext=function(){return 0<this.nodeStack.length},lo.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},lo);function lo(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}var fo=(po.prototype.copy=function(t,e,n,r,i){return new po(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},po.prototype.isEmpty=function(){return!1},po.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},po.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},po.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},po.prototype.minKey=function(){return this.min().key},po.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},po.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},po.prototype.removeMin=function(){if(this.left.isEmpty())return po.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},po.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},po.prototype.isRed=function(){return this.color},po.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},po.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},po.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},po.prototype.rotateLeft=function(){var t=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},po.prototype.rotateRight=function(){var t=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},po.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},po.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},po.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw xr("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw xr("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw xr("Black depths differ");return t+(this.isRed()?0:1)},po.EMPTY=null,po.RED=!0,po.BLACK=!1,po);function po(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:po.RED,this.left=null!=r?r:po.EMPTY,this.right=null!=i?i:po.EMPTY,this.size=this.left.size+1+this.right.size}var mo=(Object.defineProperty(yo.prototype,"key",{get:function(){throw xr("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"value",{get:function(){throw xr("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"color",{get:function(){throw xr("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"left",{get:function(){throw xr("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"right",{get:function(){throw xr("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),yo.prototype.copy=function(t,e,n,r,i){return this},yo.prototype.insert=function(t,e,n){return new fo(t,e)},yo.prototype.remove=function(t,e){return this},yo.prototype.isEmpty=function(){return!0},yo.prototype.inorderTraversal=function(t){return!1},yo.prototype.reverseTraversal=function(t){return!1},yo.prototype.minKey=function(){return null},yo.prototype.maxKey=function(){return null},yo.prototype.isRed=function(){return!1},yo.prototype.checkMaxDepth=function(){return!0},yo.prototype.check=function(){return 0},yo);function yo(){this.size=0}fo.EMPTY=new mo;var go=(vo.fromMapKeys=function(t){var e=new vo(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},vo.prototype.has=function(t){return null!==this.data.get(t)},vo.prototype.first=function(){return this.data.minKey()},vo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(vo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),vo.prototype.indexOf=function(t){return this.data.indexOf(t)},vo.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},vo.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},vo.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},vo.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},vo.prototype.getIterator=function(){return new bo(this.data.getIterator())},vo.prototype.getIteratorFrom=function(t){return new bo(this.data.getIteratorFrom(t))},vo.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},vo.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},vo.prototype.isEmpty=function(){return this.data.isEmpty()},vo.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},vo.prototype.isEqual=function(t){if(!(t instanceof vo))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},vo.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},vo.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},vo.prototype.copy=function(t){var e=new vo(this.comparator);return e.data=t,e},vo);function vo(t){this.comparator=t,this.data=new uo(this.comparator)}var bo=(wo.prototype.getNext=function(){return this.iter.getNext().key},wo.prototype.hasNext=function(){return this.iter.hasNext()},wo);function wo(t){this.iter=t}var So=new uo(Ui.comparator);function Eo(){return So}function To(){return Eo()}var Io=new uo(Ui.comparator);function Co(){return Io}var Do=new uo(Ui.comparator);function No(){return Do}var Ao=new go(Ui.comparator);function ko(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ao,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ro=new go(gi);function Mo(){return Ro}var _o=(Oo.prototype.applyToRemoteDocument=function(t,e,n){e&&qr(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;qr(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},Oo.prototype.applyToLocalView=function(t,e){e&&qr(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},Oo.prototype.applyToLocalDocumentSet=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.applyToLocalView(t.key,n.get(t.key));e&&(i=i.insert(t.key,e))}),i},Oo.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ko())},Oo.prototype.isEqual=function(t){return this.batchId===t.batchId&&vi(this.mutations,t.mutations)&&vi(this.baseMutations,t.baseMutations)},Oo);function Oo(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,qr(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var Lo=(Po.from=function(t,e,n,r){qr(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=No(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new Po(t,e,n,r,i)},Po);function Po(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var xo=(qo.prototype.catch=function(t){return this.next(void 0,t)},qo.prototype.next=function(r,i){var o=this;return this.callbackAttached&&xr("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new qo(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},qo.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},qo.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof qo?e:qo.resolve(e)}catch(t){return qo.reject(t)}},qo.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):qo.resolve(e)},qo.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):qo.reject(e)},qo.resolve=function(n){return new qo(function(t,e){t(n)})},qo.reject=function(n){return new qo(function(t,e){e(n)})},qo.waitFor=function(t){return new qo(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},qo.or=function(t){for(var n=qo.resolve(!1),e=function(e){n=n.next(function(t){return t?qo.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},qo.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},qo);function qo(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}var Fo=(Vo.forUser=function(t,e,n,r){return qr(""!==t.uid,"UserID must not be an empty string."),new Vo(t.isAuthenticated()?t.uid:"",e,n,r)},Vo.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ko(t).iterate({index:du.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},Vo.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Qo(n),Wo(e).put(t)})},Vo.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},Vo.prototype.setLastStreamToken=function(e,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Qo(n),Wo(e).put(t)})},Vo.prototype.addMutationBatch=function(u,c,h,l){var f=this,p=jo(u),d=Ko(u);return d.add({}).next(function(t){qr("number"==typeof t,"Auto-generated key is not a number");var e=new _o(t,c,h,l),n=f.serializer.toDbMutationBatch(f.userId,e);f.documentKeysByBatchId[t]=e.keys();for(var r=[],i=0,o=l;i<o.length;i++){var a=o[i],s=yu.key(f.userId,a.key.path,t);r.push(d.put(n)),r.push(p.put(s,yu.PLACEHOLDER)),r.push(f.indexManager.addToCollectionParentIndex(u,a.key.path.popLast()))}return xo.waitFor(r).next(function(){return e})})},Vo.prototype.lookupMutationBatch=function(t,e){var n=this;return Ko(t).get(e).next(function(t){return t?(qr(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},Vo.prototype.lookupMutationKeys=function(t,n){var r=this;return this.documentKeysByBatchId[n]?xo.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(t,n).next(function(t){if(t){var e=t.keys();return r.documentKeysByBatchId[n]=e}return null})},Vo.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Ko(t).iterate({index:du.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(qr(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.fromDbMutationBatch(e)),n.done()}).next(function(){return o})},Vo.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ko(t).iterate({index:du.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},Vo.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ko(t).loadAll(du.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},Vo.prototype.getAllMutationBatchesAffectingDocumentKey=function(s,u){var c=this,t=yu.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return jo(s).iterate({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],a=ro(i);if(r===c.userId&&u.path.isEqual(a))return Ko(s).get(o).next(function(t){if(!t)throw xr("Dangling document-mutation reference found: "+e+" which points to "+o);qr(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.fromDbMutationBatch(t))});n.done()}).next(function(){return h})},Vo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(r,t){var u=this,c=new go(gi),i=[];return t.forEach(function(s){var t=yu.prefixForPath(u.userId,s.path),e=IDBKeyRange.lowerBound(t),n=jo(r).iterate({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],a=ro(i);r===u.userId&&s.path.isEqual(a)?c=c.add(o):n.done()});i.push(n)}),xo.waitFor(i).next(function(){return u.lookupMutationBatches(r,c)})},Vo.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var s=this;qr(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var u=e.path,c=u.length+1,n=yu.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new go(gi);return jo(t).iterate({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],a=ro(i);r===s.userId&&u.isPrefixOf(a)?a.length===c&&(h=h.add(o)):n.done()}).next(function(){return s.lookupMutationBatches(t,h)})},Vo.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Ko(t).get(e).next(function(t){if(null===t)throw xr("Dangling document-mutation reference found, which points to "+e);qr(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),xo.waitFor(i).next(function(){return r})},Vo.prototype.removeMutationBatch=function(e,n){var r=this;return Uo(e.simpleDbTransaction,this.userId,n).next(function(t){return r.removeCachedMutationKeys(n.batchId),xo.forEach(t,function(t){return r.referenceDelegate.removeMutationReference(e,t)})})},Vo.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},Vo.prototype.performConsistencyCheck=function(n){var o=this;return this.checkEmpty(n).next(function(t){if(!t)return xo.resolve();var e=IDBKeyRange.lowerBound(yu.prefixForUser(o.userId)),i=[];return jo(n).iterate({range:e},function(t,e,n){if(t[0]===o.userId){var r=ro(t[1]);i.push(r)}else n.done()}).next(function(){qr(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},Vo.prototype.containsKey=function(t,e){return Bo(t,this.userId,e)},Vo.prototype.getMutationQueueMetadata=function(t){var e=this;return Wo(t).get(this.userId).next(function(t){return t||new fu(e.userId,-1,"")})},Vo);function Vo(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Bo(t,o,e){var n=yu.prefixForPath(o,e.path),a=n[1],r=IDBKeyRange.lowerBound(n),s=!1;return jo(t).iterate({range:r,keysOnly:!0},function(t,e,n){var r=t[0],i=t[1];t[2];r===o&&i===a&&(s=!0),n.done()}).next(function(){return s})}function Uo(t,e,n){var r=t.store(du.store),i=t.store(yu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){qr(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=yu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return xo.waitFor(o).next(function(){return c})}function Qo(t){return t instanceof Uint8Array?(qr("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Ko(t){return cc.getStore(t,du.store)}function jo(t){return cc.getStore(t,yu.store)}function Wo(t){return cc.getStore(t,fu.store)}var Go,zo;(zo=Go=Go||{})[zo.QueryCache=0]="QueryCache",zo[zo.SyncEngine=1]="SyncEngine";var Ho=(Yo.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},Yo.prototype.after=function(t){return this.seek(t+2),this.next()},Yo.prototype.seek=function(t){qr((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},Yo.forQueryCache=function(){return new Yo(Go.QueryCache,2)},Yo.forSyncEngine=function(){return new Yo(Go.SyncEngine)},Yo);function Yo(t,e){qr((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}var Xo="SimpleDb",Jo=($o.openOrCreate=function(o,t,a){return qr($o.isAvailable(),"IndexedDB not supported in current environment."),Or(Xo,"Opening database:",o),new xo(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new $o(e))},i.onblocked=function(){r(new Kr(Qr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Kr(Qr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){Or(Xo,'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result,n=new ea(i.transaction);a.createOrUpgrade(e,n,t.oldVersion,au).next(function(){Or(Xo,"Database upgrade to version "+au+" complete")})}}).toPromise()},$o.delete=function(t){return Or(Xo,"Removing database:",t),oa(window.indexedDB.deleteDatabase(t)).toPromise()},$o.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=u(),e=$o.getIOSVersion(t),n=0<e&&e<10,r=$o.getAndroidVersion(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},$o.getStore=function(t,e){return t.store(e)},$o.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},$o.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},$o.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},$o.prototype.runTransaction=function(t,e,n){var r=ea.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),xo.reject(t)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},$o.prototype.close=function(){this.db.close()},$o);function $o(t){this.db=t,12.2===$o.getIOSVersion(u())&&Lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var Zo=(Object.defineProperty(ta.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(ta.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(ta.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),ta.prototype.done=function(){this.shouldStop=!0},ta.prototype.skip=function(t){this.nextKey=t},ta.prototype.delete=function(){return oa(this.dbCursor.delete())},ta);function ta(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}var ea=(na.open=function(t,e,n){return new na(t.transaction(n,e))},Object.defineProperty(na.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),na.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(Or(Xo,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},na.prototype.store=function(t){var e=this.transaction.objectStore(t);return qr(!!e,"Object store not part of transaction: "+t),new ra(e)},na);function na(t){var n=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Wi,this.transaction.oncomplete=function(){n.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?n.completionDeferred.reject(t.error):n.completionDeferred.resolve()},this.transaction.onerror=function(t){var e=sa(t.target.error);n.completionDeferred.reject(e)}}var ra=(ia.prototype.put=function(t,e){return oa(void 0!==e?(Or(Xo,"PUT",this.store.name,t,e),this.store.put(e,t)):(Or(Xo,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},ia.prototype.add=function(t){return Or(Xo,"ADD",this.store.name,t,t),oa(this.store.add(t))},ia.prototype.get=function(e){var n=this;return oa(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Or(Xo,"GET",n.store.name,e,t),t})},ia.prototype.delete=function(t){return Or(Xo,"DELETE",this.store.name,t),oa(this.store.delete(t))},ia.prototype.count=function(){return Or(Xo,"COUNT",this.store.name),oa(this.store.count())},ia.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},ia.prototype.deleteAll=function(t,e){Or(Xo,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},ia.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},ia.prototype.iterateSerial=function(i){var t=this.cursor({});return new xo(function(n,r){t.onerror=function(t){var e=sa(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},ia.prototype.iterateCursor=function(t,a){var s=[];return new xo(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new Zo(e),r=a(e.primaryKey,e.value,n);if(r instanceof xo){var i=r.catch(function(t){return n.done(),xo.reject(t)});s.push(i)}n.isDone?o():null===n.skipToKey?e.continue():e.continue(n.skipToKey)}else o()}}).next(function(){return xo.waitFor(s)})},ia.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(qr(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},ia.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},ia);function ia(t){this.store=t}function oa(t){return new xo(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=sa(t.target.error);r(e)}})}var aa=!1;function sa(t){var e=Jo.getIOSVersion(u());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Kr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return aa||(aa=!0,setTimeout(function(){throw r},0)),r}}return t}var ua=(ca.prototype.allocateTargetId=function(e){var n=this;return this.retrieveMetadata(e).next(function(t){return t.highestTargetId=n.targetIdGenerator.after(t.highestTargetId),n.saveMetadata(e,t).next(function(){return t.highestTargetId})})},ca.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return ao.fromTimestamp(new io(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},ca.prototype.getHighestSequenceNumber=function(t){return fa(t.simpleDbTransaction)},ca.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.retrieveMetadata(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.saveMetadata(e,t)})},ca.prototype.addQueryData=function(e,n){var r=this;return this.saveQueryData(e,n).next(function(){return r.retrieveMetadata(e).next(function(t){return t.targetCount+=1,r.updateMetadataFromQueryData(n,t),r.saveMetadata(e,t)})})},ca.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},ca.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ha(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return qr(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},ca.prototype.removeTargets=function(r,i,o){var a=this,s=0,u=[];return ha(r).iterate(function(t,e){var n=a.serializer.fromDbTarget(e);n.sequenceNumber<=i&&void 0===o[n.targetId]&&(s++,u.push(a.removeQueryData(r,n)))}).next(function(){return xo.waitFor(u)}).next(function(){return s})},ca.prototype.forEachTarget=function(t,r){var i=this;return ha(t).iterate(function(t,e){var n=i.serializer.fromDbTarget(e);r(n)})},ca.prototype.retrieveMetadata=function(t){return la(t.simpleDbTransaction)},ca.prototype.saveMetadata=function(t,e){return function(t){return cc.getStore(t,Au.store)}(t).put(Au.key,e)},ca.prototype.saveQueryData=function(t,e){return ha(t).put(this.serializer.toDbTarget(e))},ca.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},ca.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},ca.prototype.getQueryData=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),a=null;return ha(t).iterate({range:n,index:Iu.queryTargetsIndexName},function(t,e,n){var r=o.serializer.fromDbTarget(e);i.isEqual(r.query)&&(a=r,n.done())}).next(function(){return a})},ca.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],a=pa(n);return t.forEach(function(t){var e=to(t.path);o.push(a.put(new Du(r,e))),o.push(i.referenceDelegate.addReference(n,t))}),xo.waitFor(o)},ca.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=pa(n);return xo.forEach(t,function(t){var e=to(t.path);return xo.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,t)])})},ca.prototype.removeMatchingKeysForTargetId=function(t,e){var n=pa(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},ca.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=pa(t),o=ko();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=ro(t[1]),i=new Ui(r);o=o.add(i)}).next(function(){return o})},ca.prototype.containsKey=function(t,e){var n=to(e.path),r=IDBKeyRange.bound([n],[bi(n)],!1,!0),i=0;return pa(t).iterate({index:Du.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},ca.prototype.getQueryDataForTarget=function(t,e){var n=this;return ha(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},ca);function ca(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Ho.forQueryCache()}function ha(t){return cc.getStore(t,Iu.store)}function la(t){return Jo.getStore(t,Au.store).get(Au.key).next(function(t){return qr(null!==t,"Missing metadata row."),t})}function fa(t){return la(t).next(function(t){return t.highestListenSequenceNumber})}function pa(t){return cc.getStore(t,Du.store)}var da=(ma.fromSet=function(t){return new ma(t)},ma.fromArray=function(t){var e=new go(Vi.comparator);return t.forEach(function(t){return e=e.add(t)}),new ma(e)},ma.prototype.covers=function(e){var n=!1;return this.fields.forEach(function(t){t.isPrefixOf(e)&&(n=!0)}),n},ma.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},ma);function ma(t){this.fields=t}var ya=(ga.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},ga);function ga(t,e){this.field=t,this.transform=e}var va,ba,wa=function(t,e){this.version=t,this.transformResults=e};(ba=va=va||{})[ba.Set=0]="Set",ba[ba.Patch=1]="Patch",ba[ba.Transform=2]="Transform",ba[ba.Delete=3]="Delete";var Sa=(Ea.exists=function(t){return new Ea(void 0,t)},Ea.updateTime=function(t){return new Ea(t)},Object.defineProperty(Ea.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Ea.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ls&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ls:(qr(this.isNone,"Precondition should be empty"),!0)},Ea.prototype.isEqual=function(t){return function(t,e){return null!=t?!(!e||!t.isEqual(e)):t===e}(this.updateTime,t.updateTime)&&this.exists===t.exists},Ea.NONE=new Ea,Ea);function Ea(t,e){this.updateTime=t,this.exists=e,qr(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}var Ta=(Ia.prototype.verifyKeyMatches=function(t){null!=t&&qr(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Ia.getPostMutationVersion=function(t){return t instanceof Ls?t.version:ao.MIN},Ia);function Ia(){}var Ca,Da=(s(Na,Ca=Ta),Na.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Ls(this.key,n,{hasCommittedMutations:!0},this.value)},Na.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ta.getPostMutationVersion(t);return new Ls(this.key,r,{hasLocalMutations:!0},this.value)},Na.prototype.extractBaseValue=function(t){return null},Na.prototype.isEqual=function(t){return t instanceof Na&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},Na);function Na(t,e,n){var r=Ca.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=va.Set,r}var Aa,ka=(s(Ra,Aa=Ta),Ra.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Bs(this.key,e.version);var n=this.patchDocument(t);return new Ls(this.key,e.version,{hasCommittedMutations:!0},n)},Ra.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ta.getPostMutationVersion(t),i=this.patchDocument(t);return new Ls(this.key,r,{hasLocalMutations:!0},i)},Ra.prototype.extractBaseValue=function(t){return null},Ra.prototype.isEqual=function(t){return t instanceof Ra&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},Ra.prototype.patchDocument=function(t){var e;return e=t instanceof Ls?t.data():Ds.EMPTY,this.patchObject(e)},Ra.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var e=r.data.field(t);n=null!==e?n.set(t,e):n.delete(t)}}),n},Ra);function Ra(t,e,n,r){var i=Aa.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=va.Patch,i}var Ma,_a=(s(Oa,Ma=Ta),Oa.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),qr(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Bs(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new Ls(this.key,i,{hasCommittedMutations:!0},o)},Oa.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new Ls(this.key,r.version,{hasLocalMutations:!0},o)},Oa.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Ls?t.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(e=null==e?Ds.EMPTY.set(i.field,a):e.set(i.field,a))}return e},Oa.prototype.isEqual=function(t){return t instanceof Oa&&this.key.isEqual(t.key)&&vi(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},Oa.prototype.requireDocument=function(t){qr(t instanceof Ls,"Unknown MaybeDocument type "+t);var e=t;return qr(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},Oa.prototype.serverTransformResults=function(t,e){var n=[];qr(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Ls&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},Oa.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof Ls&&(u=e.field(a.field)),null===u&&n instanceof Ls&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,t))}return r},Oa.prototype.transformObject=function(t,e){qr(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},Oa);function Oa(t,e){var n=Ma.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=va.Transform,n.precondition=Sa.exists(!0),n}var La,Pa,xa,qa,Fa,Va=(s(Ba,La=Ta),Ba.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by DeleteMutation."),new qs(this.key,e.version,{hasCommittedMutations:!0})},Ba.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&qr(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new qs(this.key,ao.forDeletedDoc())):t},Ba.prototype.extractBaseValue=function(t){return null},Ba.prototype.isEqual=function(t){return t instanceof Ba&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Ba);function Ba(t,e){var n=La.call(this)||this;return n.key=t,n.precondition=e,n.type=va.Delete,n}(xa=Pa=Pa||{})[xa.NullValue=0]="NullValue",xa[xa.BooleanValue=1]="BooleanValue",xa[xa.NumberValue=2]="NumberValue",xa[xa.TimestampValue=3]="TimestampValue",xa[xa.StringValue=4]="StringValue",xa[xa.BlobValue=5]="BlobValue",xa[xa.RefValue=6]="RefValue",xa[xa.GeoPointValue=7]="GeoPointValue",xa[xa.ArrayValue=8]="ArrayValue",xa[xa.ObjectValue=9]="ObjectValue",(Fa=qa=qa||{})[Fa.Default=0]="Default",Fa[Fa.Estimate=1]="Estimate",Fa[Fa.Previous=2]="Previous";var Ua=(Qa.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new Qa(qa.Estimate,e);case"previous":return new Qa(qa.Previous,e);case"none":case void 0:return new Qa(qa.Default,e);default:return xr("fromSnapshotOptions() called with invalid options.")}},Qa);function Qa(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}var Ka=(ja.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},ja.prototype.defaultCompareTo=function(t){return qr(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),gi(this.typeOrder,t.typeOrder)},ja);function ja(){}var Wa,Ga=(s(za,Wa=Ka),za.prototype.value=function(t){return null},za.prototype.isEqual=function(t){return t instanceof za},za.prototype.compareTo=function(t){return t instanceof za?0:this.defaultCompareTo(t)},za.INSTANCE=new za,za);function za(){var t=Wa.call(this)||this;return t.typeOrder=Pa.NullValue,t.internalValue=null,t}var Ha,Ya=(s(Xa,Ha=Ka),Xa.prototype.value=function(t){return this.internalValue},Xa.prototype.isEqual=function(t){return t instanceof Xa&&this.internalValue===t.internalValue},Xa.prototype.compareTo=function(t){return t instanceof Xa?gi(this,t):this.defaultCompareTo(t)},Xa.of=function(t){return t?Xa.TRUE:Xa.FALSE},Xa.TRUE=new Xa(!0),Xa.FALSE=new Xa(!1),Xa);function Xa(t){var e=Ha.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.BooleanValue,e}var Ja,$a=(s(Za,Ja=Ka),Za.prototype.value=function(t){return this.internalValue},Za.prototype.compareTo=function(t){return t instanceof Za?function(t,e){return t<e?-1:e<t?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}(this.internalValue,t.internalValue):this.defaultCompareTo(t)},Za);function Za(t){var e=Ja.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.NumberValue,e}function ts(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var es,ns=(s(rs,es=$a),rs.prototype.isEqual=function(t){return t instanceof rs&&ts(this.internalValue,t.internalValue)},rs);function rs(){return null!==es&&es.apply(this,arguments)||this}var is,os=(s(as,is=$a),as.prototype.isEqual=function(t){return t instanceof as&&ts(this.internalValue,t.internalValue)},as.NAN=new as(NaN),as.POSITIVE_INFINITY=new as(1/0),as.NEGATIVE_INFINITY=new as(-1/0),as);function as(){return null!==is&&is.apply(this,arguments)||this}var ss,us=(s(cs,ss=Ka),cs.prototype.value=function(t){return this.internalValue},cs.prototype.isEqual=function(t){return t instanceof cs&&this.internalValue===t.internalValue},cs.prototype.compareTo=function(t){return t instanceof cs?gi(this.internalValue,t.internalValue):this.defaultCompareTo(t)},cs);function cs(t){var e=ss.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.StringValue,e}var hs,ls=(s(fs,hs=Ka),fs.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},fs.prototype.isEqual=function(t){return t instanceof fs&&this.internalValue.isEqual(t.internalValue)},fs.prototype.compareTo=function(t){return t instanceof fs?this.internalValue._compareTo(t.internalValue):t instanceof ds?-1:this.defaultCompareTo(t)},fs);function fs(t){var e=hs.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.TimestampValue,e}var ps,ds=(s(ms,ps=Ka),ms.prototype.value=function(t){return t&&t.serverTimestampBehavior===qa.Estimate?new ls(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===qa.Previous&&this.previousValue?this.previousValue.value(t):null},ms.prototype.isEqual=function(t){return t instanceof ms&&this.localWriteTime.isEqual(t.localWriteTime)},ms.prototype.compareTo=function(t){return t instanceof ms?this.localWriteTime._compareTo(t.localWriteTime):t instanceof ls?1:this.defaultCompareTo(t)},ms.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},ms);function ms(t,e){var n=ps.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=Pa.TimestampValue,n}var ys,gs=(s(vs,ys=Ka),vs.prototype.value=function(t){return this.internalValue},vs.prototype.isEqual=function(t){return t instanceof vs&&this.internalValue.isEqual(t.internalValue)},vs.prototype.compareTo=function(t){return t instanceof vs?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},vs);function vs(t){var e=ys.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.BlobValue,e}var bs,ws=(s(Ss,bs=Ka),Ss.prototype.value=function(t){return this.key},Ss.prototype.isEqual=function(t){return t instanceof Ss&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},Ss.prototype.compareTo=function(t){if(t instanceof Ss){var e=this.databaseId.compareTo(t.databaseId);return 0!==e?e:Ui.comparator(this.key,t.key)}return this.defaultCompareTo(t)},Ss);function Ss(t,e){var n=bs.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=Pa.RefValue,n}var Es,Ts=(s(Is,Es=Ka),Is.prototype.value=function(t){return this.internalValue},Is.prototype.isEqual=function(t){return t instanceof Is&&this.internalValue.isEqual(t.internalValue)},Is.prototype.compareTo=function(t){return t instanceof Is?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},Is);function Is(t){var e=Es.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.GeoPointValue,e}var Cs,Ds=(s(Ns,Cs=Ka),Ns.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(t,e){r[t]=e.value(n)}),r},Ns.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},Ns.prototype.isEqual=function(t){if(t instanceof Ns){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},Ns.prototype.compareTo=function(t){if(t instanceof Ns){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),o=gi(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return gi(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},Ns.prototype.set=function(t,e){if(qr(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),e);var n=this.child(t.firstSegment());n instanceof Ns||(n=Ns.EMPTY);var r=n.set(t.popFirst(),e);return this.setChild(t.firstSegment(),r)},Ns.prototype.delete=function(t){if(qr(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new Ns(this.internalValue.remove(t.firstSegment()));var e=this.child(t.firstSegment());if(e instanceof Ns){var n=e.delete(t.popFirst());return new Ns(this.internalValue.insert(t.firstSegment(),n))}return this},Ns.prototype.contains=function(t){return null!==this.field(t)},Ns.prototype.field=function(t){qr(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof Ns?e.internalValue.get(t):null}),e},Ns.prototype.fieldMask=function(){var i=new go(Vi.comparator);return this.internalValue.forEach(function(t,e){var n=new Vi([t]);if(e instanceof Ns){var r=e.fieldMask().fields;r.isEmpty()?i=i.add(n):r.forEach(function(t){i=i.add(n.child(t))})}else i=i.add(n)}),da.fromSet(i)},Ns.prototype.toString=function(){return this.internalValue.toString()},Ns.prototype.child=function(t){return this.internalValue.get(t)||void 0},Ns.prototype.setChild=function(t,e){return new Ns(this.internalValue.insert(t,e))},Ns.EMPTY=new Ns(new uo(gi)),Ns);function Ns(t){var e=Cs.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.ObjectValue,e}var As,ks=(s(Rs,As=Ka),Rs.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},Rs.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},Rs.prototype.forEach=function(t){this.internalValue.forEach(t)},Rs.prototype.isEqual=function(t){if(t instanceof Rs){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},Rs.prototype.compareTo=function(t){if(t instanceof Rs){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return gi(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},Rs.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},Rs);function Rs(t){var e=As.call(this)||this;return e.internalValue=t,e.typeOrder=Pa.ArrayValue,e}var Ms=(_s.compareByKey=function(t,e){return Ui.comparator(t.key,e.key)},_s);function _s(t,e){this.key=t,this.version=e}var Os,Ls=(s(Ps,Os=Ms),Ps.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},Ps.prototype.data=function(){var n=this;if(!this.objectValue){var r=Ds.EMPTY;Yr(this.proto.fields||{},function(t,e){r=r.set(new Vi([t]),n.converter(e))}),this.objectValue=r,this.fieldValueCache=void 0}return this.objectValue},Ps.prototype.value=function(){return this.data().value()},Ps.prototype.isEqual=function(t){return t instanceof Ps&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Ps.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ps.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ps.prototype.getProtoField=function(t){qr(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Ps.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):xr("Trying to compare documents on fields that don't exist")},Ps);function Ps(t,e,n,r,i,o){var a=Os.call(this,t,e)||this;return a.objectValue=r,a.proto=i,a.converter=o,qr(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var xs,qs=(s(Fs,xs=Ms),Fs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Fs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Fs.prototype.isEqual=function(t){return t instanceof Fs&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Fs);function Fs(t,e,n){var r=xs.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Vs,Bs=(s(Us,Vs=Ms),Us.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Us.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Us.prototype.isEqual=function(t){return t instanceof Us&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Us);function Us(){return null!==Vs&&Vs.apply(this,arguments)||this}var Qs=(Ks.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},Ks.prototype.has=function(t){return void 0!==this.get(t)},Ks.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},Ks.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},Ks.prototype.forEach=function(s){Yr(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],a=i[1];s(o,a)}})},Ks.prototype.isEmpty=function(){return Xr(this.inner)},Ks);function Ks(t){this.mapKeyFn=t,this.inner={}}var js=(Ws.prototype.addEntry=function(t){this.assertNotApplied(),this.changes.set(t.key,t)},Ws.prototype.removeEntry=function(t){this.assertNotApplied(),this.changes.set(t,null)},Ws.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?xo.resolve(n):this.getFromCache(t,e)},Ws.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},Ws.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},Ws.prototype.assertNotApplied=function(){qr(!this.changesApplied,"Changes have already been applied.")},Ws);function Ws(){this.changes=new Qs(function(t){return t.toString()}),this.changesApplied=!1}var Gs,zs="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Hs=(Object.defineProperty(Ys.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),Ys.prototype.start=function(t){var e=Jo.getStore(t,Ou.store);return this.synchronizeLastDocumentChangeId(e)},Ys.prototype.addEntry=function(t,e,n){var r=this;return $s(t).put(tu(e),n).next(function(){r.indexManager.addToCollectionParentIndex(t,e.path.popLast())})},Ys.prototype.removeEntry=function(t,e){var n=$s(t),r=tu(e);return n.delete(r)},Ys.prototype.updateMetadata=function(e,n,r){var i=this;return this.getMetadata(e).next(function(t){return t.byteSize+=r,i.setMetadata(e,t).next(function(){if(i.keepDocumentChangeLog)return Zs(e).put({changes:i.serializer.toDbResourcePaths(n)})})})},Ys.prototype.getEntry=function(t,e){var n=this;return $s(t).get(tu(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},Ys.prototype.getSizedEntry=function(t,e){var n=this;return $s(t).get(tu(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:eu(t)}:null})},Ys.prototype.getEntries=function(t,e){var n=this,r=To();return this.forEachDbEntry(t,e,function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)}).next(function(){return r})},Ys.prototype.getSizedEntries=function(t,e){var n=this,r=To(),i=new uo(Ui.comparator);return this.forEachDbEntry(t,e,function(t,e){i=e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),i.insert(t,eu(e))):(r=r.insert(t,null),i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},Ys.prototype.forEachDbEntry=function(t,e,i){if(e.isEmpty())return xo.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),a=o.getNext();return $s(t).iterate({range:n},function(t,e,n){for(var r=Ui.fromSegments(t);a&&Ui.comparator(a,r)<0;)i(a,null),a=o.getNext();a&&a.isEqual(r)&&(i(a,e),a=o.hasNext()?o.getNext():null),a?n.skip(a.path.toArray()):n.done()}).next(function(){for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})},Ys.prototype.getDocumentsMatchingQuery=function(t,i){var o=this;qr(!i.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var a=Co(),s=i.path.length+1,e=i.path.toArray(),n=IDBKeyRange.lowerBound(e);return $s(t).iterate({range:n},function(t,e,n){if(t.length===s){var r=o.serializer.fromDbRemoteDocument(e);i.path.isPrefixOf(r.key.path)?r instanceof Ls&&i.matches(r)&&(a=a.insert(r.key,r)):n.done()}}).next(function(){return a})},Ys.prototype.getNewDocumentChanges=function(e){var r=this;qr(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=ko(),i=Eo(),t=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Zs(e);return a.iterate({range:t},function(t,e){if(o&&(o=!1,r._lastProcessedDocumentChangeId+1!==e.id))return r.synchronizeLastDocumentChangeId(a).next(function(){return xo.reject(new Kr(Qr.DATA_LOSS,zs))});n=n.unionWith(r.serializer.fromDbResourcePaths(e.changes)),r._lastProcessedDocumentChangeId=e.id}).next(function(){var t=[];return n.forEach(function(n){t.push(r.getEntry(e,n).next(function(t){var e=t||new qs(n,ao.forDeletedDoc());i=i.insert(n,e)}))}),xo.waitFor(t)}).next(function(){return i})},Ys.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Zs(t).delete(n)},Ys.prototype.synchronizeLastDocumentChangeId=function(t){var r=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,e,n){r._lastProcessedDocumentChangeId=t,n.done()})},Ys.prototype.newChangeBuffer=function(){return new Ys.RemoteDocumentChangeBuffer(this)},Ys.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Ys.prototype.getMetadata=function(t){return Js(t).get(Eu.key).next(function(t){return qr(!!t,"Missing document cache metadata"),t})},Ys.prototype.setMetadata=function(t,e){return Js(t).put(Eu.key,e)},Ys.RemoteDocumentChangeBuffer=(s(Xs,Gs=js),Xs.prototype.applyChanges=function(o){var a=this,s=[],u=0,c=ko();return this.changes.forEach(function(t,e){var n=a.documentSizes.get(t);if(qr(void 0!==n,"Cannot modify a document that wasn't read (for "+t+")"),e){var r=a.documentCache.serializer.toDbRemoteDocument(e),i=eu(r);u+=i-n,s.push(a.documentCache.addEntry(o,t,r))}else u-=n,s.push(a.documentCache.removeEntry(o,t));c=c.add(t)}),s.push(this.documentCache.updateMetadata(o,c,u)),xo.waitFor(s)},Xs.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},Xs.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},Xs),Ys);function Ys(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}function Xs(t){var e=Gs.call(this)||this;return e.documentCache=t,e.documentSizes=new Qs(function(t){return t.toString()}),e}function Js(t){return cc.getStore(t,Eu.store)}function $s(t){return cc.getStore(t,wu.store)}function Zs(t){return cc.getStore(t,Ou.store)}function tu(t){return t.path.toArray()}function eu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw xr("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var nu=(ru.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),xo.resolve()},ru.prototype.getCollectionParents=function(t,e){return xo.resolve(this.collectionParentIndex.getEntries(e))},ru);function ru(){this.collectionParentIndex=new iu}var iu=(ou.prototype.add=function(t){qr(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new go(Pi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},ou.prototype.getEntries=function(t){return(this.index[t]||new go(Pi.comparator)).toArray()},ou);function ou(){this.index={}}var au=8,su=(uu.prototype.createOrUpgrade=function(t,e,n,r){var i=this;qr(n<r&&0<=n&&r<=au,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&1<=r&&(function(t){t.createObjectStore(hu.store)}(t),function(t){t.createObjectStore(fu.store,{keyPath:fu.keyPath}),t.createObjectStore(du.store,{keyPath:du.keyPath,autoIncrement:!0}).createIndex(du.userMutationsIndex,du.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yu.store)}(t),_u(t),function(t){t.createObjectStore(wu.store)}(t));var o=xo.resolve();return n<3&&3<=r&&(0!==n&&(function(t){t.deleteObjectStore(Du.store),t.deleteObjectStore(Iu.store),t.deleteObjectStore(Au.store)}(t),_u(t)),o=o.next(function(){return function(t){var e=t.store(Au.store),n=new Au(0,0,ao.MIN.toTimestamp(),0);return e.put(Au.key,n)}(e)})),n<4&&4<=r&&(0!==n&&(o=o.next(function(){return function(r,i){return i.store(du.store).loadAll().next(function(t){r.deleteObjectStore(du.store),r.createObjectStore(du.store,{keyPath:du.keyPath,autoIncrement:!0}).createIndex(du.userMutationsIndex,du.userMutationsKeyPath,{unique:!0});var e=i.store(du.store),n=t.map(function(t){return e.put(t)});return xo.waitFor(n)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t),function(t){t.createObjectStore(Ou.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&5<=r&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&6<=r&&(o=o.next(function(){return function(t){t.createObjectStore(Eu.store)}(t),i.addDocumentGlobal(e)})),n<7&&7<=r&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),n<8&&8<=r&&(o=o.next(function(){return i.createCollectionParentIndex(t,e)})),o},uu.prototype.addDocumentGlobal=function(e){var n=0;return e.store(wu.store).iterate(function(t,e){n+=eu(e)}).next(function(){var t=new Eu(n);return e.store(Eu.store).put(Eu.key,t)})},uu.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(fu.store),e=r.store(du.store);return t.loadAll().next(function(t){return xo.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.loadAll(du.userMutationsIndex,t).next(function(t){return xo.forEach(t,function(t){qr(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.fromDbMutationBatch(t);return Uo(r,n.userId,e).next(function(){})})})})})},uu.prototype.ensureSequenceNumbers=function(t){var a=t.store(Du.store),e=t.store(wu.store);return fa(t).next(function(i){var o=[];return e.iterate(function(t,e){var n=new Pi(t),r=function(t){return[0,to(t)]}(n);o.push(a.get(r).next(function(t){return t?xo.resolve():function(t){return a.put(new Du(0,to(t),i))}(n)}))}).next(function(){return xo.waitFor(o)})})},uu.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.lastSegment(),n=t.popLast();return r.put({collectionId:e,parent:to(n)})}}t.createObjectStore(Ru.store,{keyPath:Ru.keyPath});var r=e.store(Ru.store),o=new iu;return e.store(wu.store).iterate({keysOnly:!0},function(t,e){var n=new Pi(t);return i(n.popLast())}).next(function(){return e.store(yu.store).iterate({keysOnly:!0},function(t,e){t[0];var n=t[1],r=(t[2],ro(n));return i(r.popLast())})})},uu);function uu(t){this.serializer=t}var cu=function(t,e){this.seconds=t,this.nanoseconds=e},hu=(lu.store="owner",lu.key="owner",lu);function lu(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var fu=(pu.store="mutationQueues",pu.keyPath="userId",pu);function pu(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var du=(mu.store="mutations",mu.keyPath="batchId",mu.userMutationsIndex="userMutationsIndex",mu.userMutationsKeyPath=["userId","batchId"],mu);function mu(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var yu=(gu.prefixForUser=function(t){return[t]},gu.prefixForPath=function(t,e){return[t,to(e)]},gu.key=function(t,e,n){return[t,to(e),n]},gu.store="documentMutations",gu.PLACEHOLDER=new gu,gu);function gu(){}var vu=function(t,e){this.path=t,this.readTime=e},bu=function(t,e){this.path=t,this.version=e},wu=(Su.store="remoteDocuments",Su);function Su(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}var Eu=(Tu.store="remoteDocumentGlobal",Tu.key="remoteDocumentGlobalKey",Tu);function Tu(t){this.byteSize=t}var Iu=(Cu.store="targets",Cu.keyPath="targetId",Cu.queryTargetsIndexName="queryTargetsIndex",Cu.queryTargetsKeyPath=["canonicalId","targetId"],Cu);function Cu(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}var Du=(Nu.store="targetDocuments",Nu.keyPath=["targetId","path"],Nu.documentTargetsIndex="documentTargetsIndex",Nu.documentTargetsKeyPath=["path","targetId"],Nu);function Nu(t,e,n){this.targetId=t,this.path=e,qr(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Au=(ku.key="targetGlobalKey",ku.store="targetGlobal",ku);function ku(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var Ru=(Mu.store="collectionParents",Mu.keyPath=["collectionId","parent"],Mu);function Mu(t,e){this.collectionId=t,this.parent=e}function _u(t){t.createObjectStore(Du.store,{keyPath:Du.keyPath}).createIndex(Du.documentTargetsIndex,Du.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Iu.store,{keyPath:Iu.keyPath}).createIndex(Iu.queryTargetsIndexName,Iu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Au.store)}var Ou=(Lu.store="remoteDocumentChanges",Lu.keyPath="id",Lu);function Lu(t){this.changes=t}var Pu=(xu.store="clientMetadata",xu.keyPath="clientId",xu);function xu(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}var qu,Fu,Vu=[fu.store,du.store,yu.store,wu.store,Iu.store,hu.store,Au.store,Du.store].concat([Pu.store,Ou.store]).concat([Eu.store]).concat([Ru.store]),Bu=(Uu.prototype.addToCollectionParentIndex=function(t,e){if(qr(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){qr(1<=e.length,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Qu(t).put({collectionId:n,parent:to(r)})}return xo.resolve()},Uu.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[bi(i),""],!1,!0);return Qu(t).loadAll(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(ro(r.parent))}return o})},Uu);function Uu(){this.collectionParentsCache=new iu}function Qu(t){return cc.getStore(t,Ru.store)}(Fu=qu=qu||{})[Fu.Listen=0]="Listen",Fu[Fu.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Fu[Fu.LimboResolution=2]="LimboResolution";var Ku=(ju.prototype.withSequenceNumber=function(t){return new ju(this.query,this.targetId,this.purpose,t,this.snapshotVersion,this.resumeToken)},ju.prototype.withResumeToken=function(t,e){return new ju(this.query,this.targetId,this.purpose,this.sequenceNumber,e,t)},ju.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},ju);function ju(t,e,n,r,i,o){void 0===i&&(i=ao.MIN),void 0===o&&(o=Br()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}var Wu=(Gu.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Ui.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new qs(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=Ui.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new Bs(e,n)):xr("Unexpected DbRemoteDocument")},Gu.prototype.toDbRemoteDocument=function(t){if(t instanceof Ls){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new wu(null,null,e,n)}if(t instanceof qs){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return n=t.hasCommittedMutations,new wu(null,new vu(r,i),null,n)}return t instanceof Bs?(r=t.key.path.toArray(),i=this.toDbTimestamp(t.version),new wu(new bu(r,i),null,null,!0)):xr("Unexpected MaybeDocumment")},Gu.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new cu(e.seconds,e.nanoseconds)},Gu.prototype.fromDbTimestamp=function(t){var e=new io(t.seconds,t.nanoseconds);return ao.fromTimestamp(e)},Gu.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new du(t,e.batchId,e.localWriteTime.toMillis(),r,i)},Gu.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=io.fromMillis(t.localWriteTimeMs);return new _o(t.batchId,i,n,r)},Gu.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(to(t.path))}),e},Gu.prototype.fromDbResourcePaths=function(t){for(var e=ko(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new Ui(ro(i)))}return e},Gu.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=function(t){return void 0!==t.documents}(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Ku(e,t.targetId,qu.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},Gu.prototype.toDbTarget=function(t){qr(qu.Listen===t.purpose,"Only queries with purpose "+qu.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),n=t.resumeToken instanceof Uint8Array?(qr("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken,new Iu(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},Gu);function Gu(t){this.remoteSerializer=t}function zu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=gi(n,i);return 0===a?gi(r,o):a}var Hu=(Yu.prototype.nextIndex=function(){return++this.previousIndex},Yu.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();zu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(Yu.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),Yu);function Yu(t){this.maxElements=t,this.buffer=new go(zu),this.previousIndex=0}var Xu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ju=($u.withCacheSize=function(t){return new $u(t,$u.DEFAULT_COLLECTION_PERCENTILE,$u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},$u.COLLECTION_DISABLED=-1,$u.MINIMUM_CACHE_SIZE_BYTES=1048576,$u.DEFAULT=new $u($u.DEFAULT_CACHE_SIZE_BYTES=41943040,$u.DEFAULT_COLLECTION_PERCENTILE=10,$u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),$u.DISABLED=new $u($u.COLLECTION_DISABLED,0,0),$u);function $u(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}var Zu=(tc.prototype.start=function(){qr(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ju.COLLECTION_DISABLED&&this.scheduleGC()},tc.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(tc.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),tc.prototype.scheduleGC=function(){var t=this;qr(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;Or("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Ki.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(lc)})},tc);function tc(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}var ec=(nc.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},nc.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return xo.resolve(ki.INVALID);var r=new Hu(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},nc.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},nc.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},nc.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===Ju.COLLECTION_DISABLED?(Or("LruGarbageCollector","Garbage collection skipped; disabled"),xo.resolve(Xu)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(Or("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Xu):r.runGarbageCollection(e,n)})},nc.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},nc.prototype.runGarbageCollection=function(e,n){var r,i,o,a,s,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(Or("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,a=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,s=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),Mr()<=Sr.DEBUG&&Or("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),xo.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},nc);function nc(t,e){this.delegate=t,this.params=e}var rc,ic="IndexedDbPersistence",oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ac="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",sc=(s(uc,rc=function(){}),uc);function uc(t,e){var n=rc.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}var cc=(hc.getStore=function(t,e){if(t instanceof sc)return Jo.getStore(t.simpleDbTransaction,e);throw xr("IndexedDbPersistence must use instances of IndexedDbTransaction")},hc.createIndexedDbPersistence=function(n){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:if(!hc.isAvailable())throw new Kr(Qr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new hc(n.allowTabSynchronization,n.persistenceKey,n.clientId,n.platform,n.lruParams,n.queue,n.serializer,n.sequenceNumberSyncer)).start()];case 1:return t.sent(),[2,e]}})})},hc.prototype.start=function(){var e=this;return qr(!this.started,"IndexedDbPersistence double-started!"),qr(null!==this.window,"Expected 'window' to be defined"),Jo.openOrCreate(this.dbName,au,new su(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[Au.store],function(t){return fa(t).next(function(t){e.listenSequence=new ki(t,e.sequenceNumberSyncer)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},hc.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",Vu,function(t){return e.remoteDocumentCache.start(t)})},hc.prototype.setPrimaryStateListener=function(n){var t=this;return this.primaryStateListener=function(e){return p(t,void 0,void 0,function(){return d(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},hc.prototype.setDatabaseDeletedListener=function(n){var t=this;this.simpleDb.setVersionChangeListener(function(e){return p(t,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return null!==e.newVersion?[3,2]:[4,n()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},hc.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return p(e,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},hc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var r=this;return this.simpleDb.runTransaction("readwrite",Vu,function(n){return pc(n).put(new Pu(r.clientId,Date.now(),r.networkEnabled,r.inForeground,r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(r.isPrimary)return r.verifyPrimaryLease(n).next(function(t){t||(r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}))})}).next(function(){return r.canActAsPrimary(n)}).next(function(t){var e=r.isPrimary;return r.isPrimary=t,e!==r.isPrimary&&r.queue.enqueueAndForget(function(){return r.primaryStateListener(r.isPrimary)}),e&&!r.isPrimary?r.releasePrimaryLeaseIfHeld(n):r.isPrimary?r.acquireOrExtendPrimaryLease(n):void 0})})},hc.prototype.verifyPrimaryLease=function(t){var e=this;return fc(t).get(hu.key).next(function(t){return xo.resolve(e.isLocalClient(t))})},hc.prototype.removeClientMetadata=function(t){return pc(t).delete(this.clientId)},hc.prototype.maybeGarbageCollectMultiClientState=function(){return p(this,void 0,void 0,function(){var r,i,o=this;return d(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),i=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(n){var e=hc.getStore(n,Pu.store);return e.loadAll().next(function(t){r=o.filterActiveClients(t,18e5),i=t.filter(function(t){return-1===r.indexOf(t)})}).next(function(){return xo.forEach(i,function(t){return e.delete(t.clientId)})}).next(function(){if(0<(r=r.filter(function(t){return t.clientId!==o.clientId})).length){var t=r.map(function(t){return t.lastProcessedDocumentChangeId||0}),e=Math.min.apply(Math,t);return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n,e)}})})]);case 1:t.sent(),i.forEach(function(t){o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(t.clientId))}),t.label=2;case 2:return[2]}})})},hc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Ki.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},hc.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},hc.prototype.canActAsPrimary=function(e){var i=this;return fc(e).get(hu.key).next(function(t){if(null!==t&&i.isWithinAge(t.leaseTimestampMs,5e3)&&!i.isClientZombied(t.ownerId)){if(i.isLocalClient(t)&&i.networkEnabled)return!0;if(!i.isLocalClient(t)){if(!t.allowTabSynchronization)throw new Kr(Qr.FAILED_PRECONDITION,ac);return!1}}return!(!i.networkEnabled||!i.inForeground)||pc(e).loadAll().next(function(t){return void 0===i.filterActiveClients(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&Or(ic,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},hc.prototype.shutdown=function(){return p(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[hu.store,Pu.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},hc.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},hc.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[Pu.store],function(t){return pc(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(t){return t.clientId})})})},hc.clearPersistence=function(n){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return hc.isAvailable()?(e=n+hc.MAIN_DATABASE,[4,Jo.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(hc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),hc.prototype.getMutationQueue=function(t){return qr(this.started,"Cannot initialize MutationQueue before persistence is started."),Fo.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},hc.prototype.getQueryCache=function(){return qr(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},hc.prototype.getRemoteDocumentCache=function(){return qr(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},hc.prototype.getIndexManager=function(){return qr(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},hc.prototype.runTransaction=function(n,t,r){var i=this;return Or(ic,"Starting transaction:",n),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",Vu,function(e){return"readwrite-primary"===t?i.verifyPrimaryLease(e).next(function(t){if(!t)throw Lr("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new Kr(Qr.FAILED_PRECONDITION,oc);return r(new sc(e,i.listenSequence.next()))}).next(function(t){return i.acquireOrExtendPrimaryLease(e).next(function(){return t})}):i.verifyAllowTabSynchronization(e).next(function(){return r(new sc(e,i.listenSequence.next()))})})},hc.prototype.verifyAllowTabSynchronization=function(t){var e=this;return fc(t).get(hu.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Kr(Qr.FAILED_PRECONDITION,ac)})},hc.prototype.acquireOrExtendPrimaryLease=function(t){var e=new hu(this.clientId,this.allowTabSynchronization,Date.now());return fc(t).put(hu.key,e)},hc.isAvailable=function(){return Jo.isAvailable()},hc.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},hc.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=fc(t);return n.get(hu.key).next(function(t){return e.isLocalClient(t)?(Or(ic,"Releasing primary lease."),n.delete(hu.key)):xo.resolve()})},hc.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Lr("Detected an update time that is in the future: "+t+" > "+n),1))},hc.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},hc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(qr(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},hc.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},hc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(qr("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},hc.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return Or(ic,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Lr(ic,"Failed to get zombied client id.",t),!1}},hc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){Lr("Failed to set zombie client id.",t)}},hc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},hc.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},hc.MAIN_DATABASE="main",hc);function hc(t,e,n,r,i,o,a,s){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new dc(this,i),this.dbName=e+hc.MAIN_DATABASE,this.serializer=new Wu(a),this.document=r.document,this.queryCache=new ua(this.referenceDelegate,this.serializer),this.indexManager=new Bu,this.remoteDocumentCache=new Hs(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Kr(Qr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function lc(e){return p(this,void 0,void 0,function(){return d(this,function(t){if(!function(t){return t.code===Qr.FAILED_PRECONDITION&&t.message===oc}(e))throw e;return Or(ic,"Unexpectedly lost primary lease"),[2]})})}function fc(t){return t.store(hu.store)}function pc(t){return t.store(Pu.store)}var dc=(mc.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(e){return n.next(function(t){return e+t})})},mc.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},mc.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},mc.prototype.forEachOrphanedDocumentSequenceNumber=function(t,n){return this.forEachOrphanedDocument(t,function(t,e){return n(e)})},mc.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},mc.prototype.addReference=function(t,e){return yc(t,e)},mc.prototype.removeReference=function(t,e){return yc(t,e)},mc.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},mc.prototype.removeMutationReference=function(t,e){return yc(t,e)},mc.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?xo.resolve(!0):function(e,n){var r=!1;return Wo(e).iterateSerial(function(t){return Bo(e,t,n).next(function(t){return t&&(r=!0),xo.resolve(!t)})}).next(function(){return r})}(t,e)},mc.prototype.removeOrphanedDocuments=function(r,i){var o=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.forEachOrphanedDocument(r,function(e,t){if(t<=i){var n=o.isPinned(r,e).next(function(t){if(!t)return u++,a.getEntry(r,e).next(function(){return a.removeEntry(e),pa(r).delete(function(t){return[0,to(t.path)]}(e))})});s.push(n)}}).next(function(){return xo.waitFor(s)}).next(function(){return a.apply(r)}).next(function(){return u})},mc.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(t,n)},mc.prototype.updateLimboDocument=function(t,e){return yc(t,e)},mc.prototype.forEachOrphanedDocument=function(t,o){var a,e=pa(t),s=ki.INVALID;return e.iterate({index:Du.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(s!==ki.INVALID&&o(new Ui(ro(a)),s),s=i,a=r):s=ki.INVALID}).next(function(){s!==ki.INVALID&&o(new Ui(ro(a)),s)})},mc.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},mc);function mc(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new ec(this,e)}function yc(t,e){return pa(t).put(function(t,e){return new Du(0,to(t.path),e)}(e,t.currentSequenceNumber))}var gc=(vc.prototype.getDocument=function(e,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.getDocumentInternal(e,n,t)})},vc.prototype.getDocumentInternal=function(t,r,i){return this.remoteDocumentCache.getEntry(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].applyToLocalView(r,t);return t})},vc.prototype.applyLocalMutationsToDocuments=function(t,e,i){var o=To();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].applyToLocalView(t,e);o=o.insert(t,e)}),o},vc.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},vc.prototype.getLocalViewOfDocuments=function(r,i){var o=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,i).next(function(t){var e=o.applyLocalMutationsToDocuments(r,i,t),n=Eo();return e.forEach(function(t,e){e=e||new qs(t,ao.forDeletedDoc()),n=n.insert(t,e)}),n})},vc.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},vc.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Ui(e)).next(function(t){var e=Co();return t instanceof Ls&&(e=e.insert(t.key,t)),e})},vc.prototype.getDocumentsMatchingCollectionGroupQuery=function(n,r){var i=this;qr(r.path.isEmpty(),"Currently we only support collection group queries at the root.");var o=r.collectionGroup,a=Co();return this.indexManager.getCollectionParents(n,o).next(function(t){return xo.forEach(t,function(t){var e=r.asCollectionQueryAtPath(t.child(o));return i.getDocumentsMatchingCollectionQuery(n,e).next(function(t){t.forEach(function(t,e){a=a.insert(t,e)})})}).next(function(){return a})})},vc.prototype.getDocumentsMatchingCollectionQuery=function(e,n){var h,l,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,n).next(function(t){return h=t,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return l=t,r.addMissingBaseDocuments(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key,u=h.get(s),c=a.applyToLocalView(u,u,r.localWriteTime);h=c instanceof Ls?h.insert(s,c):h.remove(s)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},vc.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=ko(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ka&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Ls&&(c=c.insert(t,e))}),c})},vc);function vc(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}var bc=(wc.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},wc.prototype.addReference=function(t,e){var n=new Sc(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},wc.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},wc.prototype.removeReference=function(t,e){this.removeRef(new Sc(t,e))},wc.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},wc.prototype.removeReferencesForId=function(t){var e=this,n=Ui.EMPTY,r=new Sc(n,t),i=new Sc(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},wc.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},wc.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},wc.prototype.referencesForId=function(t){var e=Ui.EMPTY,n=new Sc(e,t),r=new Sc(e,t+1),i=ko();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},wc.prototype.containsKey=function(t){var e=new Sc(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},wc);function wc(){this.refsByKey=new go(Sc.compareByKey),this.refsByTarget=new go(Sc.compareByTargetId)}var Sc=(Ec.compareByKey=function(t,e){return Ui.comparator(t.key,e.key)||gi(t.targetOrBatchId,e.targetOrBatchId)},Ec.compareByTargetId=function(t,e){return gi(t.targetOrBatchId,e.targetOrBatchId)||Ui.comparator(t.key,e.key)},Ec);function Ec(t,e){this.key=t,this.targetOrBatchId=e}var Tc="LocalStore",Ic=(Cc.prototype.handleUserChange=function(e){var y=this;return this.persistence.runTransaction("Handle user change","readonly",function(d){var m;return y.mutationQueue.getAllMutationBatches(d).next(function(t){return m=t,y.mutationQueue=y.persistence.getMutationQueue(e),y.localDocuments=new gc(y.remoteDocuments,y.mutationQueue,y.persistence.getIndexManager()),y.mutationQueue.getAllMutationBatches(d)}).next(function(t){for(var e=[],n=[],r=ko(),i=0,o=m;i<o.length;i++){var a=o[i];e.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++){var c=u[s];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){a=l[h],n.push(a.batchId);for(var f=0,p=a.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return y.localDocuments.getDocuments(d,r).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:n}})})})},Cc.prototype.localWrite=function(s){var u=this,c=io.now(),t=s.reduce(function(t,e){return t.add(e.key)},ko());return this.persistence.runTransaction("Locally write mutations","readwrite",function(a){return u.localDocuments.getDocuments(a,t).next(function(n){for(var t=[],e=0,r=s;e<r.length;e++){var i=r[e],o=i.extractBaseValue(n.get(i.key));null!=o&&t.push(new ka(i.key,o,o.fieldMask(),Sa.exists(!0)))}return u.mutationQueue.addMutationBatch(a,c,t,s).next(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})})})},Cc.prototype.lookupMutationDocuments=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.mutationQueue.lookupMutationKeys(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):xo.resolve(null)})})},Cc.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer();return i.mutationQueue.acknowledgeBatch(t,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.mutationQueue.performConsistencyCheck(t)}).next(function(){return i.localDocuments.getDocuments(t,e)})})},Cc.prototype.rejectBatch=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.mutationQueue.lookupMutationBatch(e,t).next(function(t){return qr(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)}).next(function(){return r.mutationQueue.performConsistencyCheck(e)}).next(function(){return r.localDocuments.getDocuments(e,n)})})},Cc.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},Cc.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},Cc.prototype.setLastStreamToken=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(t){return n.mutationQueue.setLastStreamToken(t,e)})},Cc.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},Cc.prototype.applyRemoteEvent=function(s){var u=this,c=this.remoteDocuments.newChangeBuffer(),h=s.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var a=[];Hr(s.targetChanges,function(t,e){var n=u.queryDataByTarget[t];if(n){a.push(u.queryCache.removeMatchingKeys(o,e.removedDocuments,t).next(function(){return u.queryCache.addMatchingKeys(o,e.addedDocuments,t)}));var r=e.resumeToken;if(0<r.length){var i=n.withResumeToken(r,h);u.queryDataByTarget[t]=i,Cc.shouldPersistQueryData(n,i,e)&&a.push(u.queryCache.updateQueryData(o,i))}}});var i=Eo(),n=ko();if(s.documentUpdates.forEach(function(t,e){n=n.add(t)}),a.push(c.getEntries(o,n).next(function(r){s.documentUpdates.forEach(function(t,e){var n=r.get(t);e instanceof qs&&e.version.isEqual(ao.MIN)?(c.removeEntry(t),i=i.insert(t,e)):null==n||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(ao.MIN.isEqual(s.snapshotVersion)&&Lr(Tc,"Cannot add a document when the remote version is zero"),c.addEntry(e),i=i.insert(t,e)):Or(Tc,"Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),s.resolvedLimboDocuments.has(t)&&a.push(u.persistence.referenceDelegate.updateLimboDocument(o,t))})})),!h.isEqual(ao.MIN)){var t=u.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return qr(0<=h.compareTo(t),"Watch stream reverted to previous snapshot?? "+h+" < "+t),u.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,h)});a.push(t)}return xo.waitFor(a).next(function(){return c.apply(o)}).next(function(){return u.localDocuments.getLocalViewOfDocuments(o,i)})})},Cc.shouldPersistQueryData=function(t,e,n){return qr(0<e.resumeToken.length,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},Cc.prototype.notifyLocalViewChanges=function(t){var n=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return xo.forEach(t,function(t){return n.localViewReferences.addReferences(t.addedKeys,t.targetId),n.localViewReferences.removeReferences(t.removedKeys,t.targetId),xo.forEach(t.removedKeys,function(t){return n.persistence.referenceDelegate.removeReference(e,t)})})})},Cc.prototype.nextMutationBatch=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)})},Cc.prototype.readDocument=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.localDocuments.getDocument(t,e)})},Cc.prototype.allocateQuery=function(r){var i=this;return this.persistence.runTransaction("Allocate query","readwrite",function(e){var n;return i.queryCache.getQueryData(e,r).next(function(t){return t?(n=t,xo.resolve()):i.queryCache.allocateTargetId(e).next(function(t){return n=new Ku(r,t,qu.Listen,e.currentSequenceNumber),i.queryCache.addQueryData(e,n)})}).next(function(){return qr(!i.queryDataByTarget[n.targetId],"Tried to allocate an already allocated query: "+r),i.queryDataByTarget[n.targetId]=n})})},Cc.prototype.releaseQuery=function(o,a){var s=this,t=a?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",t,function(i){return s.queryCache.getQueryData(i,o).next(function(t){qr(null!=t,"Tried to release nonexistent query: "+o);var e=t.targetId,n=s.queryDataByTarget[e],r=s.localViewReferences.removeReferencesForId(e);return delete s.queryDataByTarget[e],a?xo.resolve():xo.forEach(r,function(t){return s.persistence.referenceDelegate.removeReference(i,t)}).next(function(){return s.persistence.referenceDelegate.removeTarget(i,n)})})})},Cc.prototype.executeQuery=function(e){var n=this;return this.persistence.runTransaction("Execute query","readonly",function(t){return n.localDocuments.getDocumentsMatchingQuery(t,e)})},Cc.prototype.remoteDocumentKeys=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(t){return n.queryCache.getMatchingKeysForTargetId(t,e)})},Cc.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Cc.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},Cc.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},Cc.prototype.applyWriteToRemoteDocuments=function(t,i,o){var e=this,a=i.batch,n=a.keys(),s=xo.resolve();return n.forEach(function(r){s=s.next(function(){return o.getEntry(t,r)}).next(function(t){var e=t,n=i.docVersions.get(r);qr(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.compareTo(n)<0)&&((e=a.applyToRemoteDocument(r,e,i))?o.addEntry(e):qr(!t,"Mutation batch "+a+" applied to document "+t+" resulted in null"))})}),s.next(function(){return e.mutationQueue.removeMutationBatch(t,a)})},Cc.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.queryDataByTarget)})},Cc.prototype.getQueryForTarget=function(e){var n=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(t){return n.queryCache.getQueryDataForTarget(t,e).next(function(t){return t?t.query:null})})},Cc.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},Cc.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Cc);function Cc(t,e){this.persistence=t,this.localViewReferences=new bc,this.queryDataByTarget={},qr(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new gc(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}var Dc=(Nc.prototype.checkEmpty=function(t){return xo.resolve(0===this.mutationQueue.length)},Nc.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");qr(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return qr(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,xo.resolve()},Nc.prototype.getLastStreamToken=function(t){return xo.resolve(this.lastStreamToken)},Nc.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,xo.resolve()},Nc.prototype.addMutationBatch=function(t,e,n,r){qr(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&qr(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new _o(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Sc(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return xo.resolve(o)},Nc.prototype.lookupMutationBatch=function(t,e){return xo.resolve(this.findMutationBatch(e))},Nc.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return qr(null!=n,"Failed to find local mutation batch."),xo.resolve(n.keys())},Nc.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return xo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Nc.prototype.getHighestUnacknowledgedBatchId=function(){return xo.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Nc.prototype.getAllMutationBatches=function(t){return xo.resolve(this.mutationQueue.slice())},Nc.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,e=new Sc(n,0),i=new Sc(n,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([e,i],function(t){qr(n.isEqual(t.key),"Should only iterate over a single key's batches");var e=r.findMutationBatch(t.targetOrBatchId);qr(null!==e,"Batches in the index must exist in the main table"),o.push(e)}),xo.resolve(o)},Nc.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new go(gi);return e.forEach(function(e){var t=new Sc(e,0),n=new Sc(e,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([t,n],function(t){qr(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.targetOrBatchId)})}),xo.resolve(this.findMutationBatches(i))},Nc.prototype.getAllMutationBatchesAffectingQuery=function(t,e){qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;Ui.isDocumentKey(i)||(i=i.child(""));var o=new Sc(new Ui(i),0),a=new go(gi);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),xo.resolve(this.findMutationBatches(a))},Nc.prototype.findMutationBatches=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&r.push(e)}),r},Nc.prototype.removeMutationBatch=function(n,r){var i=this;qr(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var o=this.batchesByDocumentKey;return xo.forEach(r.mutations,function(t){var e=new Sc(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.removeMutationReference(n,t.key)}).next(function(){i.batchesByDocumentKey=o})},Nc.prototype.removeCachedMutationKeys=function(t){},Nc.prototype.containsKey=function(t,e){var n=new Sc(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return xo.resolve(e.isEqual(r&&r.key))},Nc.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&qr(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),xo.resolve()},Nc.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return qr(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},Nc.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},Nc.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return qr(n.batchId===t,"If found batch must match"),n},Nc);function Nc(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Br(),this.batchesByDocumentKey=new go(Sc.compareByKey)}var Ac=(kc.prototype.getTargetCount=function(t){return xo.resolve(this.targetCount)},kc.prototype.forEachTarget=function(t,n){return this.queries.forEach(function(t,e){return n(e)}),xo.resolve()},kc.prototype.getLastRemoteSnapshotVersion=function(t){return xo.resolve(this.lastRemoteSnapshotVersion)},kc.prototype.getHighestSequenceNumber=function(t){return xo.resolve(this.highestSequenceNumber)},kc.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,xo.resolve(e)},kc.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),xo.resolve()},kc.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},kc.prototype.addQueryData=function(t,e){return qr(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,xo.resolve()},kc.prototype.updateQueryData=function(t,e){return qr(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),xo.resolve()},kc.prototype.removeQueryData=function(t,e){return qr(0<this.targetCount,"Removing a target from an empty cache"),qr(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,xo.resolve()},kc.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.queries.forEach(function(t,e){e.sequenceNumber<=r&&!i[e.targetId]&&(o.queries.delete(t),s.push(o.removeMatchingKeysForTargetId(n,e.targetId)),a++)}),xo.waitFor(s).next(function(){return a})},kc.prototype.getQueryCount=function(t){return xo.resolve(this.targetCount)},kc.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return xo.resolve(n)},kc.prototype.getQueryDataForTarget=function(t,e){return xr("Not yet implemented.")},kc.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),xo.waitFor(i)},kc.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),xo.waitFor(i)},kc.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),xo.resolve()},kc.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return xo.resolve(n)},kc.prototype.containsKey=function(t,e){return xo.resolve(this.references.containsKey(e))},kc);function kc(t){this.persistence=t,this.queries=new Qs(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=ao.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new bc,this.targetCount=0,this.targetIdGenerator=Ho.forQueryCache()}var Rc,Mc=(_c.prototype.addEntry=function(t,e){var n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(e);return this.docs=this.docs.insert(n,{maybeDocument:e,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())},_c.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},_c.prototype.getEntry=function(t,e){var n=this.docs.get(e);return xo.resolve(n?n.maybeDocument:null)},_c.prototype.getEntries=function(t,e){var n=this,r=To();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),xo.resolve(r)},_c.prototype.getDocumentsMatchingQuery=function(t,e){qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Co(),r=new Ui(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!e.path.isPrefixOf(a.path))break;s instanceof Ls&&e.matches(s)&&(n=n.insert(s.key,s))}return xo.resolve(n)},_c.prototype.forEachDocumentKey=function(t,e){return xo.forEach(this.docs,function(t){return e(t)})},_c.prototype.getNewDocumentChanges=function(t){var r=this,i=Eo();return this.newDocumentChanges.forEach(function(t){var e=r.docs.get(t),n=e?e.maybeDocument:new qs(t,ao.forDeletedDoc());i=i.insert(t,n)}),this.newDocumentChanges=ko(),xo.resolve(i)},_c.prototype.newChangeBuffer=function(){return new _c.RemoteDocumentChangeBuffer(this)},_c.prototype.getSize=function(t){return xo.resolve(this.size)},_c.RemoteDocumentChangeBuffer=(s(Oc,Rc=js),Oc.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e?i.push(r.documentCache.addEntry(n,e)):r.documentCache.removeEntry(t)}),xo.waitFor(i)},Oc.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},Oc.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},Oc),_c);function _c(t,e){this.indexManager=t,this.sizer=e,this.docs=new uo(Ui.comparator),this.newDocumentChanges=ko(),this.size=0}function Oc(t){var e=Rc.call(this)||this;return e.documentCache=t,e}var Lc=(Pc.createLruPersistence=function(t,e,n){return new Pc(t,function(t){return new Vc(t,new Wu(e),n)})},Pc.createEagerPersistence=function(t){return new Pc(t,function(t){return new qc(t)})},Pc.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(Pc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Pc.prototype.getActiveClients=function(){return p(this,void 0,void 0,function(){return d(this,function(t){return[2,[this.clientId]]})})},Pc.prototype.setPrimaryStateListener=function(t){return t(!0)},Pc.prototype.setDatabaseDeletedListener=function(){},Pc.prototype.setNetworkEnabled=function(t){},Pc.prototype.getIndexManager=function(){return this.indexManager},Pc.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Dc(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},Pc.prototype.getQueryCache=function(){return this.queryCache},Pc.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},Pc.prototype.runTransaction=function(t,e,n){var r=this;Or("MemoryPersistence","Starting transaction:",t);var i=new xc(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},Pc.prototype.mutationQueuesContainKey=function(e,n){return xo.or(function(t){var n=[];return Yr(t,function(t,e){return n.push(e)}),n}(this.mutationQueues).map(function(t){return function(){return t.containsKey(e,n)}}))},Pc);function Pc(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new ki(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Ac(this);this.indexManager=new nu,this.remoteDocumentCache=new Mc(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}var xc=function(t){this.currentSequenceNumber=t},qc=(Object.defineProperty(Fc.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw xr("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),Fc.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Fc.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),xo.resolve()},Fc.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),xo.resolve()},Fc.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),xo.resolve()},Fc.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},Fc.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},Fc.prototype.onTransactionCommitted=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xo.forEach(this.orphanedDocuments,function(e){return n.isReferenced(t,e).next(function(t){t||r.removeEntry(e)})}).next(function(){return n._orphanedDocuments=null,r.apply(t)})},Fc.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},Fc.prototype.documentSize=function(t){return 0},Fc.prototype.isReferenced=function(t,e){var n=this;return xo.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return xo.resolve(n.inMemoryPins.containsKey(e))}])},Fc);function Fc(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}var Vc=(Bc.prototype.onTransactionStarted=function(){},Bc.prototype.onTransactionCommitted=function(t){return xo.resolve()},Bc.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},Bc.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},Bc.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},Bc.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return xo.forEach(this.orphanedSequenceNumbers,function(t,e){return i.isPinned(n,t,e).next(function(t){return t?xo.resolve():r(e)})})},Bc.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Bc.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},Bc.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=0,e=this.persistence.getRemoteDocumentCache(),o=e.newChangeBuffer();return e.forEachDocumentKey(t,function(e){return r.isPinned(t,e,n).next(function(t){t||(i++,o.removeEntry(e))})}).next(function(){return o.apply(t)}).next(function(){return i})},Bc.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),xo.resolve()},Bc.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(t,n)},Bc.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),xo.resolve()},Bc.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),xo.resolve()},Bc.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),xo.resolve()},Bc.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xr("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},Bc.prototype.isPinned=function(t,e,n){var r=this;return xo.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return xo.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return xo.resolve(void 0!==t&&n<t)}])},Bc.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},Bc);function Bc(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Qs(function(t){return to(t.path)}),this.garbageCollector=new ec(this,n)}var Uc=Number,Qc=Uc.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Kc=Uc.MAX_SAFE_INTEGER||Math.pow(2,53)-1,jc=Uc.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Wc(t){return null==t}function Gc(t){return jc(t)&&t<=Kc&&Qc<=t}var zc=(Hc.prototype.reset=function(){this.currentBaseMs=0},Hc.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Hc.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Or("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Hc.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Hc.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Hc);function Hc(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var Yc,Xc,Jc="PersistentStream";(Xc=Yc=Yc||{})[Xc.Initial=0]="Initial",Xc[Xc.Starting=1]="Starting",Xc[Xc.Open=2]="Open",Xc[Xc.Error=3]="Error",Xc[Xc.Backoff=4]="Backoff";var $c=(Zc.prototype.isStarted=function(){return this.state===Yc.Starting||this.state===Yc.Open||this.state===Yc.Backoff},Zc.prototype.isOpen=function(){return this.state===Yc.Open},Zc.prototype.start=function(){this.state!==Yc.Error?(qr(this.state===Yc.Initial,"Already started"),this.auth()):this.performBackoff()},Zc.prototype.stop=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Yc.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Zc.prototype.inhibitBackoff=function(){qr(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Yc.Initial,this.backoff.reset()},Zc.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},Zc.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},Zc.prototype.handleIdleCloseTimer=function(){return p(this,void 0,void 0,function(){return d(this,function(t){return this.isOpen()?[2,this.close(Yc.Initial)]:[2]})})},Zc.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Zc.prototype.close=function(e,n){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return qr(this.isStarted(),"Only started streams should be closed."),qr(e===Yc.Error||Wc(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Yc.Error?this.backoff.reset():n&&n.code===Qr.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===Qr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(n)];case 1:return t.sent(),[2]}})})},Zc.prototype.tearDown=function(){},Zc.prototype.auth=function(){var n=this;qr(this.state===Yc.Initial,"Must be in initial state to auth"),this.state=Yc.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),e=this.closeCount;this.credentialsProvider.getToken().then(function(t){n.closeCount===e&&n.startStream(t)},function(e){t(function(){var t=new Kr(Qr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.handleStreamClose(t)})})},Zc.prototype.startStream=function(t){var e=this;qr(this.state===Yc.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return qr(e.state===Yc.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Yc.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},Zc.prototype.performBackoff=function(){var t=this;qr(this.state===Yc.Error,"Should only perform backoff when in Error state"),this.state=Yc.Backoff,this.backoff.backoffAndRun(function(){return p(t,void 0,void 0,function(){return d(this,function(t){return qr(this.state===Yc.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Yc.Initial,this.start(),qr(this.isStarted(),"PersistentStream should have started"),[2]})})})},Zc.prototype.handleStreamClose=function(t){return qr(this.isStarted(),"Can't handle server close on non-started stream"),Or(Jc,"close with error: "+t),this.stream=null,this.close(Yc.Error,t)},Zc.prototype.getCloseGuardedDispatcher=function(e){var n=this;return function(t){n.queue.enqueueAndForget(function(){return n.closeCount===e?t():(Or(Jc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Zc);function Zc(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Yc.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new zc(t,e)}var th,eh=(s(nh,th=$c),nh.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},nh.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},nh.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},nh.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},nh);function nh(t,e,n,r,i){var o=th.call(this,t,Ki.ListenStreamConnectionBackoff,Ki.ListenStreamIdle,e,n,i)||this;return o.serializer=r,o}var rh,ih=(s(oh,rh=$c),Object.defineProperty(oh.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),oh.prototype.start=function(){this.handshakeComplete_=!1,rh.prototype.start.call(this)},oh.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},oh.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},oh.prototype.onMessage=function(t){if(qr(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return qr(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},oh.prototype.writeHandshake=function(){qr(this.isOpen(),"Writing handshake requires an opened stream"),qr(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},oh.prototype.writeMutations=function(t){var e=this;qr(this.isOpen(),"Writing mutations requires an opened stream"),qr(this.handshakeComplete_,"Handshake must be complete before writing mutations"),qr(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},oh);function oh(t,e,n,r,i){var o=rh.call(this,t,Ki.WriteStreamConnectionBackoff,Ki.WriteStreamIdle,e,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Br(),o}var ah=(sh.prototype.newPersistentWriteStream=function(t){return new ih(this.queue,this.connection,this.credentials,this.serializer,t)},sh.prototype.newPersistentWatchStream=function(t){return new eh(this.queue,this.connection,this.credentials,this.serializer,t)},sh.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},sh.prototype.lookup=function(e){var i=this,t={database:this.serializer.encodedDatabaseId,documents:e.map(function(t){return i.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",t).then(function(t){var n=Eo();t.forEach(function(t){var e=i.serializer.fromMaybeDocument(t);n=n.insert(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);qr(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},sh.prototype.invokeRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeRPC(e,n,t)}).catch(function(t){throw t.code===Qr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},sh.prototype.invokeStreamingRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeStreamingRPC(e,n,t)}).catch(function(t){throw t.code===Qr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},sh);function sh(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}var uh,ch,hh,lh,fh=(ph.prototype.lookup=function(r){return p(this,void 0,void 0,function(){var e,n=this;return d(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Kr(Qr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(r)];case 1:return(e=t.sent()).forEach(function(t){t instanceof qs||t instanceof Ls?n.recordVersion(t):xr("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},ph.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},ph.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},ph.prototype.delete=function(t){this.write([new Va(t,this.precondition(t))]),this.writtenDocs.add(t)},ph.prototype.commit=function(){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new Kr(Qr.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},ph.prototype.recordVersion=function(t){var e;if(t instanceof Ls)e=t.version;else{if(!(t instanceof qs))throw xr("Document in a transaction was a "+t.constructor.name);e=ao.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Kr(Qr.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},ph.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?Sa.updateTime(e):Sa.NONE},ph.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(this.writtenDocs.has(t)||!e)return Sa.exists(!0);if(e.isEqual(ao.forDeletedDoc()))throw new Kr(Qr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sa.updateTime(e)},ph.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},ph.prototype.ensureCommitNotCalled=function(){qr(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},ph);function ph(t){this.datastore=t,this.readVersions=No(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(ch=uh=uh||{})[ch.Unknown=0]="Unknown",ch[ch.Online=1]="Online",ch[ch.Offline=2]="Offline",(lh=hh=hh||{})[lh.RemoteStore=0]="RemoteStore",lh[lh.SharedClientState=1]="SharedClientState";var dh,mh,yh=(gh.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(uh.Unknown),qr(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Ki.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,qr(t.state===uh.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(uh.Offline),Promise.resolve()}))},gh.prototype.handleWatchStreamFailure=function(t){this.state===uh.Online?(this.setAndBroadcast(uh.Unknown),qr(0===this.watchStreamFailures,"watchStreamFailures must be 0"),qr(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(uh.Offline)))},gh.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===uh.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},gh.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},gh.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Lr(e),this.shouldWarnClientIsOffline=!1):Or("OnlineStateTracker",e)},gh.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},gh);function gh(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=uh.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function vh(t){switch(t){case Qr.OK:return xr("Treated status OK as error");case Qr.CANCELLED:case Qr.UNKNOWN:case Qr.DEADLINE_EXCEEDED:case Qr.RESOURCE_EXHAUSTED:case Qr.INTERNAL:case Qr.UNAVAILABLE:case Qr.UNAUTHENTICATED:return!1;case Qr.INVALID_ARGUMENT:case Qr.NOT_FOUND:case Qr.ALREADY_EXISTS:case Qr.PERMISSION_DENIED:case Qr.FAILED_PRECONDITION:case Qr.ABORTED:case Qr.OUT_OF_RANGE:case Qr.UNIMPLEMENTED:case Qr.DATA_LOSS:return!0;default:return xr("Unknown status code: "+t)}}function bh(t){if(void 0===t)return Lr("GRPC error has no .code"),Qr.UNKNOWN;switch(t){case dh.OK:return Qr.OK;case dh.CANCELLED:return Qr.CANCELLED;case dh.UNKNOWN:return Qr.UNKNOWN;case dh.DEADLINE_EXCEEDED:return Qr.DEADLINE_EXCEEDED;case dh.RESOURCE_EXHAUSTED:return Qr.RESOURCE_EXHAUSTED;case dh.INTERNAL:return Qr.INTERNAL;case dh.UNAVAILABLE:return Qr.UNAVAILABLE;case dh.UNAUTHENTICATED:return Qr.UNAUTHENTICATED;case dh.INVALID_ARGUMENT:return Qr.INVALID_ARGUMENT;case dh.NOT_FOUND:return Qr.NOT_FOUND;case dh.ALREADY_EXISTS:return Qr.ALREADY_EXISTS;case dh.PERMISSION_DENIED:return Qr.PERMISSION_DENIED;case dh.FAILED_PRECONDITION:return Qr.FAILED_PRECONDITION;case dh.ABORTED:return Qr.ABORTED;case dh.OUT_OF_RANGE:return Qr.OUT_OF_RANGE;case dh.UNIMPLEMENTED:return Qr.UNIMPLEMENTED;case dh.DATA_LOSS:return Qr.DATA_LOSS;default:return xr("Unknown status code: "+t)}}(mh=dh=dh||{})[mh.OK=0]="OK",mh[mh.CANCELLED=1]="CANCELLED",mh[mh.UNKNOWN=2]="UNKNOWN",mh[mh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mh[mh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mh[mh.NOT_FOUND=5]="NOT_FOUND",mh[mh.ALREADY_EXISTS=6]="ALREADY_EXISTS",mh[mh.PERMISSION_DENIED=7]="PERMISSION_DENIED",mh[mh.UNAUTHENTICATED=16]="UNAUTHENTICATED",mh[mh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mh[mh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mh[mh.ABORTED=10]="ABORTED",mh[mh.OUT_OF_RANGE=11]="OUT_OF_RANGE",mh[mh.UNIMPLEMENTED=12]="UNIMPLEMENTED",mh[mh.INTERNAL=13]="INTERNAL",mh[mh.UNAVAILABLE=14]="UNAVAILABLE",mh[mh.DATA_LOSS=15]="DATA_LOSS";var wh,Sh,Eh,Th,Ih=(Ch.emptySet=function(t){return new Ch(t.comparator)},Ch.prototype.has=function(t){return null!=this.keyedMap.get(t)},Ch.prototype.get=function(t){return this.keyedMap.get(t)},Ch.prototype.first=function(){return this.sortedSet.minKey()},Ch.prototype.last=function(){return this.sortedSet.maxKey()},Ch.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ch.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(Ch.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Ch.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},Ch.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},Ch.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},Ch.prototype.isEqual=function(t){if(!(t instanceof Ch))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ch.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Ch.prototype.copy=function(t,e){var n=new Ch;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},Ch);function Ch(n){this.comparator=n?function(t,e){return n(t,e)||Ui.comparator(t.key,e.key)}:function(t,e){return Ui.comparator(t.key,e.key)},this.keyedMap=Co(),this.sortedSet=new uo(this.comparator)}(Sh=wh=wh||{})[Sh.Added=0]="Added",Sh[Sh.Removed=1]="Removed",Sh[Sh.Modified=2]="Modified",Sh[Sh.Metadata=3]="Metadata",(Th=Eh=Eh||{})[Th.Local=0]="Local",Th[Th.Synced=1]="Synced";var Dh=(Nh.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==wh.Added&&n.type===wh.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===wh.Metadata&&n.type!==wh.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===wh.Modified&&n.type===wh.Modified?this.changeMap=this.changeMap.insert(e,{type:wh.Modified,doc:t.doc}):t.type===wh.Modified&&n.type===wh.Added?this.changeMap=this.changeMap.insert(e,{type:wh.Added,doc:t.doc}):t.type===wh.Removed&&n.type===wh.Added?this.changeMap=this.changeMap.remove(e):t.type===wh.Removed&&n.type===wh.Modified?this.changeMap=this.changeMap.insert(e,{type:wh.Removed,doc:n.doc}):t.type===wh.Added&&n.type===wh.Removed?this.changeMap=this.changeMap.insert(e,{type:wh.Modified,doc:t.doc}):xr("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},Nh.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(t,e){n.push(e)}),n},Nh);function Nh(){this.changeMap=new uo(Ui.comparator)}var Ah=(kh.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:wh.Added,doc:t})}),new kh(t,e,Ih.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(kh.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),kh.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},kh);function kh(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var Rh=(Mh.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n,r=((n={})[t]=_h.createSynthesizedTargetChangeForCurrentChange(t,e),n);return new Mh(ao.MIN,r,Mo(),Eo(),ko())},Mh);function Mh(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var _h=(Oh.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new Oh(Br(),e,ko(),ko(),ko())},Oh);function Oh(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var Lh,Ph,xh=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},qh=function(t,e){this.targetId=t,this.existenceFilter=e};(Ph=Lh=Lh||{})[Ph.NoChange=0]="NoChange",Ph[Ph.Added=1]="Added",Ph[Ph.Removed=2]="Removed",Ph[Ph.Current=3]="Current",Ph[Ph.Reset=4]="Reset";var Fh=function(t,e,n,r){void 0===n&&(n=Br()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Vh=(Object.defineProperty(Bh.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Bh.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Bh.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Bh.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Bh.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},Bh.prototype.toTargetChange=function(){var n=ko(),r=ko(),i=ko();return this.documentChanges.forEach(function(t,e){switch(e){case wh.Added:n=n.add(t);break;case wh.Modified:r=r.add(t);break;case wh.Removed:i=i.add(t);break;default:xr("Encountered invalid change type: "+e)}}),new _h(this._resumeToken,this._current,n,r,i)},Bh.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=jh()},Bh.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},Bh.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},Bh.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Bh.prototype.recordTargetResponse=function(){this.pendingResponses-=1},Bh.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Bh);function Bh(){this.pendingResponses=0,this.documentChanges=jh(),this._resumeToken=Br(),this._current=!1,this._hasPendingChanges=!0}var Uh=(Qh.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ls?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof qs&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,t.key,t.newDoc)},Qh.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.ensureTargetState(t);switch(n.state){case Lh.NoChange:r.isActiveTarget(t)&&e.updateResumeToken(n.resumeToken);break;case Lh.Added:e.recordTargetResponse(),e.isPending||e.clearPendingChanges(),e.updateResumeToken(n.resumeToken);break;case Lh.Removed:e.recordTargetResponse(),e.isPending||r.removeTarget(t),qr(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case Lh.Current:r.isActiveTarget(t)&&(e.markCurrent(),e.updateResumeToken(n.resumeToken));break;case Lh.Reset:r.isActiveTarget(t)&&(r.resetTarget(t),e.updateResumeToken(n.resumeToken));break;default:xr("Unknown target watch change state: "+n.state)}})},Qh.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):Hr(this.targetStates,e)},Qh.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Ui(i.path);this.removeDocumentFromTarget(e,o,new qs(o,ao.forDeletedDoc()))}else qr(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},Qh.prototype.createRemoteEvent=function(i){var o=this,a={};Hr(this.targetStates,function(t,e){var n=o.queryDataForActiveTarget(t);if(n){if(e.current&&n.query.isDocumentQuery()){var r=new Ui(n.query.path);null!==o.pendingDocumentUpdates.get(r)||o.targetContainsDocument(t,r)||o.removeDocumentFromTarget(t,r,new qs(r,i))}e.hasPendingChanges&&(a[t]=e.toTargetChange(),e.clearPendingChanges())}});var r=ko();this.pendingDocumentTargetMapping.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){var e=o.queryDataForActiveTarget(t);return!e||e.purpose===qu.LimboResolution||(n=!1)}),n&&(r=r.add(t))});var t=new Rh(i,a,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Eo(),this.pendingDocumentTargetMapping=Kh(),this.pendingTargetResets=new go(gi),t},Qh.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?wh.Modified:wh.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},Qh.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,wh.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},Qh.prototype.removeTarget=function(t){delete this.targetStates[t]},Qh.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},Qh.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},Qh.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Vh),this.targetStates[t]},Qh.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new go(gi),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},Qh.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||Or("WatchChangeAggregator","Detected inactive target",t),e},Qh.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},Qh.prototype.resetTarget=function(e){var n=this;qr(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Vh,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(t){n.removeDocumentFromTarget(e,t,null)})},Qh.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},Qh);function Qh(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Eo(),this.pendingDocumentTargetMapping=Kh(),this.pendingTargetResets=new go(gi)}function Kh(){return new uo(Ui.comparator)}function jh(){return new uo(Ui.comparator)}var Wh="RemoteStore",Gh=(zh.prototype.start=function(){return this.enableNetwork()},zh.prototype.enableNetwork=function(){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(uh.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},zh.prototype.disableNetwork=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(uh.Offline),[2]}})})},zh.prototype.disableNetworkInternal=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(Or(Wh,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},zh.prototype.shutdown=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return Or(Wh,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(uh.Unknown),[2]}})})},zh.prototype.listen=function(t){qr(!Gr(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},zh.prototype.unlisten=function(t){qr(Gr(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),Xr(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(uh.Unknown))},zh.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},zh.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},zh.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},zh.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},zh.prototype.startWatchStream=function(){qr(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Uh(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},zh.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Xr(this.listenTargets)},zh.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},zh.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},zh.prototype.onWatchStreamOpen=function(){return p(this,void 0,void 0,function(){var n=this;return d(this,function(t){return Hr(this.listenTargets,function(t,e){n.sendWatchRequest(e)}),[2]})})},zh.prototype.onWatchStreamClose=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){return void 0===e&&qr(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(uh.Unknown),[2]})})},zh.prototype.onWatchStreamChange=function(n,r){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.onlineStateTracker.set(uh.Online),n instanceof Fh&&n.state===Lh.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof xh?this.watchChangeAggregator.handleDocumentChange(n):n instanceof qh?this.watchChangeAggregator.handleExistenceFilter(n):(qr(n instanceof Fh,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(ao.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return e=t.sent(),0<=r.compareTo(e)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},zh.prototype.raiseWatchSnapshot=function(r){var i=this;qr(!r.isEqual(ao.MIN),"Can't raise event for unknown SnapshotVersion");var t=this.watchChangeAggregator.createRemoteEvent(r);return Hr(t.targetChanges,function(t,e){if(0<e.resumeToken.length){var n=i.listenTargets[t];n&&(i.listenTargets[t]=n.withResumeToken(e.resumeToken,r))}}),t.targetMismatches.forEach(function(t){var e=i.listenTargets[t];if(e){i.listenTargets[t]=e.withResumeToken(Br(),e.snapshotVersion),i.sendUnwatchRequest(t);var n=new Ku(e.query,t,qu.ExistenceFilterMismatch,e.sequenceNumber);i.sendWatchRequest(n)}}),this.syncEngine.applyRemoteEvent(t)},zh.prototype.handleTargetError=function(t){var n=this;qr(!!t.cause,"Handling target error without a cause");var r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return p(n,void 0,void 0,function(){return d(this,function(t){return Gr(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,r)]):[2]})})})}),i},zh.prototype.fillWritePipeline=function(){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},zh.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},zh.prototype.outstandingWrites=function(){return this.writePipeline.length},zh.prototype.addToWritePipeline=function(t){qr(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},zh.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},zh.prototype.startWriteStream=function(){qr(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},zh.prototype.onWriteStreamOpen=function(){return p(this,void 0,void 0,function(){return d(this,function(t){return this.writeStream.writeHandshake(),[2]})})},zh.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,e=r.writePipeline;t<e.length;t++){var n=e[t];r.writeStream.writeMutations(n.mutations)}}).catch(lc)},zh.prototype.onMutationResult=function(t,e){var n=this;qr(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Lo.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},zh.prototype.onWriteStreamClose=function(n){return p(this,void 0,void 0,function(){var e=this;return d(this,function(t){return void 0===n&&qr(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},zh.prototype.handleHandshakeError=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){return vh(e.code)?(Or(Wh,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Br(),[2,this.localStore.setLastStreamToken(Br()).catch(lc)]):[2]})})},zh.prototype.handleWriteError=function(r){return p(this,void 0,void 0,function(){var e,n=this;return d(this,function(t){return function(t){return vh(t)&&t!==Qr.ABORTED}(r.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,r).then(function(){return n.fillWritePipeline()})]):[2]})})},zh.prototype.createTransaction=function(){return new fh(this.datastore)},zh.prototype.restartNetwork=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(uh.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},zh.prototype.handleCredentialChange=function(){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(Or(Wh,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},zh.prototype.applyPrimaryState=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(uh.Unknown),t.label=4;case 4:return[2]}})})},zh);function zh(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return p(o,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(Or(Wh,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new yh(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var Hh=(Object.defineProperty(Yh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Yh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Yh.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},Yh.prototype._compareTo=function(t){return gi(this._lat,t._lat)||gi(this._long,t._long)},Yh);function Yh(t,e){if($r("GeoPoint",arguments,2),ei("GeoPoint","number",1,t),ei("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Kr(Qr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Kr(Qr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}var Xh=(Jh.atPath=function(t){return new Jh(t)},Object.defineProperty(Jh.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Cl]:this.memoizedOrderBy=[new Tl(t),Cl];else{qr(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:bl.ASCENDING;this.memoizedOrderBy.push(a===bl.ASCENDING?Cl:Dl)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Jh.prototype.addFilter=function(t){qr(null==this.getInequalityFilterField()||!(t instanceof nl)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),qr(!this.isDocumentQuery(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new Jh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),e,this.limit,this.startAt,this.endAt)},Jh.prototype.addOrderBy=function(t){qr(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.explicitOrderBy.concat([t]);return new Jh(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.startAt,this.endAt)},Jh.prototype.withLimit=function(t){return new Jh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},Jh.prototype.withStartAt=function(t){return new Jh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},Jh.prototype.withEndAt=function(t){return new Jh(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},Jh.prototype.asCollectionQueryAtPath=function(t){return new Jh(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},Jh.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";Wc(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},Jh.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),Wc(this.limit)||(t+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},Jh.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},Jh.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return qr(n,"orderBy used that doesn't compare on key field"),0},Jh.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},Jh.prototype.hasLimit=function(){return!Wc(this.limit)},Jh.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Jh.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof nl&&n.isInequality())return n.field}return null},Jh.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof nl&&0<=t.indexOf(r.op))return r.op}return null},Jh.prototype.isDocumentQuery=function(){return Ui.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Jh.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Jh.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):Ui.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},Jh.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},Jh.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Jh.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},Jh.prototype.assertValidBound=function(t){qr(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Jh);function Jh(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}function $h(){}var Zh=(tl.fromString=function(t){switch(t){case"<":return tl.LESS_THAN;case"<=":return tl.LESS_THAN_OR_EQUAL;case"==":return tl.EQUAL;case">=":return tl.GREATER_THAN_OR_EQUAL;case">":return tl.GREATER_THAN;case"array-contains":return tl.ARRAY_CONTAINS;case"in":return tl.IN;case"array-contains-any":return tl.ARRAY_CONTAINS_ANY;default:return xr("Unknown FieldFilter operator: "+t)}},tl.prototype.toString=function(){return this.name},tl.prototype.isEqual=function(t){return this.name===t.name},tl.LESS_THAN=new tl("<"),tl.LESS_THAN_OR_EQUAL=new tl("<="),tl.EQUAL=new tl("=="),tl.GREATER_THAN=new tl(">"),tl.GREATER_THAN_OR_EQUAL=new tl(">="),tl.ARRAY_CONTAINS=new tl("array-contains"),tl.IN=new tl("in"),tl.ARRAY_CONTAINS_ANY=new tl("array-contains-any"),tl);function tl(t){this.name=t}var el,nl=(s(rl,el=$h),rl.create=function(t,e,n){if(t.isKeyField())return e===Zh.IN?(qr(n instanceof ks,"Comparing on key with IN, but filter value not an ArrayValue"),qr(n.internalValue.every(function(t){return t instanceof ws}),"Comparing on key with IN, but an array value was not a RefValue"),new ul(t,n)):(qr(n instanceof ws,"Comparing on key, but filter value not a RefValue"),qr(e!==Zh.ARRAY_CONTAINS&&e!==Zh.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new ol(t,e,n));if(n.isEqual(Ga.INSTANCE)){if(e!==Zh.EQUAL)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new rl(t,e,n)}if(n.isEqual(os.NAN)){if(e!==Zh.EQUAL)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new rl(t,e,n)}return e===Zh.ARRAY_CONTAINS?new ll(t,n):e===Zh.IN?(qr(n instanceof ks,"IN filter has invalid value: "+n.toString()),new dl(t,n)):e===Zh.ARRAY_CONTAINS_ANY?(qr(n instanceof ks,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new gl(t,n)):new rl(t,e,n)},rl.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},rl.prototype.matchesComparison=function(t){switch(this.op){case Zh.LESS_THAN:return t<0;case Zh.LESS_THAN_OR_EQUAL:return t<=0;case Zh.EQUAL:return 0===t;case Zh.GREATER_THAN:return 0<t;case Zh.GREATER_THAN_OR_EQUAL:return 0<=t;default:return xr("Unknown FieldFilter operator: "+this.op)}},rl.prototype.isInequality=function(){return 0<=[Zh.LESS_THAN,Zh.LESS_THAN_OR_EQUAL,Zh.GREATER_THAN,Zh.GREATER_THAN_OR_EQUAL].indexOf(this.op)},rl.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},rl.prototype.isEqual=function(t){return t instanceof rl&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},rl.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},rl);function rl(t,e,n){var r=el.call(this)||this;return r.field=t,r.op=e,r.value=n,r}var il,ol=(s(al,il=nl),al.prototype.matches=function(t){var e=this.value,n=Ui.comparator(t.key,e.key);return this.matchesComparison(n)},al);function al(){return null!==il&&il.apply(this,arguments)||this}var sl,ul=(s(cl,sl=nl),cl.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},cl);function cl(t,e){var n=sl.call(this,t,Zh.IN,e)||this;return n.value=e,n}var hl,ll=(s(fl,hl=nl),fl.prototype.matches=function(t){var e=t.field(this.field);return e instanceof ks&&e.contains(this.value)},fl);function fl(t,e){return hl.call(this,t,Zh.ARRAY_CONTAINS,e)||this}var pl,dl=(s(ml,pl=nl),ml.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},ml);function ml(t,e){var n=pl.call(this,t,Zh.IN,e)||this;return n.value=e,n}var yl,gl=(s(vl,yl=nl),vl.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof ks&&n.internalValue.some(function(t){return e.value.contains(t)})},vl);function vl(t,e){var n=yl.call(this,t,Zh.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}var bl=(wl.prototype.toString=function(){return this.name},wl.ASCENDING=new wl("asc"),wl.DESCENDING=new wl("desc"),wl);function wl(t){this.name=t}var Sl=(El.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},El.prototype.sortsBeforeDocument=function(t,e){qr(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())qr(o instanceof ws,"Bound has a non-key value where the key path is being used."),n=Ui.comparator(o.key,e.key);else{var a=e.field(i.field);qr(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===bl.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},El.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},El);function El(t,e){this.position=t,this.before=e}var Tl=(Il.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ls.compareByKey(t,e):Ls.compareByField(this.field,t,e);switch(this.dir){case bl.ASCENDING:return n;case bl.DESCENDING:return-1*n;default:return xr("Unknown direction: "+this.dir)}},Il.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Il.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Il.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Il);function Il(t,e){this.field=t,void 0===e&&(e=bl.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}var Cl=new Tl(Vi.keyField(),bl.ASCENDING),Dl=new Tl(Vi.keyField(),bl.DESCENDING),Nl=(Al.prototype.applyToLocalView=function(t,e){return new ds(e,t)},Al.prototype.applyToRemoteDocument=function(t,e){return e},Al.prototype.computeBaseValue=function(t){return null},Al.prototype.isEqual=function(t){return t instanceof Al},Al.instance=new Al,Al);function Al(){}var kl=(Rl.prototype.applyToLocalView=function(t,e){return this.apply(t)},Rl.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},Rl.prototype.apply=function(t){for(var n=Pl(t),e=function(e){n.find(function(t){return t.isEqual(e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new ks(n)},Rl.prototype.computeBaseValue=function(t){return null},Rl.prototype.isEqual=function(t){return t instanceof Rl&&vi(t.elements,this.elements)},Rl);function Rl(t){this.elements=t}var Ml=(_l.prototype.applyToLocalView=function(t,e){return this.apply(t)},_l.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},_l.prototype.apply=function(t){for(var n=Pl(t),e=function(e){n=n.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new ks(n)},_l.prototype.computeBaseValue=function(t){return null},_l.prototype.isEqual=function(t){return t instanceof _l&&vi(t.elements,this.elements)},_l);function _l(t){this.elements=t}var Ol=(Ll.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof ns&&this.operand instanceof ns){var r=n.internalValue+this.operand.internalValue;return new ns(r)}return r=n.internalValue+this.operand.internalValue,new os(r)},Ll.prototype.applyToRemoteDocument=function(t,e){return qr(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},Ll.prototype.computeBaseValue=function(t){return t instanceof $a?t:new ns(0)},Ll.prototype.isEqual=function(t){return t instanceof Ll&&this.operand.isEqual(t.operand)},Ll);function Ll(t){this.operand=t}function Pl(t){return t instanceof ks?t.internalValue.slice():[]}var xl=(ql.prototype.isEqual=function(t){return t&&t.count===this.count},ql);function ql(t){this.count=t}var Fl,Vl,Bl=((Fl={})[bl.ASCENDING.name]="ASCENDING",Fl[bl.DESCENDING.name]="DESCENDING",Fl),Ul=((Vl={})[Zh.LESS_THAN.name]="LESS_THAN",Vl[Zh.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Vl[Zh.GREATER_THAN.name]="GREATER_THAN",Vl[Zh.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Vl[Zh.EQUAL.name]="EQUAL",Vl[Zh.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Vl[Zh.IN.name]="IN",Vl[Zh.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Vl),Ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kl(t,e){qr(!Wc(t),e+" is missing")}function jl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):xr("can't parse "+t)}var Wl=(Gl.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},Gl.prototype.unsafeCastProtoByteString=function(t){return t},Gl.prototype.fromRpcStatus=function(t){var e=void 0===t.code?Qr.UNKNOWN:bh(t.code);return new Kr(e,t.message||"")},Gl.prototype.toInt32Value=function(t){return Wc(t)?void 0:{value:t}},Gl.prototype.fromInt32Value=function(t){var e;return Wc(e="object"==typeof t?t.value:t)?null:e},Gl.prototype.toTimestamp=function(t){return{seconds:""+t.seconds,nanos:t.nanoseconds}},Gl.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);qr(!!t,"Cannot deserialize null or undefined timestamp.");var e=jl(t.seconds||"0"),n=t.nanos||0;return new io(e,n)},Gl.prototype.fromIso8601String=function(t){var e=0,n=Ql.exec(t);if(qr(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new io(o,e)},Gl.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},Gl.prototype.fromBlob=function(t){return"string"==typeof t?(qr(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ei.fromBase64String(t)):(qr(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ei.fromUint8Array(t))},Gl.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},Gl.prototype.fromVersion=function(t){return qr(!!t,"Trying to deserialize version that isn't set"),ao.fromTimestamp(this.fromTimestamp(t))},Gl.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},Gl.prototype.fromResourceName=function(t){var e=Pi.fromString(t);return qr(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},Gl.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},Gl.prototype.fromName=function(t){var e=this.fromResourceName(t);return qr(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),qr(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Ui(this.extractLocalPathFromResourceName(e))},Gl.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},Gl.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Pi.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(Gl.prototype,"encodedDatabaseId",{get:function(){return new Pi(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),Gl.prototype.fullyQualifiedPrefixPath=function(t){return new Pi(["projects",t.projectId,"databases",t.database])},Gl.prototype.extractLocalPathFromResourceName=function(t){return qr(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},Gl.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},Gl.prototype.toValue=function(t){if(t instanceof Ga)return{nullValue:"NULL_VALUE"};if(t instanceof Ya)return{booleanValue:t.value()};if(t instanceof ns)return{integerValue:""+t.value()};if(t instanceof os){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof us?{stringValue:t.value()}:t instanceof Ds?{mapValue:this.toMapValue(t)}:t instanceof ks?{arrayValue:this.toArrayValue(t)}:t instanceof ls?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Ts?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof gs?{bytesValue:this.toBytes(t.value())}:t instanceof ws?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:xr("Unknown FieldValue "+JSON.stringify(t))},Gl.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Ga.INSTANCE;if("booleanValue"in t)return Ya.of(t.booleanValue);if("integerValue"in t)return new ns(jl(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return os.NAN;if("Infinity"===t.doubleValue)return os.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return os.NEGATIVE_INFINITY}return new os(t.doubleValue)}if("stringValue"in t)return new us(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){Kl(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new ks(n.map(function(t){return e.fromValue(t)}))}if("timestampValue"in t)return Kl(t.timestampValue,"timestampValue"),new ls(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){Kl(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Ts(new Hh(r,i))}if("bytesValue"in t){Kl(t.bytesValue,"bytesValue");var o=this.fromBlob(t.bytesValue);return new gs(o)}if("referenceValue"in t){Kl(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),s=new Ni(a.get(1),a.get(3)),u=new Ui(this.extractLocalPathFromResourceName(a));return new ws(s,u)}return xr("Unknown Value proto "+JSON.stringify(t))},Gl.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},Gl.prototype.toDocument=function(t){return qr(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},Gl.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new Ls(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.fromValue(t)})},Gl.prototype.toFields=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.toValue(e)}),r},Gl.prototype.fromFields=function(t){var n=this,e=t,r=Ds.EMPTY;return Yr(e,function(t,e){r=r.set(new Vi([t]),n.fromValue(e))}),r},Gl.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},Gl.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},Gl.prototype.fromFound=function(t){var e=this;qr(!!t.found,"Tried to deserialize a found document from a missing document."),Kl(t.found.name,"doc.found.name"),Kl(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new Ls(n,r,{},void 0,t.found,function(t){return e.fromValue(t)})},Gl.prototype.fromMissing=function(t){qr(!!t.missing,"Tried to deserialize a missing document from a found document."),qr(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new qs(e,n)},Gl.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):xr("invalid batch get response: "+JSON.stringify(t))},Gl.prototype.toWatchTargetChangeState=function(t){switch(t){case Lh.Added:return"ADD";case Lh.Current:return"CURRENT";case Lh.NoChange:return"NO_CHANGE";case Lh.Removed:return"REMOVE";case Lh.Reset:return"RESET";default:return xr("Unknown WatchTargetChangeState: "+t)}},Gl.prototype.toTestWatchChange=function(t){if(t instanceof qh)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof xh){if(t.newDoc instanceof Ls){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof qs)return e=t.newDoc,{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Fh){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return dh.OK;switch(t){case Qr.OK:return dh.OK;case Qr.CANCELLED:return dh.CANCELLED;case Qr.UNKNOWN:return dh.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return dh.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return dh.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return dh.INTERNAL;case Qr.UNAVAILABLE:return dh.UNAVAILABLE;case Qr.UNAUTHENTICATED:return dh.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return dh.INVALID_ARGUMENT;case Qr.NOT_FOUND:return dh.NOT_FOUND;case Qr.ALREADY_EXISTS:return dh.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return dh.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return dh.FAILED_PRECONDITION;case Qr.ABORTED:return dh.ABORTED;case Qr.OUT_OF_RANGE:return dh.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return dh.UNIMPLEMENTED;case Qr.DATA_LOSS:return dh.DATA_LOSS;default:return xr("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return xr("Unrecognized watch change: "+JSON.stringify(t))},Gl.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){Kl(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Fh(r,i,o,s||null)}else if("documentChange"in t){Kl(t.documentChange,"documentChange"),Kl(t.documentChange.document,"documentChange.name"),Kl(t.documentChange.document.name,"documentChange.document.name"),Kl(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),l=new Ls(c,h,{},void 0,u.document,function(t){return n.fromValue(t)}),f=u.targetIds||[],p=u.removedTargetIds||[];e=new xh(f,p,l.key,l)}else if("documentDelete"in t){Kl(t.documentDelete,"documentDelete"),Kl(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;c=this.fromName(d.document),h=d.readTime?this.fromVersion(d.readTime):ao.forDeletedDoc(),l=new qs(c,h),p=d.removedTargetIds||[],e=new xh([],p,l.key,l)}else if("documentRemove"in t){Kl(t.documentRemove,"documentRemove"),Kl(t.documentRemove.document,"documentRemove");var m=t.documentRemove;c=this.fromName(m.document),p=m.removedTargetIds||[],e=new xh([],p,c,null)}else{if(!("filter"in t))return xr("Unknown change type "+JSON.stringify(t));Kl(t.filter,"filter"),Kl(t.filter.targetId,"filter.targetId");var y=t.filter,g=y.count||0,v=new xl(g),b=y.targetId;e=new qh(b,v)}return e},Gl.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Lh.NoChange:"ADD"===t?Lh.Added:"REMOVE"===t?Lh.Removed:"CURRENT"===t?Lh.Current:"RESET"===t?Lh.Reset:xr("Got unexpected TargetChange.state: "+t)},Gl.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return ao.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?ao.MIN:e.readTime?this.fromVersion(e.readTime):ao.MIN},Gl.prototype.toMutation=function(t){var e,n=this;if(t instanceof Da)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Va)e={delete:this.toName(t.key)};else if(t instanceof ka)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof _a))return xr("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},Gl.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Sa.NONE;if(t.update){Kl(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new ka(r,i,o,n)}return new Da(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Va(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return qr(!0===n.exists,'Transforms only support precondition "exists == true"'),new _a(r,a)}return xr("unknown mutation proto: "+JSON.stringify(t))},Gl.prototype.toPrecondition=function(t){return qr(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xr("Unknown precondition")},Gl.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Sa.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Sa.exists(t.exists):Sa.NONE},Gl.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new wa(r,i)},Gl.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(qr(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},Gl.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Nl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof Ol)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw xr("Unknown transform: "+t.transform)},Gl.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)qr("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Nl.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new kl(r.map(function(t){return e.fromValue(t)}))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new Ml(r.map(function(t){return e.fromValue(t)}));else if("increment"in t){var i=this.fromValue(t.increment);qr(i instanceof $a,"NUMERIC_ADD transform requires a NumberValue"),n=new Ol(i)}else xr("Unknown transform proto: "+JSON.stringify(t));var o=Vi.fromServerFormat(t.fieldPath);return new ya(o,n)},Gl.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},Gl.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;qr(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Xh.atPath(this.fromQueryPath(n))},Gl.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(qr(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(qr(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},Gl.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){qr(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var h=null;return n.endAt&&(h=this.fromCursor(n.endAt)),new Xh(e,i,s,a,u,c,h)},Gl.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},Gl.prototype.toLabel=function(t){switch(t){case qu.Listen:return null;case qu.ExistenceFilterMismatch:return"existence-filter-mismatch";case qu.LimboResolution:return"limbo-document";default:return xr("Unrecognized query purpose: "+t)}},Gl.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},Gl.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof nl?e.toUnaryOrFieldFilter(t):xr("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},Gl.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):xr("Unknown filter: "+JSON.stringify(t)):[]},Gl.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},Gl.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},Gl.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},Gl.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Sl(r,n)},Gl.prototype.toDirection=function(t){return Bl[t.name]},Gl.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return bl.ASCENDING;case"DESCENDING":return bl.DESCENDING;default:return}},Gl.prototype.toOperatorName=function(t){return Ul[t.name]},Gl.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Zh.EQUAL;case"GREATER_THAN":return Zh.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Zh.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Zh.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Zh.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Zh.ARRAY_CONTAINS;case"IN":return Zh.IN;case"ARRAY_CONTAINS_ANY":return Zh.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return xr("Unspecified operator");default:return xr("Unknown operator")}},Gl.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},Gl.prototype.fromFieldPathReference=function(t){return Vi.fromServerFormat(t.fieldPath)},Gl.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},Gl.prototype.fromPropertyOrder=function(t){return new Tl(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},Gl.prototype.fromFieldFilter=function(t){return nl.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},Gl.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Zh.EQUAL){if(t.value.isEqual(os.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Ga.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},Gl.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return nl.create(e,Zh.EQUAL,os.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return nl.create(n,Zh.EQUAL,Ga.INSTANCE);case"OPERATOR_UNSPECIFIED":return xr("Unspecified filter");default:return xr("Unknown filter")}},Gl.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},Gl.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return Vi.fromServerFormat(t)});return da.fromArray(e)},Gl);function Gl(t,e){this.databaseId=t,this.options=e}var zl=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Hl=(Yl.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new zl,this.queries.set(e,r)),r.listeners.push(t),qr(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},Yl.prototype.unlisten=function(o){return p(this,void 0,void 0,function(){var e,n,r,i;return d(this,function(t){return e=o.query,n=!1,(r=this.queries.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},Yl.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(e=!0);a.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},Yl.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},Yl.prototype.onOnlineStateChange=function(i){this.onlineState=i;var o=!1;this.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].applyOnlineStateChange(i)&&(o=!0)}),o&&this.raiseSnapshotsInSyncEvent()},Yl.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},Yl.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},Yl.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(t){t.next()})},Yl);function Yl(t){this.syncEngine=t,this.queries=new Qs(function(t){return t.canonicalId()}),this.onlineState=uh.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var Xl=(Jl.prototype.onViewSnapshot=function(t){if(qr(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==wh.Metadata&&e.push(i)}t=new Ah(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},Jl.prototype.onError=function(t){this.queryObserver.error(t)},Jl.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},Jl.prototype.shouldRaiseInitialEvent=function(t,e){if(qr(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==uh.Offline;return this.options.waitForSyncWhenOnline&&n?(qr(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===uh.Offline},Jl.prototype.shouldRaiseEvent=function(t){if(0<t.docChanges.length)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},Jl.prototype.raiseInitialEvent=function(t){qr(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ah.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},Jl);function Jl(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=uh.Unknown,this.options=n||{}}var $l=(Zl.fromSnapshot=function(t,e){for(var n=ko(),r=ko(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case wh.Added:n=n.add(a.doc.key);break;case wh.Removed:r=r.add(a.doc.key)}}return new Zl(t,n,r)},Zl);function Zl(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}var tf=function(t){this.key=t},ef=function(t){this.key=t},nf=(Object.defineProperty(rf.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),rf.prototype.computeDocChanges=function(t,e){var s=this,u=e?e.changeSet:new Dh,c=e?e.documentSet:this.documentSet,h=e?e.mutatedKeys:this.mutatedKeys,l=c,f=!1,p=this.query.hasLimit()&&c.size===this.query.limit?c.last():null;if(t.inorderTraversal(function(t,e){var n=c.get(t),r=e instanceof Ls?e:null;r&&(qr(t.isEqual(r.key),"Mismatching keys found in document changes: "+t+" != "+r.key),r=s.query.matches(r)?r:null);var i=!!n&&s.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||s.mutatedKeys.has(r.key)&&r.hasCommittedMutations),a=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:wh.Metadata,doc:r}),a=!0):s.shouldWaitForSyncedDocument(n,r)||(u.track({type:wh.Modified,doc:r}),a=!0,p&&0<s.query.docComparator(r,p)&&(f=!0)):!n&&r?(u.track({type:wh.Added,doc:r}),a=!0):n&&!r&&(u.track({type:wh.Removed,doc:n}),a=!0,p&&(f=!0)),a&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.hasLimit())for(;l.size>this.query.limit;){var n=l.last();l=l.delete(n.key),h=h.delete(n.key),u.track({type:wh.Removed,doc:n})}return qr(!f||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:u,needsRefill:f,mutatedKeys:h}},rf.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},rf.prototype.applyChanges=function(t,e,n){var r=this;qr(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){function n(t){switch(t){case wh.Added:return 1;case wh.Modified:case wh.Metadata:return 2;case wh.Removed:return 0;default:return xr("Unknown ChangeType: "+t)}}return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Eh.Synced:Eh.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Ah(this.query,t.documentSet,i,o,t.mutatedKeys,s===Eh.Local,u,!1),limboChanges:a}:{limboChanges:a}},rf.prototype.applyOnlineStateChange=function(t){return this.current&&t===uh.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Dh,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},rf.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},rf.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return qr(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},rf.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var n=this.limboDocuments;this.limboDocuments=ko(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var r=[];return n.forEach(function(t){e.limboDocuments.has(t)||r.push(new ef(t))}),this.limboDocuments.forEach(function(t){n.has(t)||r.push(new tf(t))}),r},rf.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=ko();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},rf.prototype.computeInitialSnapshot=function(){return Ah.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Eh.Local)},rf);function rf(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=ko(),this.mutatedKeys=ko(),this.documentSet=new Ih(t.docComparator.bind(t))}var of=(af.prototype.run=function(){this.runWithBackOff()},af.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return p(t,void 0,void 0,function(){var e,n,r=this;return d(this,function(t){return e=this.remoteStore.createTransaction(),(n=this.tryRunUpdateFunction(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.handleTransactionError(t)})})}).catch(function(t){r.handleTransactionError(t)}),[2]})})})},af.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!Wc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},af.prototype.handleTransactionError=function(t){var e=this;0<this.retries&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},af.prototype.isRetryableTransactionError=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!vh(e)},af);function af(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new zc(this.asyncQueue,Ki.RetryTransaction)}var sf="SyncEngine",uf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},cf=function(t){this.key=t,this.receivedDocument=!1},hf=(Object.defineProperty(lf.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),lf.prototype.subscribe=function(t){qr(null!==t,"SyncEngine listener cannot be null"),qr(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},lf.prototype.listen=function(a){return p(this,void 0,void 0,function(){var e,n,r,i,o;return d(this,function(t){switch(t.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(a))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(a)];case 2:return i=t.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.remoteStore.listen(i),t.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},lf.prototype.initializeViewAndComputeSnapshot=function(c,h){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u;return d(this,function(t){switch(t.label){case 0:return e=c.query,[4,this.localStore.executeQuery(e)];case 1:return n=t.sent(),[4,this.localStore.remoteDocumentKeys(c.targetId)];case 2:return r=t.sent(),i=new nf(e,r),o=i.computeDocChanges(n),a=_h.createSynthesizedTargetChangeForCurrentChange(c.targetId,h&&this.onlineState!==uh.Offline),qr(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),qr(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new uf(e,c.targetId,i),this.queryViewsByQuery.set(e,u),this.queryViewsByTarget[c.targetId]=u,[2,s.snapshot]}})})},lf.prototype.synchronizeViewAndComputeSnapshot=function(i){return p(this,void 0,void 0,function(){var e,n,r;return d(this,function(t){switch(t.label){case 0:return[4,this.localStore.executeQuery(i.query)];case 1:return e=t.sent(),[4,this.localStore.remoteDocumentKeys(i.targetId)];case 2:return n=t.sent(),r=i.view.synchronizeWithPersistedState(e,n),this.isPrimary&&this.updateTrackedLimbos(i.targetId,r.limboChanges),[2,r]}})})},lf.prototype.unlisten=function(r){return p(this,void 0,void 0,function(){var e,n=this;return d(this,function(t){switch(t.label){case 0:return this.assertSubscribed("unlisten()"),qr(!!(e=this.queryViewsByQuery.get(r)),"Trying to unlisten on query not found:"+r),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(r,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(lc)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(r,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},lf.prototype.write=function(n,r){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(n)];case 1:return e=t.sent(),this.sharedClientState.addPendingMutation(e.batchId),this.addMutationCallback(e.batchId,r),[4,this.emitNewSnapsAndNotifyLocalStore(e.changes)];case 2:return t.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return t.sent(),[2]}})})},lf.prototype.runTransaction=function(t,e,n){new of(t,this.remoteStore,e,n).run()},lf.prototype.applyRemoteEvent=function(n){return p(this,void 0,void 0,function(){var e,r=this;return d(this,function(t){switch(t.label){case 0:this.assertSubscribed("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(n)];case 2:return e=t.sent(),Yr(n.targetChanges,function(t,e){var n=r.limboResolutionsByTarget[Number(t)];n&&(qr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?n.receivedDocument=!0:0<e.modifiedDocuments.size?qr(n.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(qr(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,lc(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},lf.prototype.applyOnlineStateChange=function(r,t){if(this.isPrimary&&t===hh.RemoteStore||!this.isPrimary&&t===hh.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var i=[];this.queryViewsByQuery.forEach(function(t,e){var n=e.view.applyOnlineStateChange(r);qr(0===n.limboChanges.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.syncEngineListener.onOnlineStateChange(r),this.syncEngineListener.onWatchChange(i),this.onlineState=r,this.isPrimary&&this.sharedClientState.setOnlineState(r)}},lf.prototype.rejectListen=function(u,c){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s=this;return d(this,function(t){switch(t.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(u,"rejected",c),e=this.limboResolutionsByTarget[u],(n=e&&e.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[u],r=(r=new uo(Ui.comparator)).insert(n,new qs(n,ao.forDeletedDoc())),i=ko().add(n),o=new Rh(ao.MIN,{},new go(gi),r,i),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return qr(!!(a=this.queryViewsByTarget[u]),"Unknown targetId: "+u),[4,this.localStore.releaseQuery(a.query,!1).then(function(){return s.removeAndCleanupQuery(a)}).catch(lc)];case 2:t.sent(),this.syncEngineListener.onWatchError(a.query,c),t.label=3;case 3:return[2]}})})},lf.prototype.applyBatchState=function(n,r,i){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(e=t.sent())?(Or(sf,"Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):xr("Unknown batchState: "+r),t.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 5:return t.sent(),[2]}})})},lf.prototype.applySuccessfulWrite=function(r){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=r.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(r)];case 2:return n=t.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return t.sent(),[3,6];case 4:return[4,lc(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},lf.prototype.rejectFailedWrite=function(n,r){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(n,r),this.triggerPendingWritesCallbacks(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(n)];case 2:return e=t.sent(),this.sharedClientState.updateMutationState(n,"rejected",r),[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 3:return t.sent(),[3,6];case 4:return[4,lc(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},lf.prototype.registerPendingWritesCallback=function(r){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return this.remoteStore.canUseNetwork()||Or(sf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=t.sent())?r.resolve():((n=this.pendingWritesCallbacks.get(e)||[]).push(r),this.pendingWritesCallbacks.set(e,n)),[2]}})})},lf.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},lf.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new Kr(Qr.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},lf.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new uo(gi)).insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},lf.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(qr(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},lf.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},lf.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},lf.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof tf?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof ef?(Or(sf,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):xr("Unknown limbo change: "+JSON.stringify(i))}},lf.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){Or(sf,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Xh.atPath(e.path);this.limboResolutionsByTarget[n]=new cf(e),this.remoteStore.listen(new Ku(r,n,qu.LimboResolution,ki.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},lf.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},lf.prototype.emitNewSnapsAndNotifyLocalStore=function(n,u){return p(this,void 0,void 0,function(){var o,a,e,s=this;return d(this,function(t){switch(t.label){case 0:return o=[],a=[],e=[],this.queryViewsByQuery.forEach(function(t,i){e.push(Promise.resolve().then(function(){var e=i.view.computeDocChanges(n);return e.needsRefill?s.localStore.executeQuery(i.query).then(function(t){return i.view.computeDocChanges(t,e)}):e}).then(function(t){var e=u&&u.targetChanges[i.targetId],n=i.view.applyChanges(t,!0===s.isPrimary,e);if(s.updateTrackedLimbos(i.targetId,n.limboChanges),n.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=$l.fromSnapshot(i.targetId,n.snapshot);a.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.syncEngineListener.onWatchChange(o),[4,this.localStore.notifyLocalViewChanges(a)];case 2:return t.sent(),[2]}})})},lf.prototype.assertSubscribed=function(t){qr(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},lf.prototype.handleCredentialChange=function(r){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(r)]):[3,3];case 1:return n=t.sent(),this.sharedClientState.handleUserChange(r,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:t.sent(),t.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return t.sent(),[2]}})})},lf.prototype.applyPrimaryState=function(c){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return d(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return t.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),Hr(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return t.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return t.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},lf.prototype.resetLimboDocuments=function(){var e=this;Hr(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new uo(Ui.comparator)},lf.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(h){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c;return d(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=h,t.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(s.query,!0)]:[3,5]):[3,11];case 2:return t.sent(),[4,this.localStore.allocateQuery(s.query)];case 3:return a=t.sent(),[4,this.synchronizeViewAndComputeSnapshot(s)];case 4:return(u=t.sent()).snapshot&&n.push(u.snapshot),[3,9];case 5:return qr(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return qr(!!(c=t.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return a=t.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:t.sent(),t.label=9;case 9:e.push(a),t.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},lf.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},lf.prototype.applyTargetState=function(a,s,u){return p(this,void 0,void 0,function(){var e,n,r,i,o;return d(this,function(t){switch(t.label){case 0:if(this.isPrimary)return Or(sf,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[a])return[3,11];switch(s){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return t.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return e=t.sent(),n=Rh.createSynthesizedRemoteEventForCurrentChange(a,"current"===s),[4,this.emitNewSnapsAndNotifyLocalStore(e,n)];case 3:return t.sent(),[3,11];case 4:return function(t){return t.code===Qr.DATA_LOSS&&t.message===zs}(r=t.sent())?(i=[],Hr(this.queryViewsByTarget,function(t){return i.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(i)]):[3,6];case 5:return t.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return o=this.queryViewsByTarget[a],this.removeAndCleanupQuery(o),[4,this.localStore.releaseQuery(o.query,!0)];case 9:return t.sent(),this.syncEngineListener.onWatchError(o.query,u),[3,11];case 10:xr("Unexpected target state: "+s),t.label=11;case 11:return[2]}})})},lf.prototype.applyActiveTargetsChange=function(l,f){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h=this;return d(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=l,t.label=1;case 1:return e<n.length?(c=n[e],qr(!this.queryViewsByTarget[c],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(c)]):[3,6];case 2:return qr(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateQuery(r)];case 3:return i=t.sent(),[4,this.initializeViewAndComputeSnapshot(i,!1)];case 4:t.sent(),this.remoteStore.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){var n;return d(this,function(t){switch(t.label){case 0:return(n=a.queryViewsByTarget[e])?[4,a.localStore.releaseQuery(n.query,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupQuery(n)}).catch(lc)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,s=0,u=f,t.label=7;case 7:return s<u.length?(c=u[s],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return s++,[3,7];case 10:return[2]}})})},lf.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},lf.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},lf.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?ko().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:ko()},lf);function lf(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Qs(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new uo(Ui.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new bc,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Ho.forSyncEngine(),this.isPrimary=void 0,this.onlineState=uh.Unknown}var ff=(pf.prototype.isAuthenticated=function(){return null!=this.uid},pf.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},pf.prototype.isEqual=function(t){return t.uid===this.uid},pf.UNAUTHENTICATED=new pf(null),pf.GOOGLE_CREDENTIALS=new pf("google-credentials-uid"),pf.FIRST_PARTY=new pf("first-party-uid"),pf);function pf(t){this.uid=t}var df="SharedClientState",mf="firestore_clients",yf="firestore_mutations",gf="firestore_targets",vf=(bf.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Kr(r.error.code,r.error.message)),i?new bf(t,e,r.state,o):(Lr(df,"Failed to parse mutation state for ID '"+e+"': "+n),null)},bf.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},bf);function bf(t,e,n,r){this.user=t,this.batchId=e,this.state=n,qr(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var wf=(Sf.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Kr(n.error.code,n.error.message)),r?new Sf(t,n.state,i):(Lr(df,"Failed to parse target state for ID '"+t+"': "+e),null)},Sf.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Sf);function Sf(t,e,n){this.targetId=t,this.state=e,qr(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var Ef=(Tf.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Mo(),o=0;r&&o<n.activeTargetIds.length;++o)r=Gc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Tf(t,i):(Lr(df,"Failed to parse client data for instance '"+t+"': "+e),null)},Tf);function Tf(t,e){this.clientId=t,this.activeTargetIds=e}var If=(Cf.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&e.onlineState in uh&&"string"==typeof e.clientId?new Cf(e.clientId,uh[e.onlineState]):(Lr(df,"Failed to parse online state: "+t),null)},Cf);function Cf(t,e){this.clientId=t,this.onlineState=e}var Df=(Nf.prototype.addQueryTarget=function(t){qr(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},Nf.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Nf.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},Nf);function Nf(){this.activeTargetIds=Mo()}var Af=(kf.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},kf.prototype.start=function(){return p(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l,f=this;return d(this,function(t){switch(t.label){case 0:return qr(!this.started,"WebStorageSharedClientState already started"),qr(null!==this.syncEngine,"syncEngine property must be set before calling start()"),qr(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(i)))&&(a=Ef.fromWebStorageEntry(i,o))&&(this.activeClients[a.clientId]=a);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,h=this.earlyEvents;c<h.length;c++)l=h[c],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},kf.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},kf.prototype.getAllActiveQueryTargets=function(){var n=Mo();return Yr(this.activeClients,function(t,e){n=n.unionWith(e.activeTargetIds)}),n},kf.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},kf.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},kf.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},kf.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=wf.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},kf.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},kf.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},kf.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},kf.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},kf.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},kf.prototype.setOnlineState=function(t){this.persistOnlineState(t)},kf.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},kf.prototype.getItem=function(t){var e=this.storage.getItem(t);return Or(df,"READ",t,e),e},kf.prototype.setItem=function(t,e){Or(df,"SET",t,e),this.storage.setItem(t,e)},kf.prototype.removeItem=function(t){Or(df,"REMOVE",t),this.storage.removeItem(t)},kf.prototype.handleWebStorageEvent=function(s){var t=this;if(s.storageArea===this.storage){if(Or(df,"EVENT",s.key,s.newValue),s.key===this.localClientStorageKey)return void Lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return p(t,void 0,void 0,function(){var e,n,r,i,o,a;return d(this,function(t){if(!this.started)return this.earlyEvents.push(s),[2];if(null===s.key)return[2];if(this.clientStateKeyRe.test(s.key)){if(null==s.newValue)return n=this.fromWebStorageClientStateKey(s.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(s.key,s.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(s.key)){if(null!==s.newValue&&(r=this.fromWebStorageMutationMetadata(s.key,s.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(s.key)){if(null!==s.newValue&&(i=this.fromWebStorageQueryTargetMetadata(s.key,s.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(s.key===this.onlineStateKey){if(null!==s.newValue&&(o=this.fromWebStorageOnlineState(s.newValue)))return[2,this.handleOnlineStateEvent(o)]}else s.key===this.sequenceNumberKey&&(qr(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=ki.INVALID;if(null!=t)try{var n=JSON.parse(t);qr("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Lr(df,"Failed to read sequence number from WebStorage",t)}return e}(s.newValue))!==ki.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(kf.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),kf.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},kf.prototype.persistMutationState=function(t,e,n){var r=new vf(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},kf.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},kf.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:uh[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},kf.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new wf(t,e,n);this.setItem(r,i.toWebStorageJSON())},kf.prototype.toWebStorageClientStateKey=function(t){return qr(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),mf+"_"+this.persistenceKey+"_"+t},kf.prototype.toWebStorageQueryTargetMetadataKey=function(t){return gf+"_"+this.persistenceKey+"_"+t},kf.prototype.toWebStorageMutationBatchKey=function(t){var e=yf+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},kf.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},kf.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return qr(null!==n,"Cannot parse client state key '"+t+"'"),Ef.fromWebStorageEntry(n,e)},kf.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);qr(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return vf.fromWebStorageEntry(new ff(i),r,e)},kf.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);qr(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return wf.fromWebStorageEntry(r,e)},kf.prototype.fromWebStorageOnlineState=function(t){return If.fromWebStorageEntry(t)},kf.prototype.handleMutationBatchEvent=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){return e.user.uid!==this.currentUser.uid?(Or(df,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},kf.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},kf.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return p(n,void 0,void 0,function(){return d(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return p(n,void 0,void 0,function(){return d(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},kf.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},kf);function kf(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!kf.isAvailable(this.platform))throw new Kr(Qr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new Df,this.clientStateKeyRe=new RegExp("^"+mf+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+yf+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+gf+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}var Rf=(Mf.prototype.addPendingMutation=function(t){},Mf.prototype.updateMutationState=function(t,e,n){},Mf.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},Mf.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},Mf.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},Mf.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Mf.prototype.clearQueryState=function(t){delete this.queryState[t]},Mf.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Mf.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Mf.prototype.start=function(){return this.localState=new Df,Promise.resolve()},Mf.prototype.handleUserChange=function(t,e,n){},Mf.prototype.setOnlineState=function(t){},Mf.prototype.shutdown=function(){},Mf.prototype.writeSequenceNumber=function(t){},Mf);function Mf(){this.localState=new Df,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var _f="FirestoreClient",Of=(Lf.prototype.lruParams=function(){return Ju.withCacheSize(this.cacheSizeBytes)},Lf);function Lf(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}var Pf=function(){},xf=(qf.prototype.start=function(t){var n=this;this.verifyNotTerminated();var r=new Wi,i=new Wi,o=!1;return this.credentials.setChangeListener(function(e){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(e)}):(o=!0,n.initializePersistence(t,i,e).then(function(t){return n.initializeRest(e,t)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},qf.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},qf.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Of?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},qf.prototype.canFallback=function(t){return t instanceof Kr?t.code===Qr.FAILED_PRECONDITION||t.code===Qr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},qf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Kr(Qr.FAILED_PRECONDITION,"The client has already been terminated.")},qf.prototype.startIndexedDbPersistence=function(r,i){var t=this,o=cc.buildStoragePrefix(this.databaseInfo),a=new Wl(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return p(t,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:if(i.synchronizeTabs&&!Af.isAvailable(this.platform))throw new Kr(Qr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e=i.lruParams(),this.sharedClientState=i.synchronizeTabs?new Af(this.asyncQueue,this.platform,o,this.clientId,r):new Rf,[4,cc.createIndexedDbPersistence({allowTabSynchronization:i.synchronizeTabs,persistenceKey:o,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:a,lruParams:e,sequenceNumberSyncer:this.sharedClientState})];case 1:return n=t.sent(),[2,(this.persistence=n).referenceDelegate.garbageCollector]}})})})},qf.prototype.startMemoryPersistence=function(){return this.persistence=Lc.createEagerPersistence(this.clientId),this.sharedClientState=new Rf,Promise.resolve(null)},qf.prototype.initializeRest=function(u,c){var t=this;return Or(_f,"Initializing. user=",u.uid),this.platform.loadConnection(this.databaseInfo).then(function(s){return p(t,void 0,void 0,function(){var e,n,r,i,o,a=this;return d(this,function(t){switch(t.label){case 0:return this.localStore=new Ic(this.persistence,u),c&&(this.lruScheduler=new Zu(c,this.asyncQueue,this.localStore)),e=this.platform.newConnectivityMonitor(),n=this.platform.newSerializer(this.databaseInfo.databaseId),r=new ah(this.asyncQueue,s,this.credentials,n),i=function(t){return a.syncEngine.applyOnlineStateChange(t,hh.RemoteStore)},o=function(t){return a.syncEngine.applyOnlineStateChange(t,hh.SharedClientState)},this.remoteStore=new Gh(this.localStore,r,this.asyncQueue,i,e),this.syncEngine=new hf(this.localStore,this.remoteStore,this.sharedClientState,u),this.sharedClientState.onlineStateHandler=o,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Hl(this.syncEngine),[4,this.sharedClientState.start()];case 1:return t.sent(),[4,this.remoteStore.start()];case 2:return t.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return p(a,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return t.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return p(a,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 4:return t.sent(),[2]}})})})},qf.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),Or(_f,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},qf.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},qf.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return p(t,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},qf.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new Wi;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},qf.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new Xl(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},qf.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},qf.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof Ls)return t;if(t instanceof qs)return null;throw new Kr(Qr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},qf.prototype.getDocumentsFromLocalCache=function(i){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(i)}).then(function(t){var e=ko(),n=new nf(i,e),r=n.computeDocChanges(t);return n.applyChanges(r,!1).snapshot})},qf.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new Wi;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},qf.prototype.databaseId=function(){return this.databaseInfo.databaseId},qf.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()})},qf.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(qf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),qf.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new Wi;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise},qf);function qf(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=mi.newId()}var Ff=(Vf.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},Vf.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},Vf.prototype.mute=function(){this.muted=!0},Vf.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Vf);function Vf(t){this.observer=t,this.muted=!1}var Bf=(Uf.documentId=function(){return Uf._DOCUMENT_ID},Uf.prototype.isEqual=function(t){if(!(t instanceof Uf))throw fi("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},Uf._DOCUMENT_ID=new Uf(Vi.keyField().canonicalString()),Uf);function Uf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+di(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(ei("FieldPath","string",n,t[n]),0===t[n].length)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(t)}var Qf=new RegExp("[~\\*/\\[\\]]");var Kf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}},jf=(Wf.prototype.getToken=function(){return Promise.resolve(null)},Wf.prototype.invalidateToken=function(){},Wf.prototype.setChangeListener=function(t){qr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(ff.UNAUTHENTICATED)},Wf.prototype.removeChangeListener=function(){qr(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Wf);function Wf(){this.changeListener=null}var Gf=(zf.prototype.getToken=function(){var e=this;qr(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(t).then(function(t){if(e.tokenCounter!==n)throw new Kr(Qr.ABORTED,"getToken aborted due to token change.");return t?(qr("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new Kf(t.accessToken,e.currentUser)):null})},zf.prototype.invalidateToken=function(){this.forceRefresh=!0},zf.prototype.setChangeListener=function(t){qr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(this.currentUser)},zf.prototype.removeChangeListener=function(){qr(null!=this.tokenListener,"removeChangeListener() called twice"),qr(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},zf.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return qr(null===t||"string"==typeof t,"Received invalid UID: "+t),new ff(t)},zf);function zf(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=ff.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}var Hf=(Object.defineProperty(Yf.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Yf);function Yf(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=ff.FIRST_PARTY}var Xf=(Jf.prototype.getToken=function(){return Promise.resolve(new Hf(this.gapi,this.sessionIndex))},Jf.prototype.setChangeListener=function(t){t(ff.FIRST_PARTY)},Jf.prototype.removeChangeListener=function(){},Jf.prototype.invalidateToken=function(){},Jf);function Jf(t,e){this.gapi=t,this.sessionIndex=e}function $f(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t,["next","error","complete"])}var Zf=(tp.delete=function(){return Jr("FieldValue.delete",arguments),np.instance},tp.serverTimestamp=function(){return Jr("FieldValue.serverTimestamp",arguments),op.instance},tp.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zr("FieldValue.arrayUnion",arguments,1),new up(t)},tp.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Zr("FieldValue.arrayRemove",arguments,1),new lp(t)},tp.increment=function(t){return ei("FieldValue.increment","number",1,t),$r("FieldValue.increment",arguments,1),new dp(t)},tp.prototype.isEqual=function(t){return this===t},tp);function tp(t){this._methodName=t}var ep,np=(s(rp,ep=Zf),rp.instance=new rp,rp);function rp(){return ep.call(this,"FieldValue.delete")||this}var ip,op=(s(ap,ip=Zf),ap.instance=new ap,ap);function ap(){return ip.call(this,"FieldValue.serverTimestamp")||this}var sp,up=(s(cp,sp=Zf),cp);function cp(t){var e=sp.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}var hp,lp=(s(fp,hp=Zf),fp);function fp(t){var e=hp.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}var pp,dp=(s(mp,pp=Zf),mp);function mp(t){var e=pp.call(this,"FieldValue.increment")||this;return e._operand=t,e}var yp=Wr(Zf,"Use FieldValue.<field>() instead."),gp=/^__.*__$/,vp=(bp.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new ka(t,this.data,this.fieldMask,e)):n.push(new Da(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new _a(t,this.fieldTransforms)),n},bp);function bp(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}var wp,Sp,Ep=(Tp.prototype.toMutations=function(t,e){var n=[new ka(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&n.push(new _a(t,this.fieldTransforms)),n},Tp);function Tp(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function Ip(t){switch(t){case wp.Set:case wp.MergeSet:case wp.Update:return!0;case wp.Argument:return!1;default:throw xr("Unexpected case for UserDataSource: "+t)}}(Sp=wp=wp||{})[Sp.Set=0]="Set",Sp[Sp.Update=1]="Update",Sp[Sp.MergeSet=2]="MergeSet",Sp[Sp.Argument=3]="Argument";var Cp=(Dp.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),n=new Dp(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(t),n},Dp.prototype.childContextForFieldPath=function(t){var e=null==this.path?null:this.path.child(t),n=new Dp(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Dp.prototype.childContextForArray=function(t){return new Dp(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Dp.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Kr(Qr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},Dp.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},Dp.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},Dp.prototype.validatePathSegment=function(t){if(Ip(this.dataSource)&&gp.test(t))throw this.createError("Document fields cannot begin and end with __")},Dp);function Dp(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var Np=function(t,e){this.databaseId=t,this.key=e},Ap=(kp.prototype.parseSetData=function(t,e){var n=new Cp(wp.Set,t,Vi.EMPTY_PATH);Mp("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new vp(r,null,n.fieldTransforms)},kp.prototype.parseMergeData=function(t,e,n){var r=new Cp(wp.MergeSet,t,Vi.EMPTY_PATH);Mp("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new go(Vi.comparator),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof Bf)l=h._internalPath;else{if("string"!=typeof h)throw xr("Expected stringOrFieldPath to be a string or a FieldPath");l=Op(t,h)}if(!r.contains(l))throw new Kr(Qr.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");s=s.add(l)}i=da.fromSet(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=da.fromArray(r.fieldMask),o=r.fieldTransforms;return new vp(a,i,o)},kp.prototype.parseUpdateData=function(o,t){var a=this,s=new Cp(wp.Update,o,Vi.EMPTY_PATH);Mp("Data must be an object, but it was:",s,t);var u=new go(Vi.comparator),c=Ds.EMPTY;Yr(t,function(t,e){var n=Op(o,t),r=s.childContextForFieldPath(n);if((e=a.runPreConverter(e,r))instanceof np)u=u.add(n);else{var i=a.parseData(e,r);null!=i&&(u=u.add(n),c=c.set(n,i))}});var e=da.fromSet(u);return new Ep(c,e,s.fieldTransforms)},kp.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new Cp(wp.Update,t,Vi.EMPTY_PATH),o=[_p(t,e)],a=[n];if(r.length%2!=0)throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(_p(t,r[s])),a.push(r[s+1]);var u=new go(Vi.comparator),c=Ds.EMPTY;for(s=0;s<o.length;++s){var h=o[s],l=i.childContextForFieldPath(h),f=this.runPreConverter(a[s],l);if(f instanceof np)u=u.add(h);else{var p=this.parseData(f,l);null!=p&&(u=u.add(h),c=c.set(h,p))}}var d=da.fromSet(u);return new Ep(c,d,i.fieldTransforms)},kp.prototype.parseQueryValue=function(t,e){var n=new Cp(wp.Argument,t,Vi.EMPTY_PATH),r=this.parseData(e,n);return qr(null!=r,"Parsed data should not be null."),qr(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},kp.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Lp(t);throw e.createError(n)}},kp.prototype.parseData=function(t,e){if(Rp(t=this.runPreConverter(t,e)))return Mp("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Zf)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},kp.prototype.parseObject=function(t,r){var i=this,o=new uo(gi);return Xr(t)?r.path&&0<r.path.length&&r.fieldMask.push(r.path):Yr(t,function(t,e){var n=i.parseData(e,r.childContextForField(t));null!=n&&(o=o.insert(t,n))}),new Ds(o)},kp.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=Ga.INSTANCE),n.push(s),r++}return new ks(n)},kp.prototype.parseSentinelFieldValue=function(t,e){if(!Ip(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof np){if(e.dataSource!==wp.MergeSet)throw e.dataSource===wp.Update?(qr(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof op)e.fieldTransforms.push(new ya(e.path,Nl.instance));else if(t instanceof up){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new kl(n);e.fieldTransforms.push(new ya(e.path,r))}else if(t instanceof lp){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new Ml(n);e.fieldTransforms.push(new ya(e.path,i))}else if(t instanceof dp){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new Ol(o);e.fieldTransforms.push(new ya(e.path,a))}else xr("Unknown FieldValue type: "+t)},kp.prototype.parseScalarValue=function(t,e){if(null===t)return Ga.INSTANCE;if("number"==typeof t)return Gc(t)?new ns(t):new os(t);if("boolean"==typeof t)return Ya.of(t);if("string"==typeof t)return new us(t);if(t instanceof Date)return new ls(io.fromDate(t));if(t instanceof io)return new ls(new io(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Hh)return new Ts(t);if(t instanceof Ei)return new gs(t);if(t instanceof Np)return new ws(t.databaseId,t.key);throw e.createError("Unsupported field value: "+ci(t))},kp.prototype.parseArrayTransformElements=function(r,t){var i=this;return t.map(function(t,e){var n=new Cp(wp.Argument,r,Vi.EMPTY_PATH);return i.parseData(t,n.childContextForArray(e))})},kp);function kp(t){this.preConverter=t}function Rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof io||t instanceof Hh||t instanceof Ei||t instanceof Np||t instanceof Zf)}function Mp(t,e,n){if(!Rp(n)||!ui(n)){var r=ci(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function _p(t,e){if(e instanceof Bf)return e._internalPath;if("string"==typeof e)return Op(t,e);throw new Kr(Qr.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Op(e,t){try{return function(e){if(0<=e.search(Qf))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Bf.bind.apply(Bf,[void 0].concat(e.split("."))))}catch(t){throw new Kr(Qr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Lp(t);throw new Kr(Qr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Lp(t){return t instanceof Error?t.message:t.toString()}var Pp=Ju.COLLECTION_DISABLED,xp=(qp.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},qp);function qp(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Kr(Qr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else ri("settings","non-empty string","host",t.host),this.host=t.host,ii("settings","boolean","ssl",t.ssl),this.ssl=zr(t.ssl,!0);if(li("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),ii("settings","object","credentials",t.credentials),this.credentials=t.credentials,ii("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Lr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Lr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=zr(t.timestampsInSnapshots,!0),ii("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ju.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Pp&&t.cacheSizeBytes<Ju.MINIMUM_CACHE_SIZE_BYTES)throw new Kr(Qr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ju.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}ii("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}var Fp=(Vp.prototype.settings=function(t){if($r("Firestore.settings",arguments,1),ei("Firestore.settings","object",1,t),Gr(t,"persistence"))throw new Kr(Qr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new xp(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new Kr(Qr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=e).credentials&&(this._credentials=function(t){if(!t)return new jf;switch(t.type){case"gapi":var e=t.client;return qr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Xf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Kr(Qr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},Vp.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Vp.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Vp.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Kr(Qr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Lr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=zr(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Of(this._settings.cacheSizeBytes,e))},Vp.prototype.clearPersistence=function(){var t=this,n=cc.buildStoragePrefix(this.makeDatabaseInfo()),r=new Wi;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return p(t,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Kr(Qr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,cc.clearPersistence(n)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise},Vp.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Vp.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Vp.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Vp.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),$f(t))return this.onSnapshotsInSyncInternal(t);ei("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},Vp.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Ff({next:function(){t.next&&t.next()},error:function(t){throw xr("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},Vp.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Pf),this._firestoreClient},Vp.prototype.makeDatabaseInfo=function(){return new Ci(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Vp.prototype.configureClient=function(t){qr(!!this._settings.host,"FirestoreSettings.host is not set"),qr(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new xf(Fr.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},Vp.prototype.createDataConverter=function(r){return new Ap(function(t){if(t instanceof jp){var e=r,n=t.firestore._databaseId;if(!n.isEqual(e))throw new Kr(Qr.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new Np(r,t._key)}return t})},Vp.databaseIdFromApp=function(t){var e=t.options;if(!Gr(e,"projectId"))throw new Kr(Qr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Kr(Qr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ni(n)},Object.defineProperty(Vp.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Kr(Qr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Vp.prototype.collection=function(t){return $r("Firestore.collection",arguments,1),ei("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new id(Pi.fromString(t),this)},Vp.prototype.doc=function(t){return $r("Firestore.doc",arguments,1),ei("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),jp.forPath(Pi.fromString(t),this)},Vp.prototype.collectionGroup=function(t){if($r("Firestore.collectionGroup",arguments,1),ei("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Zp(new Xh(Pi.EMPTY_PATH,t),this)},Vp.prototype.runTransaction=function(e){var n=this;return $r("Firestore.runTransaction",arguments,1),ei("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(t){return e(new Bp(n,t))})},Vp.prototype.batch=function(){return this.ensureClientConfigured(),new Qp(this)},Object.defineProperty(Vp,"logLevel",{get:function(){switch(Mr()){case Sr.DEBUG:return"debug";case Sr.ERROR:return"error";case Sr.SILENT:return"silent";default:return xr("Unknown log level: "+Mr())}},enumerable:!0,configurable:!0}),Vp.setLogLevel=function(t){switch($r("Firestore.setLogLevel",arguments,1),ei("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":_r(Sr.DEBUG);break;case"error":_r(Sr.ERROR);break;case"silent":_r(Sr.SILENT);break;default:throw new Kr(Qr.INVALID_ARGUMENT,"Invalid log level: "+t)}},Vp.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Vp);function Vp(t){var e=this;if(this._firebaseApp=null,this._queue=new Hi,this.INTERNAL={delete:function(){return p(e,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var n=t;this._firebaseApp=n,this._databaseId=Vp.databaseIdFromApp(n),this._persistenceKey=n.name,this._credentials=new Gf(n)}else{var r=t;if(!r.projectId)throw new Kr(Qr.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Ni(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new jf}this._settings=new xp({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Bp=(Up.prototype.get=function(t){var n=this;$r("Transaction.get",arguments,1);var r=cd("Transaction.get",t,this._firestore);return this._transaction.lookup([r._key]).then(function(t){if(!t||1!==t.length)return xr("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof qs)return new Hp(n._firestore,r._key,null,!1,!1);if(e instanceof Ls)return new Hp(n._firestore,r._key,e,!1,!1);throw xr("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},Up.prototype.set=function(t,e,n){ti("Transaction.set",arguments,2,3);var r=cd("Transaction.set",t,this._firestore),i=(n=ad("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},Up.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof e||e instanceof Bf?(Zr("Transaction.update",arguments,3),r=cd("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):($r("Transaction.update",arguments,2),r=cd("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},Up.prototype.delete=function(t){$r("Transaction.delete",arguments,1);var e=cd("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},Up);function Up(t,e){this._firestore=t,this._transaction=e}var Qp=(Kp.prototype.set=function(t,e,n){ti("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=cd("WriteBatch.set",t,this._firestore),i=(n=ad("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,Sa.NONE)),this},Kp.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof e||e instanceof Bf?(Zr("WriteBatch.update",arguments,3),r=cd("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):($r("WriteBatch.update",arguments,2),r=cd("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,Sa.exists(!0))),this},Kp.prototype.delete=function(t){$r("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=cd("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Va(e._key,Sa.NONE)),this},Kp.prototype.commit=function(){return p(this,void 0,void 0,function(){return d(this,function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},Kp.prototype.verifyNotCommitted=function(){if(this._committed)throw new Kr(Qr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Kp);function Kp(t){this._firestore=t,this._mutations=[],this._committed=!1}var jp=(Wp.forPath=function(t,e){if(t.length%2!=0)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new Wp(new Ui(t),e)},Object.defineProperty(Wp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Wp.prototype,"parent",{get:function(){return new id(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Wp.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),Wp.prototype.collection=function(t){if($r("DocumentReference.collection",arguments,1),ei("DocumentReference.collection","non-empty string",1,t),!t)throw new Kr(Qr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Pi.fromString(t);return new id(this._key.path.child(e),this.firestore)},Wp.prototype.isEqual=function(t){if(!(t instanceof Wp))throw fi("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},Wp.prototype.set=function(t,e){ti("DocumentReference.set",arguments,1,2);var n=(e=ad("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,Sa.NONE))},Wp.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Bf?(Zr("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):($r("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Sa.exists(!0)))},Wp.prototype.delete=function(){return $r("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Va(this._key,Sa.NONE)])},Wp.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ti("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||$f(t[i])||(li("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),ii("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=$f(t[i])?t[i]:(ei("DocumentReference.onSnapshot","function",i,t[i]),ni("DocumentReference.onSnapshot","function",i+1,t[i+1]),ni("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},Wp.prototype.onSnapshotInternal=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new Ff({next:function(t){if(n.next){qr(t.docs.size<=1,"Too many documents returned on a document query");var e=t.docs.get(r._key);n.next(new Hp(r.firestore,r._key,e,t.fromCache,t.hasPendingWrites))}},error:e}),o=this._firestoreClient.listen(Xh.atPath(this._key.path),i,t);return function(){i.mute(),r._firestoreClient.unlisten(o)}},Wp.prototype.get=function(n){var r=this;return ti("DocumentReference.get",arguments,0,1),ud("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(t){e(new Hp(r.firestore,r._key,t,!0,t instanceof Ls&&t.hasLocalMutations))},t):r.getViaSnapshotListener(e,t,n)})},Wp.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new Kr(Qr.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new Kr(Qr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},Wp);function Wp(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}var Gp=(zp.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},zp);function zp(t,e){this.hasPendingWrites=t,this.fromCache=e}var Hp=(Yp.prototype.data=function(t){return ti("DocumentSnapshot.data",arguments,0,1),t=sd("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data(),Ua.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},Yp.prototype.get=function(t,e){if(ti("DocumentSnapshot.get",arguments,1,2),e=sd("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(_p("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,Ua.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Yp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"ref",{get:function(){return new jp(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Yp.prototype,"metadata",{get:function(){return new Gp(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Yp.prototype.isEqual=function(t){if(!(t instanceof Yp))throw fi("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},Yp.prototype.convertObject=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.convertValue(e,n)}),i},Yp.prototype.convertValue=function(t,e){if(t instanceof Ds)return this.convertObject(t,e);if(t instanceof ks)return this.convertArray(t,e);if(t instanceof ws){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||Lr("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new jp(n,this._firestore)}return t.value(e)},Yp.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},Yp);function Yp(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}var Xp,Jp=(s($p,Xp=Hp),$p.prototype.data=function(t){var e=Xp.prototype.data.call(this,t);return qr("object"==typeof e,"Document in a QueryDocumentSnapshot should exist"),e},$p);function $p(){return null!==Xp&&Xp.apply(this,arguments)||this}var Zp=(td.prototype.where=function(t,e,n){$r("Query.where",arguments,3),hi("Query.where",3,n),"in"!==e&&"array-contains-any"!==e&&function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid value "+ci(r)+" provided to function "+t+"() for its "+pi(n)+" argument. Acceptable values: "+e.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains"],2,e);var r,i=_p("Query.where",t),o=Zh.fromString(e);if(i.isKeyField()){if(o===Zh.ARRAY_CONTAINS||o===Zh.ARRAY_CONTAINS_ANY)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Zh.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new ks(a)}else r=this.parseDocumentIdValue(n)}else o!==Zh.IN&&o!==Zh.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var h=nl.create(i,o,r);return this.validateNewFilter(h),new td(this._query.addFilter(h),this.firestore)},td.prototype.orderBy=function(t,e){var n;if(ti("Query.orderBy",arguments,1,2),ni("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=bl.ASCENDING;else{if("desc"!==e)throw new Kr(Qr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=bl.DESCENDING}if(null!==this._query.startAt)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=_p("Query.orderBy",t),i=new Tl(r,n);return this.validateNewOrderBy(i),new td(this._query.addOrderBy(i),this.firestore)},td.prototype.limit=function(t){if($r("Query.limit",arguments,1),ei("Query.limit","number",1,t),t<=0)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new td(this._query.withLimit(t),this.firestore)},td.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Zr("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new td(this._query.withStartAt(r),this.firestore)},td.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Zr("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new td(this._query.withStartAt(r),this.firestore)},td.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Zr("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new td(this._query.withEndAt(r),this.firestore)},td.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Zr("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new td(this._query.withEndAt(r),this.firestore)},td.prototype.isEqual=function(t){if(!(t instanceof td))throw fi("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},td.prototype.boundFromDocOrFields=function(t,e,n,r){if(hi(t,1,e),e instanceof Hp){if(0<n.length)throw new Kr(Qr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Kr(Qr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},td.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new ws(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof ds)throw new Kr(Qr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Sl(r,n)},td.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Kr(Qr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Pi.fromString(a));if(!Ui.isDocumentKey(s))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Ui(s);i.push(new ws(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,a);i.push(c)}}return new Sl(i,n)},td.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ti("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||$f(t[i])||(li("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),ii("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=$f(t[i])?t[i]:(ei("Query.onSnapshot","function",i,t[i]),ni("Query.onSnapshot","function",i+1,t[i+1]),ni("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},td.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ff({next:function(t){e.next&&e.next(new ed(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},td.prototype.get=function(n){var r=this;return ti("Query.get",arguments,0,1),ud("Query.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(t){e(new ed(r.firestore,r._query,t))},t):r.getViaSnapshotListener(e,t,n)})},td.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new Kr(Qr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},td.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(Pi.fromString(t));if(!Ui.isDocumentKey(e))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new ws(this.firestore._databaseId,new Ui(e))}if(t instanceof jp){var n=t;return new ws(this.firestore._databaseId,n._key)}throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ci(t)+".")},td.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},td.prototype.validateNewFilter=function(t){if(t instanceof nl){var e=[Zh.ARRAY_CONTAINS,Zh.ARRAY_CONTAINS_ANY],n=[Zh.IN,Zh.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(e)),null!=s)throw s===t.op?new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},td.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},td.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Kr(Qr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},td);function td(t,e){this._query=t,this.firestore=e}var ed=(Object.defineProperty(nd.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(nd.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(nd.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),nd.prototype.forEach=function(e,n){var r=this;ti("QuerySnapshot.forEach",arguments,1,2),ei("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(t){e.call(n,r.convertToDocumentImpl(t))})},Object.defineProperty(nd.prototype,"query",{get:function(){return new Zp(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),nd.prototype.docChanges=function(t){t&&(li("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ii("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Kr(Qr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,e,o){if(o.oldDocs.isEmpty()){var n,r=0;return o.docChanges.map(function(t){var e=new Jp(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key));return qr(t.type===wh.Added,"Invalid event type for first snapshot"),qr(!n||o.query.docComparator(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})}var a=o.oldDocs;return o.docChanges.filter(function(t){return e||t.type!==wh.Metadata}).map(function(t){var e=new Jp(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key)),n=-1,r=-1;return t.type!==wh.Added&&(qr(0<=(n=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==wh.Removed&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case wh.Added:return"added";case wh.Modified:case wh.Metadata:return"modified";case wh.Removed:return"removed";default:return xr("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},nd.prototype.isEqual=function(t){if(!(t instanceof nd))throw fi("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},nd.prototype.convertToDocumentImpl=function(t){return new Jp(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},nd);function nd(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Gp(n.hasPendingWrites,n.fromCache)}["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(ed.prototype.docChanges,t,{get:function(){return function(){throw new Kr(Qr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var rd,id=(s(od,rd=Zp),Object.defineProperty(od.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(od.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new jp(new Ui(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(od.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),od.prototype.doc=function(t){if(ti("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=mi.newId()),ei("CollectionReference.doc","non-empty string",1,t),""===t)throw new Kr(Qr.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Pi.fromString(t);return jp.forPath(this._query.path.child(e),this.firestore)},od.prototype.add=function(t){$r("CollectionReference.add",arguments,1),ei("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},od);function od(t,e){var n=rd.call(this,Xh.atPath(t),e)||this;if(t.length%2!=1)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return n}function ad(t,e){if(void 0===e)return{merge:!1};if(li(t,e,["merge","mergeFields"]),ii(t,"boolean","merge",e.merge),oi(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Bf}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Kr(Qr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function sd(t,e){return void 0===e?{}:(li(t,e,["serverTimestamps"]),ai(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ud(t,e){ni(t,"object",1,e),e&&(li(t,e,["source"]),ai(t,0,"source",e.source,["default","server","cache"]))}function cd(t,e,n){if(e instanceof jp){if(e.firestore!==n)throw new Kr(Qr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw fi(t,"DocumentReference",1,e)}var hd=Wr(Fp,"Use firebase.firestore() instead."),ld=Wr(Bp,"Use firebase.firestore().runTransaction() instead."),fd=Wr(Qp,"Use firebase.firestore().batch() instead."),pd=Wr(jp,"Use firebase.firestore().doc() instead."),dd=Wr(Hp),md=Wr(Jp),yd=Wr(Zp),gd=Wr(ed),vd=Wr(id,"Use firebase.firestore().collection() instead."),bd={Firestore:hd,GeoPoint:Hh,Timestamp:io,Blob:Ii,Transaction:ld,WriteBatch:fd,DocumentReference:pd,DocumentSnapshot:dd,Query:yd,QueryDocumentSnapshot:md,QuerySnapshot:gd,CollectionReference:vd,FieldPath:Bf,FieldValue:yp,setLogLevel:Fp.setLogLevel,CACHE_SIZE_UNLIMITED:Pp};function wd(t){t.INTERNAL.registerService("firestore",function(t){return new Fp(t)},function(t){qr(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(bd))}var Sd=(Ed.prototype.addCallback=function(t){},Ed.prototype.shutdown=function(){},Ed);function Ed(){}var Td="ConnectivityMonitor",Id=(Cd.prototype.addCallback=function(t){this.callbacks.push(t)},Cd.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Cd.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Cd.prototype.onNetworkAvailable=function(){Or(Td,"Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},Cd.prototype.onNetworkUnavailable=function(){Or(Td,"Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},Cd.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Cd);function Cd(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Dd=(Nd.prototype.onOpen=function(t){qr(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},Nd.prototype.onClose=function(t){qr(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},Nd.prototype.onMessage=function(t){qr(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},Nd.prototype.close=function(){this.closeFn()},Nd.prototype.send=function(t){this.sendFn(t)},Nd.prototype.callOnOpen=function(){qr(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},Nd.prototype.callOnClose=function(t){qr(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},Nd.prototype.callOnMessage=function(t){qr(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},Nd);function Nd(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}var Ad="Connection",kd={BatchGetDocuments:"batchGet",Commit:"commit"},Rd="gl-js/ fire/"+kr,Md=(_d.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Rd},_d.prototype.invokeRPC=function(s,r,u){var c=this,h=this.makeUrl(s);return new Promise(function(i,o){var a=new Ar;a.listenOnce(Dr.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Cr.NO_ERROR:var t=a.getResponseJson();Or(Ad,"XHR received:",JSON.stringify(t)),i(t);break;case Cr.TIMEOUT:Or(Ad,'RPC "'+s+'" timed out'),o(new Kr(Qr.DEADLINE_EXCEEDED,"Request time out"));break;case Cr.HTTP_ERROR:var e=a.getStatus();if(Or(Ad,'RPC "'+s+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=function(t){var e=t.toLowerCase().replace("_","-");return 0<=Object.values(Qr).indexOf(e)?e:Qr.UNKNOWN}(n.status);o(new Kr(r,n.message))}else o(new Kr(Qr.UNKNOWN,"Server responded with status "+a.getStatus()))}else Or(Ad,'RPC "'+s+'" failed'),o(new Kr(Qr.UNAVAILABLE,"Connection failed."));break;default:xr('RPC "'+s+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{Or(Ad,'RPC "'+s+'" completed.')}});var t=l({},r);delete t.database;var e=JSON.stringify(t);Or(Ad,"XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.modifyHeadersForRequest(n,u),a.send(h,"POST",e,n,15)})},_d.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},_d.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Ir(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}Or(Ad,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new Dd({sendFn:function(t){c?Or(Ad,"Not sending because WebChannel is closed:",t):(u||(Or(Ad,"Opening WebChannel transport."),s.open(),u=!0),Or(Ad,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}});return a(Nr.EventType.OPEN,function(){c||Or(Ad,"WebChannel transport opened.")}),a(Nr.EventType.CLOSE,function(){c||(c=!0,Or(Ad,"WebChannel transport closed"),h.callOnClose())}),a(Nr.EventType.ERROR,function(t){c||(c=!0,Or(Ad,"WebChannel transport errored:",t),h.callOnClose(new Kr(Qr.UNAVAILABLE,"The operation could not be completed")))}),a(Nr.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];qr(!!e,"Got a webchannel message without data.");var n=e,r=n.error||n[0]&&n[0].error;if(r){Or(Ad,"WebChannel received error:",r);var i=r.status,o=function(t){var e=dh[t];if(void 0!==e)return bh(e)}(i),a=r.message;void 0===o&&(o=Qr.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,h.callOnClose(new Kr(o,a)),s.close()}else Or(Ad,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},_d.prototype.makeUrl=function(t){var e=kd[t];qr(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},_d);function _d(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}var Od=(Object.defineProperty(Ld.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Ld.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Ld.prototype.loadConnection=function(t){return Promise.resolve(new Md(t))},Ld.prototype.newConnectivityMonitor=function(){return Id.isAvailable()?new Id:new Sd},Ld.prototype.newSerializer=function(t){return new Wl(t,{useProto3Json:!0})},Ld.prototype.formatJSON=function(t){return JSON.stringify(t)},Ld.prototype.atob=function(t){return atob(t)},Ld.prototype.btoa=function(t){return btoa(t)},Ld);function Ld(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}Fr.setPlatform(new Od),wd(Pd)}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-firestore.js.map

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(fl){"use strict";try{(function(){fl=fl&&fl.hasOwnProperty("default")?fl.default:fl,function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},a="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function c(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}(t)}}!function(t,e){if(e){var n=a;t=t.split(".");for(var i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=a.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){i||(i=!0,e.call(n,t))}}var n=this,i=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)r.b(this.a[t]);this.a=null}};var r=new e;return s.prototype.o=function(t){var e=this.f();t.Ja(e.resolve,e.reject)},s.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){r(t)}}:t}var i,r,o=new s(function(t,e){i=t,r=e});return this.Ja(n(t,i),n(e,r)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Ja=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?r.b(n):this.a.push(n)},s.resolve=u,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(r){return new s(function(t,e){for(var n=c(r),i=n.next();!i.done;i=n.next())u(i.value).Ja(t,e)})},s.all=function(t){var o=c(t),a=o.next();return a.done?u([]):new s(function(n,t){function e(e){return function(t){i[e]=t,0==--r&&n(i)}}for(var i=[],r=0;i.push(void 0),r++,u(a.value).Ja(e(i.length-1),t),!(a=o.next()).done;);})},s});var u=u||{},l=this||self;function h(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}var s=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(){}function i(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function r(t){return null===t}function p(t){return"array"==i(t)}function v(t){var e=i(t);return"array"==e||"object"==e&&"number"==typeof t.length}function m(t){return"function"==i(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var e="closure_uid_"+(1e9*Math.random()>>>0),b=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function w(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:w).apply(null,arguments)}function T(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now||function(){return+new Date};function k(t,o){function e(){}e.prototype=o.prototype,t.qb=o.prototype,t.prototype=new e,(t.prototype.constructor=t).fd=function(t,e,n){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return o.prototype[e].apply(t,i)}}function A(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");S.call(this,n+t[i])}function O(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function _(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function P(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function R(){this.b=this.a=null}k(S,Error),S.prototype.name="CustomError",k(N,S),N.prototype.name="AssertionError",_.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new _(function(){return new C},function(t){t.reset()});function C(){this.next=this.b=this.a=null}function L(t,e){t:{try{var n=t&&t.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||l).Element&&i.Location){var r=i;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}R.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},C.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},C.prototype.reset=function(){this.next=this.b=this.a=null};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(h(t))return h(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=h(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};var j=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=h(t)?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},U=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=h(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function V(t,e){return 0<=x(t,e)}function F(t,e){var n;return(n=0<=(e=x(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(n,i){!function(t,e){for(var n=h(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(n,function(t,e){i.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function q(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function B(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function G(t){for(var e in t)return!1;return!0}function W(t){var e,n={};for(e in t)n[e]=t[e];return n}var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<X.length;o++)n=X[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Y(t,e){this.a=t===Z&&e||"",this.b=$}function z(t){return t instanceof Y&&t.constructor===Y&&t.b===$?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}Y.prototype.qa=!0,Y.prototype.pa=function(){return this.a},Y.prototype.toString=function(){return"Const{"+this.a+"}"};var $={},Z={},Q=new Y(Z,"");function tt(){this.a="",this.b=ot}function et(t){return t instanceof tt&&t.constructor===tt&&t.b===ot?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+i(t)),"type_error:TrustedResourceUrl")}function nt(t,n){var i=z(t);if(!rt.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return at(t=i.replace(it,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof Y?z(t):encodeURIComponent(String(t))}))}tt.prototype.qa=!0,tt.prototype.pa=function(){return this.a.toString()},tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var it=/%{(\w+)}/g,rt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ot={};function at(t){var e=new tt;return e.a=t,e}var st=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ut=/&/g,ct=/</g,ht=/>/g,lt=/"/g,ft=/'/g,dt=/\x00/g,pt=/[\x00&<>"']/;function vt(t,e){return-1!=t.indexOf(e)}function mt(t,e){return t<e?-1:e<t?1:0}function gt(){this.a="",this.b=Tt}function bt(t){return t instanceof gt&&t.constructor===gt&&t.b===Tt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+i(t)),"type_error:SafeUrl")}gt.prototype.qa=!0,gt.prototype.pa=function(){return this.a.toString()},gt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var yt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function wt(t){return t instanceof gt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),yt.test(t)||(t="about:invalid#zClosurez"),Et(t))}var It,Tt={};function Et(t){var e=new gt;return e.a=t,e}Et("about:blank");t:{var kt=l.navigator;if(kt){var At=kt.userAgent;if(At){It=At;break t}}It=""}function St(t){return vt(It,t)}function Nt(){this.a="",this.b=_t}function Ot(t){return t instanceof Nt&&t.constructor===Nt&&t.b===_t?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+i(t)),"type_error:SafeHtml")}Nt.prototype.qa=!0,Nt.prototype.pa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var _t={};function Pt(t){var e=new Nt;return e.a=t,e}Pt("<!DOCTYPE html>");var Rt,Dt,Ct=Pt("");function Lt(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function xt(t){return pt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ut,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ct,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ht,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(lt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ft,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(dt,"&#0;"))),t}function Mt(t){l.setTimeout(function(){throw t},0)}function jt(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!St("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=at(z(Q));L(t,"HTMLIFrameElement"),t.src=et(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ot(Ct)),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0===t||St("Trident")||St("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){l.setTimeout(t,0)};var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){i.next={yb:t},i=i.next,e.port2.postMessage(0)}}function Ut(t,e){Dt||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);Dt=function(){t.then(Kt)}}else Dt=function(){var t=Kt;!m(l.setImmediate)||l.Window&&l.Window.prototype&&!St("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Rt=Rt||jt())(t):l.setImmediate(t)}}(),Vt||(Dt(),Vt=!0),Ft.add(t,e)}Pt("<br>");var Vt=!1,Ft=new R;function Kt(){for(var t;n=e=void 0,n=null,(e=Ft).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Mt(t)}P(D,t)}var e,n;Vt=!1}function qt(t,e){if(this.a=Ht,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,function(t){ee(n,Bt,t)},function(t){if(!(t instanceof ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ee(n,Gt,t)})}catch(t){ee(this,Gt,t)}}var Ht=0,Bt=2,Gt=3;function Wt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Wt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Xt=new _(function(){return new Wt},function(t){t.reset()});function Jt(t,e,n){var i=Xt.get();return i.g=t,i.b=e,i.f=n,i}function Yt(t){if(t instanceof qt)return t;var e=new qt(d);return ee(e,Bt,t),e}function zt(n){return new qt(function(t,e){e(n)})}function $t(t,e,n){ne(t,e,n,null)||Ut(T(e,t))}function Zt(n){return new qt(function(i){var r=n.length,o=[];if(r)for(var t=function(t,e,n){r--,o[t]=e?{Gb:!0,value:n}:{Gb:!1,reason:n},0==r&&i(o)},e=0;e<n.length;e++)$t(n[e],T(t,e,!0),T(t,e,!1));else i(o)})}function Qt(t,e){t.b||t.a!=Bt&&t.a!=Gt||ie(t),t.f?t.f.next=e:t.b=e,t.f=e}function te(t,r,o,a){var e=Jt(null,null,null);return e.a=new qt(function(n,i){e.g=r?function(t){try{var e=r.call(a,t);n(e)}catch(t){i(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof ue?i(t):n(e)}catch(t){i(t)}}:i}),Qt(e.a.c=t,e),e.a}function ee(t,e,n){t.a==Ht&&(t===n&&(e=Gt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ne(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ie(t),e!=Gt||n instanceof ue||function(t,e){t.g=!0,Ut(function(){t.g&&se.call(null,e)})}(t,n)))}function ne(t,e,n,i){if(t instanceof qt)return Qt(t,Jt(e||d,n||null,i)),!0;if(A(t))return t.then(e,n,i),!0;if(g(t))try{var r=t.then;if(m(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(r,t))},o)}catch(t){o(t)}}(t,r,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function ie(t){t.h||(t.h=!0,Ut(t.Zb,t))}function re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function oe(t,e,n,i){if(n==Gt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ae(e,n,i);else try{e.c?e.g.call(e.f):ae(e,n,i)}catch(t){se.call(null,t)}P(Xt,e)}function ae(t,e,n){e==Bt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}qt.prototype.then=function(t,e,n){return te(this,m(t)?t:null,m(e)?e:null,n)},qt.prototype.$goog_Thenable=!0,(t=qt.prototype).ka=function(t,e){return(t=Jt(t,t,e)).c=!0,Qt(this,t),this},t.s=function(t,e){return te(this,null,t,e)},t.cancel=function(t){this.a==Ht&&Ut(function(){!function t(e,n){if(e.a==Ht)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==Ht&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):re(i),oe(i,o,Gt,n)))}e.c=null}else ee(e,Gt,n)}(this,new ue(t))},this)},t.Oc=function(t){this.a=Ht,ee(this,Bt,t)},t.Pc=function(t){this.a=Ht,ee(this,Gt,t)},t.Zb=function(){for(var t;t=re(this);)oe(this,t,this.a,this.i);this.h=!1};var se=Mt;function ue(t){S.call(this,t)}function ce(){this.ta=this.ta,this.la=this.la}k(ue,S);var he=0;function le(t){if(!t.ta&&(t.ta=!0,t.xa(),0!=he))t[e]||(t[e]=++b)}function fe(t){return fe[" "](t),t}ce.prototype.ta=!(ue.prototype.name="cancel"),ce.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},fe[" "]=d;var de,pe,ve=St("Opera"),me=St("Trident")||St("MSIE"),ge=St("Edge"),be=ge||me,ye=St("Gecko")&&!(vt(It.toLowerCase(),"webkit")&&!St("Edge"))&&!(St("Trident")||St("MSIE"))&&!St("Edge"),we=vt(It.toLowerCase(),"webkit")&&!St("Edge");function Ie(){var t=l.document;return t?t.documentMode:void 0}t:{var Te="",Ee=(pe=It,ye?/rv:([^\);]+)(\)|;)/.exec(pe):ge?/Edge\/([\d\.]+)/.exec(pe):me?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pe):we?/WebKit\/(\S+)/.exec(pe):ve?/(?:Version)[ \/]?(\S+)/.exec(pe):void 0);if(Ee&&(Te=Ee?Ee[1]:""),me){var ke=Ie();if(null!=ke&&ke>parseFloat(Te)){de=String(ke);break t}}de=Te}var Ae,Se={};function Ne(s){return function(t,e){var n=Se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(s,function(){for(var t=0,e=st(String(de)).split("."),n=st(String(s)).split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var o=e[r]||"",a=n[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=mt(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||mt(0==o[2].length,0==a[2].length)||mt(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t})}Ae=l.document&&me?Ie():void 0;var Oe=Object.freeze||function(t){return t},_e=!me||9<=Number(Ae),Pe=me&&!Ne("9"),Re=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",d,e),l.removeEventListener("test",d,e)}catch(t){}return t}();function De(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Ce(t,e){if(De.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ye){t:{try{fe(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=h(t.pointerType)?t.pointerType:Le[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}De.prototype.preventDefault=function(){this.Mb=!1},k(Ce,De);var Le=Oe({2:"touch",3:"pen",4:"mouse"});Ce.prototype.preventDefault=function(){Ce.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Pe)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ce.prototype.f=function(){return this.a};var xe="closure_listenable_"+(1e6*Math.random()|0),Me=0;function je(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Na=r,this.key=++Me,this.ra=this.Ia=!1}function Ue(t){t.ra=!0,t.listener=null,t.proxy=null,t.src=null,t.Na=null}function Ve(t){this.src=t,this.a={},this.b=0}function Fe(t,e){var n=e.type;n in t.a&&F(t.a[n],e)&&(Ue(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ke(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ra&&o.listener==e&&o.capture==!!n&&o.Na==i)return r}return-1}Ve.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ke(t,e,i,r);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new je(e,this.src,o,!!i,r)).Ia=n,t.push(e)),e};var qe="closure_lm_"+(1e6*Math.random()|0),He={};function Be(t,e,n,i,r){if(i&&i.once)We(t,e,n,i,r);else if(p(e))for(var o=0;o<e.length;o++)Be(t,e[o],n,i,r);else n=en(n),t&&t[xe]?rn(t,e,n,g(i)?!!i.capture:!!i,r):Ge(t,e,n,!1,i,r)}function Ge(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=g(r)?!!r.capture:!!r,s=Qe(t);if(s||(t[qe]=s=new Ve(t)),!(n=s.add(e,n,i,a,o)).proxy)if(i=function(){var e=Ze,n=_e?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n}(),(n.proxy=i).src=t,i.listener=n,t.addEventListener)Re||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ye(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function We(t,e,n,i,r){if(p(e))for(var o=0;o<e.length;o++)We(t,e[o],n,i,r);else n=en(n),t&&t[xe]?on(t,e,n,g(i)?!!i.capture:!!i,r):Ge(t,e,n,!0,i,r)}function Xe(t,e,n,i,r){if(p(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,i,r);else i=g(i)?!!i.capture:!!i,n=en(n),t&&t[xe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=Ke(o=t.a[e],n,i,r))&&(Ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&Qe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ke(e,n,i,r)),(n=-1<t?e[t]:null)&&Je(n))}function Je(t){if("number"!=typeof t&&t&&!t.ra){var e=t.src;if(e&&e[xe])Fe(e.u,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ye(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Qe(e))?(Fe(n,t),0==n.b&&(n.src=null,e[qe]=null)):Ue(t)}}}function Ye(t){return t in He?He[t]:He[t]="on"+t}function ze(t,e,n,i){var r=!0;if((t=Qe(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ra&&(o=$e(o,i),r=r&&!1!==o)}return r}function $e(t,e){var n=t.listener,i=t.Na||t.src;return t.Ia&&Je(t),n.call(i,e)}function Ze(t,e){if(t.ra)return!0;if(_e)return $e(t,new Ce(e,this));if(!e)t:{e=["window","event"];for(var n=l,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new Ce(i=e,this),n=!0,!(i.keyCode<0||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}!r&&null!=i.returnValue||(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=ze(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=ze(i[r],t,!1,e),n=n&&o}return n}function Qe(t){return(t=t[qe])instanceof Ve?t:null}var tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function en(e){return m(e)?e:(e[tn]||(e[tn]=function(t){return e.handleEvent(t)}),e[tn])}function nn(){ce.call(this),this.u=new Ve(this),(this.Sb=this).Wa=null}function rn(t,e,n,i,r){t.u.add(String(e),n,!1,i,r)}function on(t,e,n,i,r){t.u.add(String(e),n,!0,i,r)}function an(t,e,n,i){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ra&&a.capture==n){var s=a.listener,u=a.Na||a.src;a.Ia&&Fe(t.u,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Mb}function sn(t,e,n){if(m(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function un(n){var i=null;return new qt(function(t,e){-1==(i=sn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(i),t})}function cn(t){if(t.U&&"function"==typeof t.U)return t.U();if(h(t))return t.split("");if(v(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function hn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(v(t)||h(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function ln(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof ln)for(n=t.X(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function fn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];dn(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)dn(r,i=t.a[e])||(r[t.a[n++]=i]=1),e++;t.a.length=n}}function dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}k(nn,ce),nn.prototype[xe]=!0,nn.prototype.addEventListener=function(t,e,n,i){Be(this,t,e,n,i)},nn.prototype.removeEventListener=function(t,e,n,i){Xe(this,t,e,n,i)},nn.prototype.dispatchEvent=function(t){var e,n=this.Wa;if(n)for(e=[];n;n=n.Wa)e.push(n);n=this.Sb;var i=t.type||t;if(h(t))t=new De(t,n);else if(t instanceof De)t.target=t.target||n;else{var r=t;J(t=new De(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=an(a,i,!0,t)&&r}if(r=an(a=t.b=n,i,!0,t)&&r,r=an(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=an(a=t.b=e[o],i,!1,t)&&r;return r},nn.prototype.xa=function(){if(nn.qb.xa.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)Ue(n[i]);delete e.a[t],e.b--}}this.Wa=null},(t=ln.prototype).U=function(){fn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return fn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return dn(this.b,t)?this.b[t]:e},t.set=function(t,e){dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof vn?(this.h=void 0!==e?e:t.h,mn(this,t.f),this.i=t.i,this.b=t.b,gn(this,t.l),this.c=t.c,bn(this,jn(t.a)),this.g=t.g):t&&(n=String(t).match(pn))?(this.h=!!e,mn(this,n[1]||"",!0),this.i=En(n[2]||""),this.b=En(n[3]||"",!0),gn(this,n[4]),this.c=En(n[5]||"",!0),bn(this,n[6]||"",!0),this.g=En(n[7]||"")):(this.h=!!e,this.a=new Rn(null,this.h))}function mn(t,e,n){t.f=n?En(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function gn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function bn(t,e,n){e instanceof Rn?(t.a=e,function(t,e){e&&!t.f&&(Dn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ln(this,e),Mn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=kn(e,_n)),t.a=new Rn(e,t.h))}function yn(t,e,n){t.a.set(e,n)}function wn(t,e){return t.a.get(e)}function In(t){return t instanceof vn?new vn(t):new vn(t,void 0)}function Tn(t,e){var n=new vn(null,void 0);return mn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function En(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kn(t,e,n){return h(t)?(t=encodeURI(t).replace(e,An),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function An(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(kn(e,Sn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(kn(e,Sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(kn(n,"/"==n.charAt(0)?On:Nn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",kn(n,Pn)),t.join("")},vn.prototype.resolve=function(t){var e=new vn(this),n=!!t.f;n?mn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var i=t.c;if(n)gn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0))if(this.b&&!this.c)i="/"+i;else{var r=e.c.lastIndexOf("/");-1!=r&&(i=e.c.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(vt(r,"./")||vt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?bn(e,jn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Sn=/[#\/\?@]/g,Nn=/[#\?:]/g,On=/[#\?]/g,_n=/[#\?@]/g,Pn=/#/g;function Rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dn(n){n.a||(n.a=new ln,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Cn(t){var e=hn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Rn(null,void 0);t=cn(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];p(o)?Mn(n,r,o):n.add(r,o)}return n}function Ln(t,e){Dn(t),e=Un(t,e),dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&fn(t)))}function xn(t,e){return Dn(t),e=Un(t,e),dn(t.a.b,e)}function Mn(t,e,n){Ln(t,e),0<n.length&&(t.c=null,t.a.set(Un(t,e),H(n)),t.b+=n.length)}function jn(t){var e=new Rn;return e.c=t.c,t.a&&(e.a=new ln(t.a),e.b=t.b),e}function Un(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Rn.prototype).add=function(t,e){Dn(this),this.c=null,t=Un(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,i){Dn(this),this.a.forEach(function(t,e){M(t,function(t){n.call(i,t,e,this)},this)},this)},t.X=function(){Dn(this);for(var t=this.a.U(),e=this.a.X(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.U=function(t){Dn(this);var e=[];if(h(t))xn(this,t)&&(e=q(e,this.a.get(Un(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=q(e,t[n])}return e},t.set=function(t,e){return Dn(this),this.c=null,xn(this,t=Un(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.U(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")};var Vn=!me||9<=Number(Ae);function Fn(t){var e=document;return h(t)?e.getElementById(t):t}function Kn(n,t){B(t,function(t,e){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:qn.hasOwnProperty(e)?n.setAttribute(qn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var qn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Hn(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!Vn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',xt(a.name),'"'),a.type){o.push(' type="',xt(a.type),'"');var s={};J(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=r.createElement(o),a&&(h(a)?o.className=a:p(a)?o.className=a.join(" "):Kn(o,a)),2<i.length&&function(e,n,t){function i(t){t&&n.appendChild(h(t)?e.createTextNode(t):t)}for(var r=2;r<t.length;r++){var o=t[r];!v(o)||g(o)&&0<o.nodeType?i(o):M(Bn(o)?H(o):o,i)}}(r,o,i),o}function Bn(t){if(t&&"number"==typeof t.length){if(g(t))return"function"==typeof t.item||"string"==typeof t.item;if(m(t))return"function"==typeof t.item}return!1}function Gn(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(p(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&("function"!=typeof(a=n[r])&&(i.push(o),Yn(r,i),i.push(":"),t(e,a,i),o=","));return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":Yn(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Wn,t,e),e.join("")}function Wn(){}var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function zn(){var t=vi();return me&&!!Ae&&11==Ae||/Edge\/\d+/.test(t)}function $n(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||l.window;var n="about:blank";t&&(n=bt(wt(t)).toString()),e.location.href=n}function Qn(t){return!!((t=(t||vi()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ti(t){t=t||l.window;try{t.close()}catch(t){}}function ei(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vi().toLowerCase(),i&&(e.target=i,vt(n,"crios/")&&(e.target="_blank")),fi(vi())==hi&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof gt?n:wt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0))}var a=r.join(",");if((St("iPhone")&&!St("iPod")&&!St("iPad")||St("iPad")||St("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(L(a=i.document.createElement("A"),"HTMLAnchorElement"),e instanceof gt||e instanceof gt||(e="object"==typeof e&&e.qa?e.pa():String(e),yt.test(e)||(e="about:invalid#zClosurez"),e=Et(e)),a.href=bt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open("",n,a),t=bt(e).toString(),a&&(be&&vt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Pt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+xt(t)+'">'),a.document.write(Ot(t)),a.document.close())):(a=i.open(bt(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var ni=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ii=/^[^@]+@[^@]+$/;function ri(){var e=null;return new qt(function(t){"complete"==l.document.readyState?t():(e=function(){t()},We(window,"load",e))}).s(function(t){throw Xe(window,"load",e),t})}function oi(t){return t=t||vi(),!("file:"!==wi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ai(){var t=l.window;try{return!(!t||t==t.top)}catch(t){return!1}}function si(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function ui(){return fl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":fl.INTERNAL.hasOwnProperty("node")?"Node":si()?"Worker":"Browser"}function ci(){var t=ui();return"ReactNative"===t||"Node"===t}var hi="Firefox",li="Chrome";function fi(t){var e=t.toLowerCase();return vt(e,"opera/")||vt(e,"opr/")||vt(e,"opios/")?"Opera":vt(e,"iemobile")?"IEMobile":vt(e,"msie")||vt(e,"trident/")?"IE":vt(e,"edge/")?"Edge":vt(e,"firefox/")?hi:vt(e,"silk/")?"Silk":vt(e,"blackberry")?"Blackberry":vt(e,"webos")?"Webos":!vt(e,"safari/")||vt(e,"chrome/")||vt(e,"crios/")||vt(e,"android")?!vt(e,"chrome/")&&!vt(e,"crios/")||vt(e,"edge/")?vt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":li:"Safari"}var di={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function pi(t,e){e=e||[];var n,i=[],r={};for(n in di)r[di[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=ui())?i=fi(r=vi()):"Worker"===i&&(i=fi(r=vi())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function vi(){return l.navigator&&l.navigator.userAgent||""}function mi(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function gi(){try{var t=l.localStorage,e=Ai();if(t)return t.setItem(e,"1"),t.removeItem(e),!zn()||!!l.indexedDB}catch(t){return si()&&!!l.indexedDB}return!1}function bi(){return(yi()||"chrome-extension:"===wi()||oi())&&!ci()&&gi()&&!si()}function yi(){return"http:"===wi()||"https:"===wi()}function wi(){return l.location&&l.location.protocol||null}function Ii(t){return!Qn(t=t||vi())&&fi(t)!=hi}function Ti(t){return void 0===t?null:Gn(t)}function Ei(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ki(t){if(null!==t)return JSON.parse(t)}function Ai(t){return t||Math.floor(1e9*Math.random()).toString()}function Si(t){return"Safari"!=fi(t=t||vi())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ni(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Oi(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vi(),e=ui(),this.b=Qn(t)||"ReactNative"===e}function _i(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Pi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Ri(){return!(!mi("fireauth.oauthhelper",l)&&!mi("fireauth.iframe",l))}Oi.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!yi()&&"chrome-extension:"!==wi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Di,Ci={};function Li(t){Ci[t]||(Ci[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var xi={};Object.defineProperty(xi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(xi,"abcd",{configurable:!0,enumerable:!0,value:2}),Di=2==xi.abcd}catch(t){Di=!1}function Mi(t,e,n){Di?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ji(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Mi(t,n,e[n])}function Ui(t){var e={};return ji(e,t),e}function Vi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Mi(e,n,Vi(t[n]));return e}function Fi(t){var e={},n=t[qi],i=t[Hi];if(!(t=t[Bi])||t!=Ki&&!n)throw Error("Invalid provider user info!");e[Wi]=i||null,e[Gi]=n||null,Mi(this,Ji,t),Mi(this,Xi,Vi(e))}var Ki="EMAIL_SIGNIN",qi="email",Hi="newEmail",Bi="requestType",Gi="email",Wi="fromEmail",Xi="data",Ji="operation";function Yi(t,e){this.code=$i+t,this.message=e||Zi[t]||""}function zi(t){var e=t&&t.code;return e?new Yi(e.substring($i.length),t.message):null}k(Yi,Error),Yi.prototype.A=function(){return{code:this.code,message:this.message}},Yi.prototype.toJSON=function(){return this.A()};var $i="auth/",Zi={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Qi(t){var e=wn(t=In(t),tr)||null,n=wn(t,er)||null,i=wn(t,rr)||null;if(i=i&&ar[i]||null,!e||!n||!i)throw new Yi("argument-error",tr+", "+er+"and "+rr+" are required in a valid action code URL.");ji(this,{apiKey:e,operation:i,code:n,continueUrl:wn(t,nr)||null,languageCode:wn(t,ir)||null,tenantId:wn(t,or)||null})}var tr="apiKey",er="oobCode",nr="continueUrl",ir="languageCode",rr="mode",or="tenantId",ar={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Ki,verifyEmail:"VERIFY_EMAIL"};function sr(t){try{return new Qi(t)}catch(t){return null}}function ur(t){var e=t[dr];if(void 0===e)throw new Yi("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Yi("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[cr];if(n&&"object"==typeof n){e=n[mr];var i=n[pr];if(n=n[vr],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new Yi("argument-error",pr+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Yi("argument-error",vr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Yi("argument-error",mr+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new Yi("missing-android-pkg-name")}}else if(void 0!==n)throw new Yi("argument-error",cr+" property must be a non null object when specified.");if(this.f=null,(e=t[fr])&&"object"==typeof e){if("string"==typeof(e=e[gr])&&e.length)this.f=e;else if(void 0!==e)throw new Yi("argument-error",gr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Yi("argument-error",fr+" property must be a non null object when specified.");if(void 0!==(e=t[lr])&&"boolean"!=typeof e)throw new Yi("argument-error",lr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[hr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Yi("argument-error",hr+" property must be a non empty string when specified.");this.i=t||null}var cr="android",hr="dynamicLinkDomain",lr="handleCodeInApp",fr="iOS",dr="url",pr="installApp",vr="minimumVersion",mr="packageName",gr="bundleId";function br(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var yr=null,wr=null;function Ir(t){var e="";return function(i,t){function e(t){for(;r<i.length;){var e=i.charAt(r++),n=wr[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!yr){yr={},wr={};for(var t=0;t<65;t++)yr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(wr[yr[t]]=t)&&(wr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var n=e(-1),o=e(0),a=e(64),s=e(64);if(64===s&&-1===n)break;t(n<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Tr(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Er(t){return(t=kr(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Tr(t):null}function kr(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Ir(t))}catch(t){}return null}Tr.prototype.R=function(){return this.c},Tr.prototype.g=function(){return this.b};var Ar,Sr={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Nr(t){for(var e in Sr)if(Sr[e].id===t)return{firebaseEndpoint:(t=Sr[e]).bb,secureTokenEndpoint:t.ib};return null}Ar=Nr("__EID__")?"__EID__":void 0;var Or="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),_r=["client_id","response_type","scope","redirect_uri","state"],Pr={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:_r},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:_r},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:_r},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:Or}};function Rr(t){for(var e in Pr)if(Pr[e].Pa==t)return Pr[e];return null}function Dr(t){var e={};e["facebook.com"]=jr,e["google.com"]=Vr,e["github.com"]=Ur,e["twitter.com"]=Fr;var n=t&&t[Lr];try{if(n)return e[n]?new e[n](t):new Mr(t);if(void 0!==t[Cr])return new xr(t)}catch(t){}return null}var Cr="idToken",Lr="providerId";function xr(t){var e=t[Lr];if(!e&&t[Cr]){var n=Er(t[Cr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Mi(this,"providerId",e),Mi(this,"isNewUser",n)}function Mr(t){xr.call(this,t),Mi(this,"profile",Vi((t=ki(t.rawUserInfo||"{}"))||{}))}function jr(t){if(Mr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ur(t){if(Mr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Mi(this,"username",this.profile&&this.profile.login||null)}function Vr(t){if(Mr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fr(t){if(Mr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Mi(this,"username",t.screenName||null)}function Kr(t){var e=In(t),n=wn(e,"link"),i=wn(In(n),"link");return wn(In(e=wn(e,"deep_link_id")),"link")||e||i||n||t}function qr(){}function Hr(t,n){return t.then(function(t){if(t[Da]){var e=Er(t[Da]);if(!e||n!=e.f)throw new Yi("user-mismatch");return t}throw new Yi("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==$i+"user-not-found"?new Yi("user-mismatch"):t})}function Br(t,e){if(!e)throw new Yi("internal-error","failed to construct a credential");this.a=e,Mi(this,"providerId",t),Mi(this,"signInMethod",t)}function Gr(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Wr(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Br(t.providerId,t.pendingToken)}catch(t){}return null}function Xr(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Mi(this,"idToken",e.idToken),e.accessToken&&Mi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Mi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Yi("internal-error","failed to construct a credential");Mi(this,"accessToken",e.oauthToken),Mi(this,"secret",e.oauthTokenSecret)}Mi(this,"providerId",t),Mi(this,"signInMethod",n)}function Jr(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Cn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Yr(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Xr(t.providerId,e,t.signInMethod)}catch(t){}}return null}function zr(t,e){this.Fc=e||[],ji(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.cb=(Rr(t)||{}).Oa||null,this.ab=null}function $r(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Yi("argument-error",'SAML provider IDs must be prefixed with "saml."');zr.call(this,t,[])}function Zr(t){zr.call(this,t,_r),this.a=[]}function Qr(){Zr.call(this,"facebook.com")}function to(t){if(!t)throw new Yi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Qr).credential({accessToken:e})}function eo(){Zr.call(this,"github.com")}function no(t){if(!t)throw new Yi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new eo).credential({accessToken:e})}function io(){Zr.call(this,"google.com"),this.wa("profile")}function ro(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new io).credential({idToken:n,accessToken:e})}function oo(){zr.call(this,"twitter.com",Or)}function ao(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Yi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Xr("twitter.com",n,"twitter.com")}function so(t,e,n){this.a=t,this.c=e,Mi(this,"providerId","password"),Mi(this,"signInMethod",n===co.EMAIL_LINK_SIGN_IN_METHOD?co.EMAIL_LINK_SIGN_IN_METHOD:co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function uo(t){return t&&t.email&&t.password?new so(t.email,t.password,t.signInMethod):null}function co(){ji(this,{providerId:"password",isOAuthProvider:!1})}function ho(t,e){if(!(e=lo(e)))throw new Yi("argument-error","Invalid email link!");return new so(t,e.code,co.EMAIL_LINK_SIGN_IN_METHOD)}function lo(t){return(t=sr(t=Kr(t)))&&t.operation===Ki?t:null}function fo(t){if(!(t.Ua&&t.Ta||t.Fa&&t.ba))throw new Yi("internal-error");this.a=t,Mi(this,"providerId","phone"),Mi(this,"signInMethod","phone")}function po(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return M(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new fo(n)}return null}function vo(t){return t.a.Fa&&t.a.ba?{temporaryProof:t.a.Fa,phoneNumber:t.a.ba}:{sessionInfo:t.a.Ua,code:t.a.Ta}}function mo(t){try{this.a=t||fl.auth()}catch(t){throw new Yi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ji(this,{providerId:"phone",isOAuthProvider:!1})}function go(t,e){if(!t)throw new Yi("missing-verification-id");if(!e)throw new Yi("missing-verification-code");return new fo({Ua:t,Ta:e})}function bo(t){if(t.temporaryProof&&t.phoneNumber)return new fo({Fa:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ro(o,n);case"facebook.com":return to(n);case"github.com":return no(n);case"twitter.com":return ao(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new Br(e,a):new Xr(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Zr(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(t){return null}}function yo(t){if(!t.isOAuthProvider)throw new Yi("invalid-oauth-provider")}function wo(t,e,n,i,r,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=a||null,this.a=r||null,!this.g&&!this.a)throw new Yi("invalid-auth-event");if(this.g&&this.a)throw new Yi("invalid-auth-event");if(this.g&&!this.f)throw new Yi("invalid-auth-event")}function Io(t){return(t=t||{}).type?new wo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&zi(t.error),t.postBody,t.tenantId):null}function To(){this.b=null,this.a=[]}k(Mr,xr),k(jr,Mr),k(Ur,Mr),k(Vr,Mr),k(Fr,Mr),Br.prototype.na=function(t){return za(t,Gr(this))},Br.prototype.b=function(t,e){var n=Gr(this);return n.idToken=e,$a(t,n)},Br.prototype.f=function(t,e){return Hr(Za(t,Gr(this)),e)},Br.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Xr.prototype.na=function(t){return za(t,Jr(this))},Xr.prototype.b=function(t,e){var n=Jr(this);return n.idToken=e,$a(t,n)},Xr.prototype.f=function(t,e){return Hr(Za(t,Jr(this)),e)},Xr.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},zr.prototype.Ea=function(t){return this.zb=W(t),this},k($r,zr),k(Zr,zr),Zr.prototype.wa=function(t){return V(this.a,t)||this.a.push(t),this},Zr.prototype.Hb=function(){return H(this.a)},Zr.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Yi("argument-error","credential failed: must provide the ID token and/or the access token.");return new Xr(this.providerId,n,this.providerId)},k(Qr,Zr),Mi(Qr,"PROVIDER_ID","facebook.com"),Mi(Qr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),k(eo,Zr),Mi(eo,"PROVIDER_ID","github.com"),Mi(eo,"GITHUB_SIGN_IN_METHOD","github.com"),k(io,Zr),Mi(io,"PROVIDER_ID","google.com"),Mi(io,"GOOGLE_SIGN_IN_METHOD","google.com"),k(oo,zr),Mi(oo,"PROVIDER_ID","twitter.com"),Mi(oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),so.prototype.na=function(t){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Ns(t,as,{email:this.a,oobCode:this.c}):Ns(t,Es,{email:this.a,password:this.c})},so.prototype.b=function(t,e){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Ns(t,ss,{idToken:e,email:this.a,oobCode:this.c}):Ns(t,gs,{idToken:e,email:this.a,password:this.c})},so.prototype.f=function(t,e){return Hr(this.na(t),e)},so.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},ji(co,{PROVIDER_ID:"password"}),ji(co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ji(co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fo.prototype.na=function(t){return t.Va(vo(this))},fo.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Ns(t,As,n)},fo.prototype.f=function(t,e){var n=vo(this);return n.operation="REAUTH",Hr(t=Ns(t,Ss,n),e)},fo.prototype.A=function(){var t={providerId:"phone"};return this.a.Ua&&(t.verificationId=this.a.Ua),this.a.Ta&&(t.verificationCode=this.a.Ta),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.ba&&(t.phoneNumber=this.a.ba),t},mo.prototype.Va=function(e,n){var i=this.a.b;return Yt(n.verify()).then(function(t){if(!h(t))throw new Yi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return function(t,e){return Ns(t,vs,e)}(i,{phoneNumber:e,recaptchaToken:t}).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new Yi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},ji(mo,{PROVIDER_ID:"phone"}),ji(mo,{PHONE_SIGN_IN_METHOD:"phone"}),wo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},wo.prototype.R=function(){return this.h},wo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Eo,ko=null;function Ao(t){var e="unauthorized-domain",n=void 0,i=In(t);t=i.b,"chrome-extension"==(i=i.f)?n=Lt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=Lt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Yi.call(this,e,n)}function So(t,e,n){Yi.call(this,t,n),(t=e||{}).Ab&&Mi(this,"email",t.Ab),t.ba&&Mi(this,"phoneNumber",t.ba),t.credential&&Mi(this,"credential",t.credential),t.Qb&&Mi(this,"tenantId",t.Qb)}function No(t){if(t.code){var e=t.code||"";0==e.indexOf($i)&&(e=e.substring($i.length));var n={credential:bo(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Yi(e,t.message||void 0);return new So(e,n,t.message)}return null}function Oo(){}function _o(t){return t.c||(t.c=t.b())}function Po(){}function Ro(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Do(){}function Co(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.fc,this),this.a.onerror=I(this.Ib,this),this.a.onprogress=I(this.gc,this),this.a.ontimeout=I(this.kc,this)}function Lo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function xo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Mo(t){this.f=t,this.b=this.c=this.a=null}function jo(t,e){this.name=t,this.value=e}k(Ao,Yi),k(So,Yi),So.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&J(t,e),t},So.prototype.toJSON=function(){return this.A()},Oo.prototype.c=null,k(Po,Oo),Po.prototype.a=function(){var t=Ro(this);return t?new ActiveXObject(t):new XMLHttpRequest},Po.prototype.b=function(){var t={};return Ro(this)&&(t[0]=!0,t[1]=!0),t},Eo=new Po,k(Do,Oo),Do.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Co;throw Error("Unsupported browser")},Do.prototype.b=function(){return{}},(t=Co.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Lo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Lo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Lo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},xo.prototype.a=null,xo.prototype.reset=function(t,e,n,i,r){delete this.a},jo.prototype.toString=function(){return this.name};var Uo=new jo("SEVERE",1e3),Vo=new jo("WARNING",900),Fo=new jo("CONFIG",700),Ko=new jo("FINE",500);Mo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(O("Root logger has no level set."),null)}(this).value)for(m(e)&&(e=e()),t=new xo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var qo,Ho={},Bo=null;function Go(t){var e;if(Bo||(Bo=new Mo(""),(Ho[""]=Bo).c=Fo),!(e=Ho[t])){e=new Mo(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=Go(t.substr(0,n))).b||(n.b={}),(n.b[i]=e).a=n,Ho[t]=e}return e}function Wo(t,e){t&&t.log(Ko,e,void 0)}function Xo(t){this.f=t}function Jo(t){nn.call(this),this.o=t,this.readyState=Yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Go("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}k(Xo,Oo),Xo.prototype.a=function(){return new Jo(this.f)},Xo.prototype.b=(qo={},function(){return qo}),k(Jo,nn);var Yo=0;function zo(t){t.c.read().then(t.ec.bind(t)).catch(t.Ma.bind(t))}function $o(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Zo(t)}function Zo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Qo(t){nn.call(this),this.headers=new ln,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ta,this.v=this.P=!1}(t=Jo.prototype).open=function(t,e){if(this.readyState!=Yo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Zo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Ma.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,$o(this,!1)),this.readyState=Yo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Zo(this)),this.a&&(this.readyState=3,Zo(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,zo(this)):t.text().then(this.ic.bind(this),this.Ma.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?$o(this,!0):Zo(this),3==this.readyState&&zo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,$o(this,!0))},t.hc=function(t){this.a&&(this.response=t,$o(this,!0))},t.Ma=function(t){var e=this.h;e&&e.log(Vo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&$o(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},k(Qo,nn);var ta="";Qo.prototype.b=Go("goog.net.XhrIo");var ea=/^https?$/i,na=["POST","PUT"];function ia(e,t,n,i,r){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Eo.a(),e.w=e.B?_o(e.B):_o(Eo),e.a.onreadystatechange=I(e.Lb,e);try{Wo(e.b,fa(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return Wo(e.b,fa(e,"Error opening Xhr: "+t.message)),void oa(e,t)}t=i||"";var o=new ln(e.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||h(t))M(t,e,void 0);else for(var n=hn(t),i=cn(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=ra,n=t.length,i=h(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return e<0?null:h(t)?t.charAt(e):t[e]}(o.X()),i=l.FormData&&t instanceof l.FormData,!V(na,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{ca(e),0<e.g&&(e.v=function(t){return me&&Ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(e.a),Wo(e.b,fa(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=I(e.Ga,e)):e.o=sn(e.Ga,e.g,e)),Wo(e.b,fa(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Wo(e.b,fa(e,"Send error: "+t.message)),oa(e,t)}}function ra(t){return"content-type"==t.toLowerCase()}function oa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,aa(t),ua(t)}function aa(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function sa(e){if(e.c&&void 0!==u)if(e.w[1]&&4==ha(e)&&2==la(e))Wo(e.b,fa(e,"Local request error detected and ignored"));else if(e.i&&4==ha(e))sn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==ha(e)){Wo(e.b,fa(e,"Request complete")),e.c=!1;try{var t,n=la(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(t=i)){var r;if(r=0===n){var o=String(e.l).match(pn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}r=!ea.test(o?o.toLowerCase():"")}t=r}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<ha(e)?e.a.statusText:""}catch(t){Wo(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+la(e)+"]",aa(e)}}finally{ua(e)}}}function ua(e,t){if(e.a){ca(e);var n=e.a,i=e.w[0]?d:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){(e=e.b)&&e.log(Uo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ca(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function ha(t){return t.a?t.a.readyState:0}function la(t){try{return 2<ha(t)?t.a.status:-1}catch(t){return-1}}function fa(t,e){return e+" ["+t.O+" "+t.l+" "+la(t)+"]"}function da(t){var e=ka;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function pa(t,e,n){t.a=!0,t.c=n,t.f=!e,ba(t)}function va(t){if(t.a){if(!t.u)throw new ya(t);t.u=!1}}function ma(t,e,n,i){t.g.push([e,n,i]),t.a&&ba(t)}function ga(t){return U(t.g,function(t){return m(t[1])})}function ba(e){if(e.h&&e.a&&ga(e)){var n=e.h,i=Ta[n];i&&(l.clearTimeout(i.a),delete Ta[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=i=!1;e.g.length&&!e.i;){var r=e.g.shift(),o=r[0],a=r[1];if(r=r[2],o=e.f?a:o)try{var s=o.call(r||e.o,n);void 0!==s&&(e.f=e.f&&(s==n||s instanceof Error),e.c=n=s),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ga(e)||(i=!0)}}e.c=n,t&&(s=I(e.m,e,!0),t=I(e.m,e,!1),n instanceof da?(ma(n,s,t),n.w=!0):n.then(s,t)),i&&(n=new Ia(n),Ta[n.a]=n,e.h=n.a)}function ya(){S.call(this)}function wa(){S.call(this)}function Ia(t){this.a=l.setTimeout(I(this.c,this),0),this.b=t}(t=Qo.prototype).Ga=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Wo(this.b,fa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Wo(this.b,fa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ua(this))},t.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ua(this,!0)),Qo.qb.xa.call(this)},t.Lb=function(){this.ta||(this.J||this.i||this.f?sa(this):this.yc())},t.yc=function(){sa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Uo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Wo(this.b,"Can not get response: "+t.message),null}},da.prototype.cancel=function(t){if(this.a)this.c instanceof da&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new wa(this),va(this),pa(this,!1,t))}},da.prototype.m=function(t,e){this.i=!1,pa(this,t,e)},da.prototype.then=function(t,e,n){var i,r,o=new qt(function(t,e){i=t,r=e});return ma(this,i,function(t){t instanceof wa?o.cancel():r(t)}),o.then(t,e,n)},da.prototype.$goog_Thenable=!0,k(ya,S),ya.prototype.message="Deferred has already fired",ya.prototype.name="AlreadyCalledError",k(wa,S),wa.prototype.message="Deferred was canceled",wa.prototype.name="CanceledError",Ia.prototype.c=function(){throw delete Ta[this.a],this.b};var Ta={};function Ea(t){var e,n=document,i=et(t).toString(),r=document.createElement("SCRIPT"),o={Nb:r,Ga:void 0},a=new da(o);return e=window.setTimeout(function(){Aa(r,!0);var t=new Oa(Na,"Timeout reached for loading script "+i);va(a),pa(a,!1,t)},5e3),o.Ga=e,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Aa(r,!1,e),va(a),pa(a,!0,null))},r.onerror=function(){Aa(r,!0,e);var t=new Oa(Sa,"Error while loading script "+i);va(a),pa(a,!1,t)},J(o={},{type:"text/javascript",charset:"UTF-8"}),Kn(r,o),function(t,e){L(t,"HTMLScriptElement"),t.src=et(e),null===f&&(f=(e=(e=l.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""),(e=f)&&t.setAttribute("nonce",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),a}function ka(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Aa(t,!0,this.Ga)}}function Aa(t,e,n){null!=n&&l.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Sa=0,Na=1;function Oa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function _a(t){this.f=t}function Pa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Ca,this.g=W(t.secureTokenHeaders||La),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||xa,this.a=W(t.firebaseHeaders||Ma),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==ui(),!(n=l.XMLHttpRequest||n&&fl.INTERNAL.node&&fl.INTERNAL.node.XMLHttpRequest)&&!si())throw new Yi("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,si()?this.f=new Xo(self):ci()?this.f=new _a(n):this.f=new Do,this.b=null}k(Oa,S),k(_a,Oo),_a.prototype.a=function(){return new this.f},_a.prototype.b=function(){return{}};var Ra,Da="idToken",Ca=new Oi(3e4,6e4),La={"Content-Type":"application/x-www-form-urlencoded"},xa=new Oi(3e4,6e4),Ma={"Content-Type":"application/json"};function ja(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ua(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Va(t,e,n,i,r,o,a){(t=function(){var t=vi();return!((t=fi(t)!=li?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30)&&(!me||!Ae||9<Ae)}()||si()?I(t.o,t):(Ra=Ra||new qt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[Ka]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ma(t,null,e,void 0)}(Ea(nt(Fa,{onload:Ka})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),I(t.m,t)))(e,n,i,r,o,a)}Pa.prototype.R=function(){return this.b},Pa.prototype.o=function(t,n,e,i,r,o){if(si()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new Yi("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Qo(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}rn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Wo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),on(a,"ready",function(){s&&clearTimeout(s),le(this)}),on(a,"timeout",function(){s&&clearTimeout(s),le(this),n&&n(null)}),ia(a,t,e,i,r)};var Fa=new Y(Z,"https://apis.google.com/js/client.js?onload=%{onload}"),Ka="__fcb"+Math.floor(1e6*Math.random()).toString();function qa(t){if(!h(t=t.email)||!ii.test(t))throw new Yi("invalid-email")}function Ha(t){"email"in t&&qa(t)}function Ba(t){if(!t[Da])throw new Yi("internal-error")}function Ga(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Yi("internal-error")}else{if(!t.sessionInfo)throw new Yi("missing-verification-id");if(!t.code)throw new Yi("missing-verification-code")}}Pa.prototype.m=function(t,n,i,r,o){var a=this;Ra.then(function(){window.gapi.client.setApiKey(a.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:i,body:r,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Pa.prototype.ob=function(){return Ns(this,bs,{})},Pa.prototype.rb=function(t,e){return Ns(this,ms,{idToken:t,email:e})},Pa.prototype.sb=function(t,e){return Ns(this,gs,{idToken:t,password:e})};var Wa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Xa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Yi("internal-error")}function Ja(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(xn(t=new Rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ya(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=No(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=No(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=No(t)):t.errorMessage&&(e=Os(t.errorMessage)),e)throw e;if(!t[Da])throw new Yi("internal-error")}function za(t,e){return e.returnIdpCredential=!0,Ns(t,ys,e)}function $a(t,e){return e.returnIdpCredential=!0,Ns(t,Is,e)}function Za(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ns(t,ws,e)}function Qa(t){if(!t.oobCode)throw new Yi("invalid-action-code")}(t=Pa.prototype).tb=function(t,i){var r={idToken:t},o=[];return B(Wa,function(t,e){var n=i[e];null===n?o.push(t):e in i&&(r[e]=n)}),o.length&&(r.deleteAttribute=o),Ns(this,ms,r)},t.kb=function(t,e){return J(t={requestType:"PASSWORD_RESET",email:t},e),Ns(this,ls,t)},t.lb=function(t,e){return J(t={requestType:"EMAIL_SIGNIN",email:t},e),Ns(this,cs,t)},t.jb=function(t,e){return J(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ns(this,hs,t)},t.Va=function(t){return Ns(this,ks,t)},t.$a=function(t,e){return Ns(this,ps,{oobCode:t,newPassword:e})},t.Ka=function(t){return Ns(this,es,{oobCode:t})},t.Xa=function(t){return Ns(this,ts,{oobCode:t})};var ts={endpoint:"setAccountInfo",D:Qa,fa:"email",F:!0},es={endpoint:"resetPassword",D:Qa,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Yi("internal-error")},F:!0},ns={endpoint:"signupNewUser",D:function(t){if(qa(t),!t.password)throw new Yi("weak-password")},K:Ba,T:!0,F:!0},is={endpoint:"createAuthUri",F:!0},rs={endpoint:"deleteAccount",V:["idToken"]},os={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!p(t.deleteProvider))throw new Yi("internal-error")}},as={endpoint:"emailLinkSignin",V:["email","oobCode"],D:qa,K:Ba,T:!0,F:!0},ss={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:qa,K:Ba,T:!0},us={endpoint:"getAccountInfo"},cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Yi("internal-error");qa(t)},fa:"email",F:!0},hs={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Yi("internal-error")},fa:"email",F:!0},ls={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Yi("internal-error");qa(t)},fa:"email",F:!0},fs={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ds={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Yi("internal-error")}},ps={endpoint:"resetPassword",D:Qa,fa:"email",F:!0},vs={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:Ha,T:!0},gs={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ha(t),!t.password)throw new Yi("weak-password")},K:Ba,T:!0},bs={endpoint:"signupNewUser",K:Ba,T:!0,F:!0},ys={endpoint:"verifyAssertion",D:Xa,Qa:Ja,K:Ya,T:!0,F:!0},ws={endpoint:"verifyAssertion",D:Xa,Qa:Ja,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Yi("user-not-found");if(t.errorMessage)throw Os(t.errorMessage);if(!t[Da])throw new Yi("internal-error")},T:!0,F:!0},Is={endpoint:"verifyAssertion",D:function(t){if(Xa(t),!t.idToken)throw new Yi("internal-error")},Qa:Ja,K:Ya,T:!0},Ts={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Yi("invalid-custom-token")},K:Ba,T:!0,F:!0},Es={endpoint:"verifyPassword",D:function(t){if(qa(t),!t.password)throw new Yi("wrong-password")},K:Ba,T:!0,F:!0},ks={endpoint:"verifyPhoneNumber",D:Ga,K:Ba,F:!0},As={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Yi("internal-error");Ga(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",No(t);Ba(t)}},Ss={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ga,K:Ba,F:!0};function Ns(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.V))return zt(new Yi("internal-error"));var i,r=e.Kb||"POST";return Yt(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,i,r,o,n){var a=In(t.h+e);yn(a,"key",t.c),n&&yn(a,"cb",E().toString());var s="GET"==i;if(s)for(var u in r)r.hasOwnProperty(u)&&yn(a,u,r[u]);return new qt(function(e,n){Va(t,a.toString(),function(t){t?t.error?n(_s(t,o||{})):e(t):n(new Yi("network-request-failed"))},i,s?void 0:Gn(Ei(r)),t.a,t.i.get())})}(t,e.endpoint,r,n,e.Yb,e.wb||!1)}).then(function(t){return i=t,e.Qa?e.Qa(n,i):i}).then(e.K).then(function(){if(!e.fa)return i;if(!(e.fa in i))throw new Yi("internal-error");return i[e.fa]})}function Os(t){return _s({error:{errors:[{message:t}],code:400,message:t}})}function _s(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new Yi(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",J(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new Yi(i[r],e);return!e&&t&&(e=Ti(t)),new Yi("internal-error",e)}function Ps(t){this.b=t,this.a=null,this.fb=function(o){return(Ls=Ls||new qt(function(t,e){function n(){Ni(),mi("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ni(),e(Error("Network Error"))},timeout:Ds.get()})}if(mi("gapi.iframes.Iframe"))t();else if(mi("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[i]=function(){mi("gapi.load")?n():e(Error("Network Error"))},Yt(Ea(i=nt(Rs,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Ls=null,t})).then(function(){return new qt(function(i,r){mi("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),i()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){r(Error("Network Error"))},Cs.get());t.ping(e).then(e,function(){r(Error("Network Error"))})})})})}(this)}var Rs=new Y(Z,"https://apis.google.com/js/api.js?onload=%{onload}"),Ds=new Oi(3e4,6e4),Cs=new Oi(5e3,15e3),Ls=null;function xs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),yn(this.a,"apiKey",this.g),yn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ms(t,e,n,i,r){this.o=t,this.m=e,this.c=n,this.u=i,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function js(t){try{return fl.app(t).auth().Aa()}catch(t){return[]}}function Us(t,e,n,i,r){this.u=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Vs(t){var s=$n();return function(t){return Ns(t,fs,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var e=In(s),n=e.f;e=e.b;for(var i=0;i<t.length;i++){var r=t[i],o=e,a=n;if(o=0==r.indexOf("chrome-extension://")?In(r).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(ni.test(r)?o==r:(r=r.split(".").join("\\."),new RegExp("^(.+\\."+r+"|"+r+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Ao($n())})}function Fs(r){return r.l||(r.l=ri().then(function(){if(!r.o){var t=r.c,e=r.h,n=js(r.b),i=new xs(r.u,r.f,r.b);i.f=t,i.b=e,i.c=H(n||[]),r.o=i.toString()}r.i=new Ps(r.o),function(i){if(!i.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Io(t.authEvent),e=0;e<i.g.length;e++)n=i.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Yt(e)}return e.status="ERROR",Yt(e)})}(r)})),r.l}function Ks(t){return t.m||(t.v=t.c?pi(t.c,js(t.b)):null,t.m=new Pa(t.f,Nr(t.h),t.v)),t.m}function qs(t,e,n,i,r,o,a,s,u,c,h){return(t=new Ms(t,e,n,i,r)).l=o,t.g=a,t.i=s,t.b=W(u||null),t.f=c,t.nb(h).toString()}function Hs(t){if(this.a=t||fl.INTERNAL.reactNative&&fl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Yi("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Bs(t){this.b=t,this.a={},this.f=I(this.c,this)}xs.prototype.toString=function(){return this.f?yn(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?yn(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?yn(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Ms.prototype.nb=function(t){return this.h=t,this},Ms.prototype.toString=function(){var t=Tn(this.o,"/__/auth/handler");if(yn(t,"apiKey",this.m),yn(t,"appName",this.c),yn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=fl.app(this.c).auth().ha()}catch(t){n=null}for(var i in e.ab=n,yn(t,"providerId",this.a.providerId),n=Ei((e=this.a).zb))n[i]=n[i].toString();i=e.Fc,n=W(n);for(var r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}e.cb&&e.ab&&!n[e.cb]&&(n[e.cb]=e.ab),G(n)||yn(t,"customParameters",Ti(n))}if("function"==typeof this.a.Hb&&((e=this.a.Hb()).length&&yn(t,"scopes",e.join(","))),this.l?yn(t,"redirectUrl",this.l):Ln(t.a,"redirectUrl"),this.g?yn(t,"eventId",this.g):Ln(t.a,"eventId"),this.i?yn(t,"v",this.i):Ln(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!wn(t,a)&&yn(t,a,this.b[a]);return this.h?yn(t,"tid",this.h):Ln(t.a,"tid"),this.f?yn(t,"eid",this.f):Ln(t.a,"eid"),(a=js(this.c)).length&&yn(t,"fw",a.join(",")),t.toString()},(t=Us.prototype).Fb=function(e,n,t){var i=new Yi("popup-closed-by-user"),r=new Yi("web-storage-unsupported"),o=this,a=!1;return this.ia().then(function(){(function(t){var e={type:"webStorageSupport"};return Fs(t).then(function(){return function(e,n){return e.fb.then(function(){return new qt(function(t){e.a.send(n.type,n,t,mi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(t){t||(e&&ti(e),n(r),a=!0)})}).s(function(){}).then(function(){if(!a)return function(n){return new qt(function(e){return function t(){un(2e3).then(function(){if(n&&!n.closed)return t();e()})}()})}(e)}).then(function(){if(!a)return un(t).then(function(){n(i)})})},t.Ob=function(){var t=vi();return!Ii(t)&&!Si(t)},t.Jb=function(){return!1},t.Db=function(e,t,n,i,r,o,a,s){if(!e)return zt(new Yi("popup-blocked"));if(a&&!Ii())return this.ia().s(function(t){ti(e),r(t)}),i(),Yt();this.a||(this.a=Vs(Ks(this)));var u=this;return this.a.then(function(){var t=u.ia().s(function(t){throw ti(e),r(t),t});return i(),t}).then(function(){yo(n),a||Zn(qs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Eb=function(t,e,n,i){this.a||(this.a=Vs(Ks(this)));var r=this;return this.a.then(function(){yo(e),Zn(qs(r.u,r.f,r.b,t,e,$n(),n,r.c,void 0,r.h,i))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ia=function(){var t=this;return Fs(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Yi("network-request-failed")})},t.Rb=function(){return!0},t.ya=function(t){this.g.push(t)},t.La=function(e){K(this.g,function(t){return t==e})},(t=Hs.prototype).get=function(t){return Yt(this.a.getItem(t)).then(function(t){return t&&ki(t)})},t.set=function(t,e){return Yt(this.a.setItem(t,Ti(e)))},t.S=function(t){return Yt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var Gs,Ws=[];function Xs(t,e,n){G(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Js(t){this.a=t}function Ys(t){this.c=t,this.b=!1,this.a=[]}function zs(i,t,e,n){var r,o,a,s,u=e||{},c=null;if(i.b)return zt(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new qt(function(e,n){l?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},i.a.push(c),l.port1.addEventListener("message",o),i.c.postMessage({eventType:t,eventId:r,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return $s(i,c),t}).s(function(t){throw $s(i,c),t})}function $s(t,e){if(e){var n=e.messageChannel,i=e.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),K(t.a,function(t){return t==e})}}function Zs(){if(!eu())throw new Yi("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var i=this;si()&&self?(this.l=function(){var e=si()?self:null;if(M(Ws,function(t){t.b==e&&(n=t)}),!n){var n=new Bs(e);Ws.push(n)}return n}(),Xs(this.l,"keyChanged",function(t,n){return au(i).then(function(e){return 0<e.length&&M(i.a,function(t){t(e)}),{keyProcessed:V(e,n.key)}})}),Xs(this.l,"ping",function(){return Yt(["keyChanged"])})):function(){var t=l.navigator;return t&&t.serviceWorker?Yt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Yt(null)}().then(function(t){(i.h=t)&&(i.g=new Ys(new Js(t)),zs(i.g,"ping",null,!0).then(function(t){t[0].fulfilled&&V(t[0].value,"keyChanged")&&(i.o=!0)}).s(function(){}))})}function Qs(i){return new qt(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):function(i){return new qt(function(t,e){var n=i.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})}(i).then(function(){return Qs(i)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function tu(t){return t.m||(t.m=Qs(t)),t.m}function eu(){try{return!!l.indexedDB}catch(t){return!1}}function nu(t){return t.objectStore("firebaseLocalStorage")}function iu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ru(t){return new qt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function ou(t,e){return t.g&&t.h&&function(){var t=l.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?zs(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):Yt()}function au(i){return tu(i).then(function(t){var r=nu(iu(t,!1));return r.getAll?ru(r.getAll()):new qt(function(e,n){var i=[],t=r.openCursor();t.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==i.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(i.c,e),i.c=e}return n})}function su(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function uu(t){var i=this,r=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Yt().then(function(){if(eu()){var e=Ai(),n="__sak"+e;return Gs=Gs||new Zs,(r=Gs).set(n,e).then(function(){return r.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return r.S(n)}).then(function(){return r}).s(function(){return i.c})}return i.c}).then(function(t){return i.type=t.type,t.$(function(e){M(i.a,function(t){t(e)})}),t})}function cu(){this.a={},this.type="inMemory"}function hu(){if(!function(){var t="Node"==ui();if(!(t=lu()||t&&fl.INTERNAL.node&&fl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==ui())throw new Yi("internal-error","The LocalStorage compatibility library was not found.");throw new Yi("web-storage-unsupported")}this.a=lu()||fl.INTERNAL.node.localStorage,this.type="localStorage"}function lu(){try{var t=l.localStorage,e=Ai();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function fu(){this.type="nullStorage"}function du(){if(!function(){var t="Node"==ui();if(!(t=pu()||t&&fl.INTERNAL.node&&fl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==ui())throw new Yi("internal-error","The SessionStorage compatibility library was not found.");throw new Yi("web-storage-unsupported")}this.a=pu()||fl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function pu(){try{var t=l.sessionStorage,e=Ai();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function vu(){var t={};t.Browser=bu,t.Node=yu,t.ReactNative=wu,t.Worker=Iu,this.a=t[ui()]}Bs.prototype.c=function(n){var i=n.data.eventType,r=n.data.eventId,t=this.a[i];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:r,eventType:i,response:null});var e=[];M(t,function(t){e.push(Yt().then(function(){return t(n.origin,n.data.data)}))}),Zt(e).then(function(t){var e=[];M(t,function(t){e.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})}),M(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:e})})}},Js.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ys.prototype.close=function(){for(;0<this.a.length;)$s(this,this.a[0]);this.b=!0},(t=Zs.prototype).set=function(n,i){var r,o=!1,a=this;return tu(this).then(function(t){return ru((t=nu(iu(r=t,!0))).get(n))}).then(function(t){var e=nu(iu(r,!0));return t?(t.value=i,ru(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=i,ru(e.add(t)))}).then(function(){return a.c[n]=i,ou(a,n)}).ka(function(){o&&a.b--})},t.get=function(e){return tu(this).then(function(t){return ru(nu(iu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.S=function(e){var n=!1,i=this;return tu(this).then(function(t){return n=!0,i.b++,ru(nu(iu(t,!0)).delete(e))}).then(function(){return delete i.c[e],ou(i,e)}).ka(function(){n&&i.b--})},t.$=function(t){0==this.a.length&&function(t){su(t),function e(){t.f=setTimeout(function(){t.i=au(t).then(function(e){0<e.length&&M(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ea=function(e){K(this.a,function(t){return t==e}),0==this.a.length&&su(this)},(t=uu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.S=function(e){return this.b.then(function(t){return t.S(e)})},t.$=function(t){this.a.push(t)},t.ea=function(e){K(this.a,function(t){return t==e})},(t=cu.prototype).get=function(t){return Yt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Yt()},t.S=function(t){return delete this.a[t],Yt()},t.$=function(){},t.ea=function(){},(t=hu.prototype).get=function(t){var e=this;return Yt().then(function(){return ki(e.a.getItem(t))})},t.set=function(e,n){var i=this;return Yt().then(function(){var t=Ti(n);null===t?i.S(e):i.a.setItem(e,t)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(t){l.window&&Be(l.window,"storage",t)},t.ea=function(t){l.window&&Xe(l.window,"storage",t)},(t=fu.prototype).get=function(){return Yt(null)},t.set=function(){return Yt()},t.S=function(){return Yt()},t.$=function(){},t.ea=function(){},(t=du.prototype).get=function(t){var e=this;return Yt().then(function(){return ki(e.a.getItem(t))})},t.set=function(e,n){var i=this;return Yt().then(function(){var t=Ti(n);null===t?i.S(e):i.a.setItem(e,t)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(){},t.ea=function(){};var mu,gu,bu={C:hu,Sa:du},yu={C:hu,Sa:du},wu={C:Hs,Sa:fu},Iu={C:hu,Sa:fu},Tu={$c:"local",NONE:"none",bd:"session"};function Eu(){var t=!(Si(vi())||!ai()),e=Ii(),n=gi();this.m=t,this.h=e,this.l=n,this.a={},t=mu=mu||new vu;try{this.g=!zn()&&Ri()||!l.indexedDB?new t.a.C:new uu(si()?new cu:new t.a.C)}catch(t){this.g=new cu,this.h=!0}try{this.i=new t.a.Sa}catch(t){this.i=new cu}this.u=new cu,this.f=I(this.Pb,this),this.b={}}function ku(){return gu=gu||new Eu}function Au(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Su(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Nu(t,e,n){return n=Su(e,n),"local"==e.C&&(t.b[n]=null),Au(t,e.C).S(n)}function Ou(t){t.c&&(clearInterval(t.c),t.c=null)}function _u(t){this.a=t,this.b=ku()}(t=Eu.prototype).get=function(t,e){return Au(this,t.C).get(Su(t,e))},t.set=function(e,t,n){var i=Su(e,n),r=this,o=Au(this,e.C);return o.set(i,t).then(function(){return o.get(i)}).then(function(t){"local"==e.C&&(r.b[i]=t)})},t.addListener=function(t,e,n){t=Su(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),G(this.a)&&(Au(this,"local").$(this.f),this.h||(zn()||!Ri())&&l.indexedDB||!this.l||function(i){Ou(i),i.c=setInterval(function(){for(var t in i.a){var e=l.localStorage.getItem(t),n=i.b[t];e!=n&&(i.b[t]=e,e=new Ce({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),i.Pb(e))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Su(t,e),this.a[t]&&(K(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),G(this.a)&&(Au(this,"local").ea(this.f),Ou(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=l.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.Za(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Au(this,"local").ea(this.f):Ou(this),this.m)if(n=l.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?l.localStorage.setItem(e,i):l.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.Za(e))},me&&Ae&&10==Ae&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else M(t,I(this.Za,this))},t.Za=function(t){this.a[t]&&M(this.a[t],function(t){t()})};var Pu,Ru={name:"authEvent",C:"local"};function Du(){this.a=ku()}function Cu(t,e){this.b=Lu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0!==Pu||(Pu=l.Int32Array?new Int32Array(Ku):Ku),this.reset()}k(Cu,function(){this.b=-1});for(var Lu=64,xu=Lu-1,Mu=[],ju=0;ju<xu;ju++)Mu[ju]=0;var Uu=q(128,Mu);function Vu(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;e<64;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|Pu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=r,r=i,i=a+f|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Fu(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if(h(e))for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(Vu(t),r=0);else{if(!v(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(Vu(t),r=0)}}t.c=r,t.g+=n}Cu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):H(this.h)};var Ku=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function qu(){Cu.call(this,8,Hu)}k(qu,Cu);var Hu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Bu(t,e,n,i,r){this.u=t,this.i=e,this.l=n,this.m=i||null,this.o=r||null,this.h=e+":"+n,this.v=new Du,this.g=new _u(this.h),this.f=null,this.b=[],this.a=this.c=null}function Gu(t){return new Yi("invalid-cordova-configuration",t)}function Wu(t){var e=new qu;Fu(e,t),t=[];var n=8*e.g;e.c<56?Fu(e,Uu,56-e.c):Fu(e,Uu,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(Vu(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return j(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function Xu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ju(i){return i.f||(i.f=i.ia().then(function(){return new qt(function(n){i.ya(function t(e){return n(e),i.La(t),!1}),function(r){function e(i){t=!0,n&&n.cancel(),Yu(r).then(function(t){var e=o;if(t&&i&&i.url){var n=null;-1!=(e=Kr(i.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=ki(wn(n=In(e),"firebaseError")||null))?zi(n):null)?new wo(t.c,t.b,null,null,n,null,t.R()):new wo(t.c,t.b,e,t.f,null,null,t.R())),e=n||o}Xu(r,e)})}var o=new wo("unknown",null,null,null,new Yi("no-auth-event")),t=!1,n=un(500).then(function(){return Yu(r).then(function(){t||Xu(r,o)})}),i=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(mi("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof i)try{i(t)}catch(t){console.error(t)}},ko=ko||new To,function(t){var n=ko;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=mi("universalLinks.subscribe",l))&&t(null,n.b))}(e)}(i)})})),i.f}function Yu(e){var n=null;return function(t){return t.b.get(Ru,t.a).then(function(t){return Io(t)})}(e.g).then(function(t){return n=t,Nu((t=e.g).b,Ru,t.a)}).then(function(){return n})}function zu(t){this.a=t,this.b=ku()}(t=Bu.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(oi(void 0)?ri().then(function(){return new qt(function(t,e){var n=l.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):zt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof mi("universalLinks.subscribe",l))throw Gu("cordova-universal-links-plugin-fix is not installed");if(void 0===mi("BuildInfo.packageName",l))throw Gu("cordova-plugin-buildinfo is not installed");if("function"!=typeof mi("cordova.plugins.browsertab.openUrl",l))throw Gu("cordova-plugin-browsertab is not installed");if("function"!=typeof mi("cordova.InAppBrowser.open",l))throw Gu("cordova-plugin-inappbrowser is not installed")},function(){throw new Yi("cordova-not-ready")})},t.Fb=function(t,e){return e(new Yi("operation-not-supported-in-this-environment")),Yt()},t.Db=function(){return zt(new Yi("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,i){if(this.c)return zt(new Yi("redirect-operation-pending"));var r=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=Yt().then(function(){return yo(e),Ju(r)}).then(function(){return function(n,t,e,i,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new wo(t,i,null,o,new Yi("no-auth-event"),null,r),s=mi("BuildInfo.packageName",l);if("string"!=typeof s)throw new Yi("invalid-cordova-configuration");var u=mi("BuildInfo.displayName",l),c={};if(vi().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!vi().toLowerCase().match(/android/))return zt(new Yi("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Wu(o),c.sessionId=o;var h=qs(n.u,n.i,n.l,t,e,null,i,n.m,c,n.o,r);return n.ia().then(function(){var t=n.h;return n.v.a.set(Ru,a.A(),t)}).then(function(){var t=mi("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new Yi("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=mi("cordova.plugins.browsertab.openUrl",l)))throw new Yi("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=mi("cordova.InAppBrowser.open",l)))throw new Yi("invalid-cordova-configuration");t=vi(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(r,t,e,n,i)}).then(function(){return new qt(function(e,t){s=function(){var t=mi("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.ya(s),u=function(){a=a||un(2e3).then(function(){t(new Yi("redirect-cancelled-by-user"))})},c=function(){_i()&&u()},o.addEventListener("resume",u,!1),vi().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return Yu(r).then(function(){throw t})})}).ka(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&r.La(s),r.c=null})},t.ya=function(e){this.b.push(e),Ju(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new wo("unknown",null,null,null,new Yi("no-auth-event")),e(t))})},t.La=function(e){K(this.b,function(t){return t==e})};var $u={name:"pendingRedirect",C:"session"};function Zu(t){return Nu(t.b,$u,t.a)}function Qu(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=I(this.o,this),this.b=new dc,this.w=new bc,this.g=new zu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=tc(this.B,this.u,this.m,Ar)}function tc(t,e,n,i){var r=fl.SDK_VERSION||null;return oi()?new Bu(t,e,n,r,i):new Us(t,e,n,r,i)}function ec(e){e.f||(e.f=!0,e.a.ya(e.l));var n=e.a;return e.a.ia().s(function(t){throw e.a==n&&e.reset(),t})}function nc(n){n.a.Ob()&&ec(n).s(function(t){var e=new wo("unknown",null,null,null,new Yi("operation-not-supported-in-this-environment"));uc(t)&&n.o(e)}),n.a.Jb()||pc(n.b)}function ic(n,t){V(n.h,t)||n.h.push(t),n.f||function(t){return t.b.get($u,t.a).then(function(t){return"pending"==t})}(n.g).then(function(t){t?Zu(n.g).then(function(){ec(n).s(function(t){var e=new wo("unknown",null,null,null,new Yi("operation-not-supported-in-this-environment"));uc(t)&&n.o(e)})}):nc(n)}).s(function(){nc(n)})}function rc(t,e){K(t.h,function(t){return t==e})}Qu.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=tc(this.B,this.u,this.m),this.i={}},Qu.prototype.o=function(t){if(!t)throw new Yi("invalid-auth-event");if(6e5<=E()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=E())),e=!0;break}}return pc(this.b),e};var oc=new Oi(2e3,1e4),ac=new Oi(3e4,6e4);function sc(t,e,n,i,r,o,a){return t.a.Db(e,n,i,function(){t.f||(t.f=!0,t.a.ya(t.l))},function(){t.reset()},r,o,a)}function uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function cc(e,t,n,i,r){var o;return function(t){return t.b.set($u,"pending",t.a)}(e.g).then(function(){return e.a.Eb(t,n,i,r).s(function(t){if(uc(t))throw new Yi("operation-not-supported-in-this-environment");return o=t,Zu(e.g).then(function(){throw o})}).then(function(){return e.a.Rb()?new qt(function(){}):Zu(e.g).then(function(){return e.oa()}).then(function(){}).s(function(){})})})}function hc(t,e,n,i,r){return t.a.Fb(i,function(t){e.ja(n,null,t,r)},oc.get())}Qu.prototype.oa=function(){return this.b.oa()};var lc={};function fc(t,e,n){var i=e+":"+n;return lc[i]||(lc[i]=new Qu(t,e,n)),lc[i]}function dc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function pc(t){t.g||(t.g=!0,gc(t,!1,null,null))}function vc(t){t.g&&!t.i&&gc(t,!1,null,null)}function mc(t,e){if(t.b=function(){return Yt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function gc(t,e,n,i){e?i?function(t,e){if(t.b=function(){return zt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):mc(t,n):mc(t,{user:null}),t.f=[],t.c=[]}function bc(){}function yc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function wc(t,e){this.a=e,Mi(this,"verificationId",t)}function Ic(t,e,n,i){return new mo(t).Va(e,n).then(function(t){return new wc(t,i)})}function Tc(t){var e=kr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Yi("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ji(this,{token:t,expirationTime:Pi(1e3*e.exp),authTime:Pi(1e3*e.auth_time),issuedAtTime:Pi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Ec(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function kc(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Ac(t){this.f=t,this.b=this.a=null,this.c=0}function Sc(t,e){var n=e[Da],i=e.refreshToken;e=Nc(e.expiresIn),t.b=n,t.c=e,t.a=i}function Nc(t){return E()+1e3*parseInt(t,10)}function Oc(e,t){return function(t,i){return new qt(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Va(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?n(_s(t)):t.access_token&&t.refresh_token?e(t):n(new Yi("internal-error")):n(new Yi("network-request-failed"))},"POST",Cn(i).toString(),t.g,t.u.get()):n(new Yi("internal-error"))})}(e.f,t).then(function(t){return e.b=t.access_token,e.c=Nc(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function _c(t,e){this.a=t||null,this.b=e||null,ji(this,{lastSignInTime:Pi(e||null),creationTime:Pi(t||null)})}function Pc(t,e,n,i,r,o){ji(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function Rc(t,e){for(var n in De.call(this,t),e)this[n]=e[n]}function Dc(t,e,n){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=fl.SDK_VERSION?pi(fl.SDK_VERSION):null,this.a=new Pa(this.l,Nr(Ar),t),this.b=new Ac(this.a),Vc(this,e[Da]),Sc(this.b,e),Mi(this,"refreshToken",this.b.a),qc(this,n||{}),nn.call(this),this.J=!1,this.o&&bi()&&(this.i=fc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new Ec(function(){return e.G(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=e.b.c-E()-3e5;return 0<t?t:0})}(this),this.W=I(this.Ha,this);var i=this;this.ga=null,this.va=function(t){i.sa(t.g)},this.Z=null,this.P=[],this.ua=function(t){Lc(i,t.c)},this.Y=null}function Cc(t,e){t.Z&&Xe(t.Z,"languageCodeChanged",t.va),(t.Z=e)&&Be(e,"languageCodeChanged",t.va)}function Lc(t,e){t.P=e,Ua(t.a,fl.SDK_VERSION?pi(fl.SDK_VERSION,t.P):null)}function xc(t,e){t.Y&&Xe(t.Y,"frameworkChanged",t.ua),(t.Y=e)&&Be(e,"frameworkChanged",t.ua)}function Mc(e){try{return fl.app(e.m).auth()}catch(t){throw new Yi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function jc(t){t.B||t.w.b||(t.w.start(),Xe(t,"tokenChanged",t.W),Be(t,"tokenChanged",t.W))}function Uc(t){Xe(t,"tokenChanged",t.W),t.w.stop()}function Vc(t,e){t.ma=e,Mi(t,"_lat",e)}function Fc(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return Zt(e).then(function(){return t})}function Kc(t){t.i&&!t.J&&(t.J=!0,ic(t.i,t))}function qc(t,e){ji(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new _c(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Hc(){}function Bc(t){return Yt().then(function(){if(t.B)throw new Yi("app-deleted")})}function Gc(t){return j(t.providerData,function(t){return t.providerId})}function Wc(t,e){e&&(Xc(t,e.providerId),t.providerData.push(e))}function Xc(t,e){K(t.providerData,function(t){return t.providerId==e})}function Jc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Mi(t,e,n)}function Yc(e,t){e!=t&&(ji(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Mi(e,"metadata",function(t){return new _c(t.a,t.b)}(t.metadata)):Mi(e,"metadata",new _c),M(t.providerData,function(t){Wc(e,t)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(e.b,t.b),Mi(e,"refreshToken",e.b.a))}function zc(n){return n.G().then(function(t){var e=n.isAnonymous;return function(t,e){return Ns(t.a,us,{idToken:e}).then(I(t.zc,t))}(n,t).then(function(){return e||Jc(n,"isAnonymous",!1),t})})}function $c(t,e){e[Da]&&t.ma!=e[Da]&&(Sc(t.b,e),t.dispatchEvent(new Rc("tokenChanged")),Vc(t,e[Da]),Jc(t,"refreshToken",t.b.a))}function Zc(t,e){return zc(t).then(function(){if(V(Gc(t),e))return Fc(t).then(function(){throw new Yi("provider-already-linked")})})}function Qc(t,e,n){return Ui({user:t,credential:bo(e),additionalUserInfo:e=Dr(e),operationType:n})}function th(t,e){return $c(t,e),t.reload().then(function(){return t})}function eh(n,i,t,e,r){if(!bi())return zt(new Yi("operation-not-supported-in-this-environment"));if(n.h&&!r)return zt(n.h);var o=Rr(t.providerId),a=Ai(n.uid+":::"),s=null;(!Ii()||ai())&&n.o&&t.isOAuthProvider&&(s=qs(n.o,n.l,n.m,i,t,null,a,fl.SDK_VERSION||null,null,null,n.tenantId));var u=ei(s,o&&o.Da,o&&o.Ca);return e=e().then(function(){if(ih(n),!r)return n.G().then(function(){})}).then(function(){return sc(n.i,u,i,t,a,!!s,n.tenantId)}).then(function(){return new qt(function(t,e){n.ja(i,null,new Yi("cancelled-popup-request"),n.g||null),n.f=t,n.v=e,n.g=a,n.c=hc(n.i,n,i,u,a)})}).then(function(t){return u&&ti(u),t?Ui(t):null}).s(function(t){throw u&&ti(u),t}),rh(n,e,r)}function nh(e,t,n,i,r){if(!bi())return zt(new Yi("operation-not-supported-in-this-environment"));if(e.h&&!r)return zt(e.h);var o=null,a=Ai(e.uid+":::");return i=i().then(function(){if(ih(e),!r)return e.G().then(function(){})}).then(function(){return e.ca=a,Fc(e)}).then(function(t){return e.da&&(t=(t=e.da).b.set(sh,e.A(),t.a)),t}).then(function(){return cc(e.i,t,n,a,e.tenantId)}).s(function(t){if(o=t,e.da)return uh(e.da);throw o}).then(function(){if(o)throw o}),rh(e,i,r)}function ih(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Yi("internal-error");throw new Yi("auth-domain-config-required")}}function rh(t,e,n){var i=function(e,t,n){return e.h&&!n?(t.cancel(),zt(e.h)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Rc("userInvalidated")),e.h=t),t})}(t,e,n);return t.I.push(i),i.ka(function(){F(t.I,i)}),i}function oh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Da]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-E())/1e3;var i=new Dc(e,n,t);return t.providerData&&M(t.providerData,function(t){t&&Wc(i,Ui(t))}),t.redirectEventId&&(i.ca=t.redirectEventId),i}function ah(t){this.a=t,this.b=ku()}dc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},dc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(gc(this,!0,null,t.a),Yt()):e.za(n,i)?function(e,t,n){n=n.za(t.c,t.b);var i=t.g,r=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(i,r,a,o).then(function(t){gc(e,s,t,null)}).s(function(t){gc(e,s,null,t)})}(this,t,e):zt(new Yi("invalid-auth-event")):(gc(this,!1,null,null),Yt())}else zt(new Yi("invalid-auth-event"))},dc.prototype.oa=function(){var n=this;return new qt(function(t,e){n.b?n.b().then(t,e):(n.f.push(t),n.c.push(e),function(t){var e=new Yi("timeout");t.a&&t.a.cancel(),t.a=un(ac.get()).then(function(){t.b||(t.g=!0,gc(t,!0,null,e))})}(n))})},bc.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Yt()):e.za(n,i)?function(t,e){var n=t.b,i=t.c;e.za(i,n)(t.g,t.f,t.R(),t.i).then(function(t){e.ja(i,t,null,n)}).s(function(t){e.ja(i,null,t,n)})}(t,e):zt(new Yi("invalid-auth-event"))}else zt(new Yi("invalid-auth-event"))},wc.prototype.confirm=function(t){return t=go(this.verificationId,t),this.a(t)},Ec.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=un(kc(n,t)).then(function(){return e=l.document,n=null,_i()||!e?Yt():new qt(function(t){n=function(){_i()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Ec.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ac.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ac.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?zt(new Yi("user-token-expired")):t||!this.b||E()>this.c-3e4?this.a?Oc(this,{grant_type:"refresh_token",refresh_token:this.a}):Yt(null):Yt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},_c.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},k(Rc,De),k(Dc,nn),Dc.prototype.sa=function(t){this.ga=t,ja(this.a,t)},Dc.prototype.ha=function(){return this.ga},Dc.prototype.Aa=function(){return H(this.P)},Dc.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Mi(Dc.prototype,"providerId","firebase"),(t=Dc.prototype).reload=function(){var t=this;return rh(this,Bc(this).then(function(){return zc(t).then(function(){return Fc(t)}).then(Hc)}))},t.dc=function(t){return this.G(t).then(function(t){return new Tc(t)})},t.G=function(t){var e=this;return rh(this,Bc(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new Yi("internal-error");return t.accessToken!=e.ma&&(Vc(e,t.accessToken),e.dispatchEvent(new Rc("tokenChanged"))),Jc(e,"refreshToken",t.refreshToken),t.accessToken}))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Yi("internal-error");qc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?j(t,function(t){return new Pc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Wc(this,e[n]);Jc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Li("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(t)},t.gb=function(t){var e=this,n=null;return rh(this,t.f(this.a,this.uid).then(function(t){return $c(e,t),n=Qc(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.rc=function(t){return Li("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(t)},t.eb=function(e){var n=this,i=null;return rh(this,Zc(this,e.providerId).then(function(){return n.G()}).then(function(t){return e.b(n.a,t)}).then(function(t){return i=Qc(n,t,"link"),th(n,t)}).then(function(){return i}))},t.sc=function(t,e){var n=this;return rh(this,Zc(this,"phone").then(function(){return Ic(Mc(n),t,e,I(n.eb,n))}))},t.Bc=function(t,e){var n=this;return rh(this,Yt().then(function(){return Ic(Mc(n),t,e,I(n.gb,n))}),!0)},t.rb=function(e){var n=this;return rh(this,this.G().then(function(t){return n.a.rb(t,e)}).then(function(t){return $c(n,t),n.reload()}))},t.Sc=function(e){var n=this;return rh(this,this.G().then(function(t){return e.b(n.a,t)}).then(function(t){return $c(n,t),n.reload()}))},t.sb=function(e){var n=this;return rh(this,this.G().then(function(t){return n.a.sb(t,e)}).then(function(t){return $c(n,t),n.reload()}))},t.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Bc(this);var n=this;return rh(this,this.G().then(function(t){return n.a.tb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return $c(n,t),Jc(n,"displayName",t.displayName||null),Jc(n,"photoURL",t.photoUrl||null),M(n.providerData,function(t){"password"===t.providerId&&(Mi(t,"displayName",n.displayName),Mi(t,"photoURL",n.photoURL))}),Fc(n)}).then(Hc))},t.Qc=function(e){var n=this;return rh(this,zc(this).then(function(t){return V(Gc(n),e)?function(t,e,n){return Ns(t,os,{idToken:e,deleteProvider:n})}(n.a,t,[e]).then(function(t){var e={};return M(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),M(Gc(n),function(t){e[t]||Xc(n,t)}),e[mo.PROVIDER_ID]||Mi(n,"phoneNumber",null),Fc(n)}):Fc(n).then(function(){throw new Yi("no-such-provider")})}))},t.delete=function(){var e=this;return rh(this,this.G().then(function(t){return Ns(e.a,rs,{idToken:t})}).then(function(){e.dispatchEvent(new Rc("userDeleted"))})).then(function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Cc(e,null),xc(e,null),e.I=[],e.B=!0,Uc(e),Mi(e,"refreshToken",null),e.i&&rc(e.i,e)})},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.za=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?I(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?I(this.Cb,this):null},t.tc=function(t){var e=this;return eh(this,"linkViaPopup",t,function(){return Zc(e,t.providerId).then(function(){return Fc(e)})},!1)},t.Cc=function(t){return eh(this,"reauthViaPopup",t,function(){return Yt()},!0)},t.uc=function(t){var e=this;return nh(this,"linkViaRedirect",t,function(){return Zc(e,t.providerId)},!1)},t.Dc=function(t){return nh(this,"reauthViaRedirect",t,function(){return Yt()},!0)},t.Bb=function(e,n,t,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.G().then(function(t){return $a(r.a,{requestUri:e,postBody:i,sessionId:n,idToken:t})}).then(function(t){return o=Qc(r,t,"link"),th(r,t)}).then(function(){return o}),rh(this,t)},t.Cb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return rh(this,Yt().then(function(){return Hr(Za(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)}).then(function(t){return o=Qc(r,t,"reauthenticate"),$c(r,t),r.h=null,r.reload()}).then(function(){return o}),!0)},t.jb=function(e){var n=this,i=null;return rh(this,this.G().then(function(t){return i=t,void 0===e||G(e)?{}:br(new ur(e))}).then(function(t){return n.a.jb(i,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.toJSON=function(){return this.A()},t.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&J(e,this.metadata.A()),M(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),e};var sh={name:"redirectUser",C:"session"};function uh(t){return Nu(t.b,sh,t.a)}function ch(t){this.a=t,this.b=ku(),this.c=null,this.f=function(e){var n=fh("local"),i=fh("session"),r=fh("none");return function(n,i,r){var o=Su(i,r),a=Au(n,i.C);return n.get(i,r).then(function(t){var e=null;try{e=ki(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(i,e,r);e&&t&&"localStorage"!=a.type&&l.localStorage.removeItem(o)})}(e.b,n,e.a).then(function(){return e.b.get(i,e.a)}).then(function(t){return t?i:e.b.get(r,e.a).then(function(t){return t?r:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(lh,e.a).then(function(t){return t?fh(t):n})})})}).then(function(t){return e.c=t,hh(e,t.C)}).s(function(){e.c||(e.c=n)})}(this),this.b.addListener(fh("local"),this.a,I(this.g,this))}function hh(t,e){var n,i=[];for(n in Tu)Tu[n]!==e&&i.push(Nu(t.b,fh(Tu[n]),t.a));return i.push(Nu(t.b,lh,t.a)),function(s){return new qt(function(n,e){var i=s.length,r=[];if(i)for(var t=function(t,e){i--,r[t]=e,0==i&&n(r)},o=function(t){e(t)},a=0;a<s.length;a++)$t(s[a],T(t,a),o);else n(r)})}(i)}ch.prototype.g=function(){var e=this,n=fh("local");mh(this,function(){return Yt().then(function(){return e.c&&"local"!=e.c.C?e.b.get(n,e.a):null}).then(function(t){if(t)return hh(e,"local").then(function(){e.c=n})})})};var lh={name:"persistence",C:"session"};function fh(t){return{name:"authUser",C:t}}function dh(t,e){return mh(t,function(){return t.b.set(t.c,e.A(),t.a)})}function ph(t){return mh(t,function(){return Nu(t.b,t.c,t.a)})}function vh(t,e){return mh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),oh(t||{})})})}function mh(t,e){return t.f=t.f.then(e,e),t.f}function gh(t){if(this.l=!1,Mi(this,"settings",new yc),Mi(this,"app",t),!Ah(this).options||!Ah(this).options.apiKey)throw new Yi("invalid-api-key");t=fl.SDK_VERSION?pi(fl.SDK_VERSION):null,this.b=new Pa(Ah(this).options&&Ah(this).options.apiKey,Nr(Ar),t),this.O=[],this.m=[],this.J=[],this.Ub=fl.INTERNAL.createSubscribe(I(this.oc,this)),this.W=void 0,this.Vb=fl.INTERNAL.createSubscribe(I(this.pc,this)),Eh(this,null),this.h=new ch(Ah(this).options.apiKey+":"+Ah(this).name),this.w=new ah(Ah(this).options.apiKey+":"+Ah(this).name),this.Y=_h(this,function(n){var t=Ah(n).options.authDomain,e=function(e){var t=function(t,e){return t.b.get(sh,t.a).then(function(t){return t&&e&&(t.authDomain=e),oh(t||{})})}(e.w,Ah(e).options.authDomain).then(function(t){return(e.B=t)&&(t.da=e.w),uh(e.w)});return _h(e,t)}(n).then(function(){return vh(n.h,t)}).then(function(e){return e?(e.da=n.w,n.B&&(n.B.ca||null)==(e.ca||null)?e:e.reload().then(function(){return dh(n.h,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:ph(n.h)})):null}).then(function(t){Eh(n,t||null)});return _h(n,e)}(this)),this.i=_h(this,function(e){return e.Y.then(function(){return Ih(e)}).s(function(){}).then(function(){if(!e.l)return e.ma()}).s(function(){}).then(function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(fh("local"),t.a,e.ma)}})}(this)),this.ga=!1,this.ma=I(this.Nc,this),this.ub=I(this.aa,this),this.ua=I(this.bc,this),this.va=I(this.mc,this),this.Ha=I(this.nc,this),this.a=null,function(e){var n=Ah(e).options.authDomain,i=Ah(e).options.apiKey;n&&bi()&&(e.Tb=e.Y.then(function(){if(!e.l){if(e.a=fc(n,i,Ah(e).name),ic(e.a,e),Sh(e)&&Kc(Sh(e)),e.B){Kc(e.B);var t=e.B;t.sa(e.ha()),Cc(t,e),Lc(t=e.B,e.I),xc(t,e),e.B=null}return e.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.vc,this),this.o=0,nn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.sa(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function bh(t){De.call(this,"languageCodeChanged"),this.g=t}function yh(t){De.call(this,"frameworkChanged"),this.c=t}function wh(t){return t.Tb||zt(new Yi("auth-domain-config-required"))}function Ih(t){if(!bi())return zt(new Yi("operation-not-supported-in-this-environment"));var e=wh(t).then(function(){return t.a.oa()}).then(function(t){return t?Ui(t):null});return _h(t,e)}function Th(e,t){var n={};return n.apiKey=Ah(e).options.apiKey,n.authDomain=Ah(e).options.authDomain,n.appName=Ah(e).name,e.Y.then(function(){return function(t,e,n,i){var r=new Dc(t,e);return n&&(r.da=n),i&&Lc(r,i),r.reload().then(function(){return r})}(n,t,e.w,e.Aa())}).then(function(t){return Sh(e)&&t.uid==Sh(e).uid?Yc(Sh(e),t):(Eh(e,t),Kc(t)),e.aa(t)}).then(function(){Oh(e)})}function Eh(t,e){Sh(t)&&(function(t,e){K(t.O,function(t){return t==e})}(Sh(t),t.ub),Xe(Sh(t),"tokenChanged",t.ua),Xe(Sh(t),"userDeleted",t.va),Xe(Sh(t),"userInvalidated",t.Ha),Uc(Sh(t))),e&&(e.O.push(t.ub),Be(e,"tokenChanged",t.ua),Be(e,"userDeleted",t.va),Be(e,"userInvalidated",t.Ha),0<t.o&&jc(e)),Mi(t,"currentUser",e),e&&(e.sa(t.ha()),Cc(e,t),Lc(e,t.I),xc(e,t))}function kh(e,t){var n=null,i=null;return _h(e,t.then(function(t){return n=bo(t),i=Dr(t),Th(e,t)}).then(function(){return Ui({user:Sh(e),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function Ah(t){return t.app}function Sh(t){return t.currentUser}function Nh(t){return Sh(t)&&Sh(t)._lat||null}function Oh(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Nh(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Nh(t))}}function _h(t,e){return t.O.push(e),e.ka(function(){F(t.O,e)}),e}function Ph(){}function Rh(){this.a={},this.b=1e12}ch.prototype.mb=function(e){var n=null,i=this;return function(t){var e=new Yi("invalid-persistence-type"),n=new Yi("unsupported-persistence-type");t:{for(i in Tu)if(Tu[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(ui()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!gi()&&"none"!==t)throw n}}(e),mh(this,function(){return e!=i.c.C?i.b.get(i.c,i.a).then(function(t){return n=t,hh(i,e)}).then(function(){if(i.c=fh(e),n)return i.b.set(i.c,n,i.a)}):Yt()})},k(gh,nn),k(bh,De),k(yh,De),(t=gh.prototype).mb=function(t){return t=this.h.mb(t),_h(this,t)},t.sa=function(t){this.Z===t||this.l||(this.Z=t,ja(this.b,this.Z),this.dispatchEvent(new bh(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=l.navigator;this.sa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),Ua(this.b,fl.SDK_VERSION?pi(fl.SDK_VERSION,this.I):null),this.dispatchEvent(new yh(this.I))},t.Aa=function(){return H(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:Ah(this).options.apiKey,authDomain:Ah(this).options.authDomain,appName:Ah(this).name,currentUser:Sh(this)&&Sh(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.za=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ac,this):null},t.ac=function(t,e,n,i){var r=this;t={requestUri:t,postBody:i,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=za(r.b,t).then(function(t){return o=bo(t),a=Dr(t),t});return _h(this,t=r.Y.then(function(){return s}).then(function(t){return Th(r,t)}).then(function(){return Ui({user:Sh(r),credential:o,additionalUserInfo:a,operationType:"signIn"})}))},t.Lc=function(e){if(!bi())return zt(new Yi("operation-not-supported-in-this-environment"));var n=this,t=Rr(e.providerId),i=Ai(),r=null;(!Ii()||ai())&&Ah(this).options.authDomain&&e.isOAuthProvider&&(r=qs(Ah(this).options.authDomain,Ah(this).options.apiKey,Ah(this).name,"signInViaPopup",e,null,i,fl.SDK_VERSION||null,null,null,this.R()));var o=ei(r,t&&t.Da,t&&t.Ca);return _h(this,t=wh(this).then(function(t){return sc(t,o,"signInViaPopup",e,i,!!r,n.R())}).then(function(){return new qt(function(t,e){n.ja("signInViaPopup",null,new Yi("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=hc(n.a,n,"signInViaPopup",o,i)})}).then(function(t){return o&&ti(o),t?Ui(t):null}).s(function(t){throw o&&ti(o),t}))},t.Mc=function(t){if(!bi())return zt(new Yi("operation-not-supported-in-this-environment"));var e=this;return _h(this,wh(this).then(function(){return function(t){return mh(t,function(){return t.b.set(lh,t.c.C,t.a)})}(e.h)}).then(function(){return cc(e.a,"signInViaRedirect",t,void 0,e.R())}))},t.oa=function(){var e=this;return Ih(this).then(function(t){return e.a&&vc(e.a.b),t}).s(function(t){throw e.a&&vc(e.a.b),t})},t.Rc=function(t){if(!t)return zt(new Yi("null-user"));if(this.P!=t.tenantId)return zt(new Yi("tenant-id-mismatch"));var e=this,n={};n.apiKey=Ah(this).options.apiKey,n.authDomain=Ah(this).options.authDomain,n.appName=Ah(this).name;var i=function(t,e,n,i){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var r=t.b,o={};return o[Da]=r.b,o.refreshToken=r.a,o.expiresIn=(r.c-E())/1e3,e=new Dc(e,o),n&&(e.da=n),i&&Lc(e,i),Yc(e,t),e}(t,n,e.w,e.Aa());return _h(this,this.i.then(function(){if(Ah(e).options.apiKey!=t.l)return i.reload()}).then(function(){return Sh(e)&&t.uid==Sh(e).uid?(Yc(Sh(e),t),e.aa(t)):(Eh(e,i),Kc(i),e.aa(i))}).then(function(){Oh(e)}))},t.pb=function(){var t=this,e=this.i.then(function(){return t.a&&vc(t.a.b),Sh(t)?(Eh(t,null),ph(t.h).then(function(){Oh(t)})):Yt()});return _h(this,e)},t.Nc=function(){var i=this;return vh(this.h,Ah(this).options.authDomain).then(function(t){if(!i.l){var e;if(e=Sh(i)&&t){e=Sh(i).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Yc(Sh(i),t),Sh(i).G();(Sh(i)||t)&&(Eh(i,t),t&&(Kc(t),t.da=i.w),i.a&&ic(i.a,i),Oh(i))}})},t.aa=function(t){return dh(this.h,t)},t.bc=function(){Oh(this),this.aa(Sh(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Sh(e))})},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),_h(t,t.i.then(function(){!t.l&&V(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Nh(t)))}))}(this,function(){t.next(Sh(e))})},t.xc=function(t,e,n){var i=this;return this.ga&&Promise.resolve().then(function(){m(t)?t(Sh(i)):m(t.next)&&t.next(Sh(i))}),this.Ub(t,e,n)},t.wc=function(t,e,n){var i=this;return this.ga&&Promise.resolve().then(function(){i.W=i.getUid(),m(t)?t(Sh(i)):m(t.next)&&t.next(Sh(i))}),this.Vb(t,e,n)},t.cc=function(t){var e=this,n=this.i.then(function(){return Sh(e)?Sh(e).G(t).then(function(t){return{accessToken:t}}):null});return _h(this,n)},t.Hc=function(t){var n=this;return this.i.then(function(){return kh(n,Ns(n.b,Ts,{token:t}))}).then(function(t){var e=t.user;return Jc(e,"isAnonymous",!1),n.aa(e),t})},t.Ic=function(t,e){var n=this;return this.i.then(function(){return kh(n,Ns(n.b,Es,{email:t,password:e}))})},t.Xb=function(t,e){var n=this;return this.i.then(function(){return kh(n,Ns(n.b,ns,{email:t,password:e}))})},t.Ra=function(t){var e=this;return this.i.then(function(){return kh(e,t.na(e.b))})},t.Gc=function(t){return Li("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(t)},t.ob=function(){var n=this;return this.i.then(function(){var t=Sh(n);return t&&t.isAnonymous?Ui({user:t,credential:null,additionalUserInfo:Ui({providerId:null,isNewUser:!1}),operationType:"signIn"}):kh(n,n.b.ob()).then(function(t){var e=t.user;return Jc(e,"isAnonymous",!0),n.aa(e),t})})},t.getUid=function(){return Sh(this)&&Sh(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Sh(this)&&jc(Sh(this))},t.Ec=function(e){var n=this;M(this.m,function(t){t==e&&n.o--}),this.o<0&&(this.o=0),0==this.o&&Sh(this)&&Uc(Sh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),_h(this,this.i.then(function(){e.l||V(e.m,t)&&t(Nh(e))}))},t.removeAuthTokenListener=function(e){K(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(fh("local"),t.a,this.ma),this.a&&(rc(this.a,this),vc(this.a.b)),Promise.resolve()},t.$b=function(t){return _h(this,function(t,e){return Ns(t,is,{identifier:e,continueUri:yi()?$n():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.qc=function(t){return!!lo(t)},t.lb=function(e,n){var i=this;return _h(this,Yt().then(function(){var t=new ur(n);if(!t.c)throw new Yi("argument-error",lr+" must be true when sending sign in link to email");return br(t)}).then(function(t){return i.b.lb(e,t)}).then(function(){}))},t.Uc=function(t){return this.Ka(t).then(function(t){return t.data.email})},t.$a=function(t,e){return _h(this,this.b.$a(t,e).then(function(){}))},t.Ka=function(t){return _h(this,this.b.Ka(t).then(function(t){return new Fi(t)}))},t.Xa=function(t){return _h(this,this.b.Xa(t).then(function(){}))},t.kb=function(e,t){var n=this;return _h(this,Yt().then(function(){return void 0===t||G(t)?{}:br(new ur(t))}).then(function(t){return n.b.kb(e,t)}).then(function(){}))},t.Kc=function(t,e){return _h(this,Ic(this,t,e,I(this.Ra,this)))},t.Jc=function(n,i){var r=this;return _h(this,Yt().then(function(){var t=i||$n(),e=ho(n,t);if(!(t=lo(t)))throw new Yi("argument-error","Invalid email link!");if(t.tenantId!==r.R())throw new Yi("tenant-id-mismatch");return r.Ra(e)}))},Ph.prototype.render=function(){},Ph.prototype.reset=function(){},Ph.prototype.getResponse=function(){},Ph.prototype.execute=function(){};var Dh=null;function Ch(t,e){return(e=Lh(e))&&t.a[e]||null}function Lh(t){return(t=void 0===t?1e12:t)?t.toString():null}function xh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Fn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Be(this.f,"click",this.i)}function Mh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function jh(){}Rh.prototype.render=function(t,e){return this.a[this.b.toString()]=new xh(t,e),this.b++},Rh.prototype.reset=function(t){var e=Ch(this,t);t=Lh(t),e&&t&&(e.delete(),delete this.a[t])},Rh.prototype.getResponse=function(t){return(t=Ch(this,t))?t.getResponse():null},Rh.prototype.execute=function(t){(t=Ch(this,t))&&t.execute()},xh.prototype.getResponse=function(){return Mh(this),this.b},xh.prototype.execute=function(){Mh(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},xh.prototype.delete=function(){Mh(this),this.g=!0,clearTimeout(this.a),this.a=null,Xe(this.f,"click",this.i)},jh.prototype.g=function(){return Yt(Dh=Dh||new Rh)},jh.prototype.c=function(){};var Uh=null;function Vh(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fh=new Y(Z,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Kh=new Oi(3e4,6e4);Vh.prototype.g=function(r){var o=this;return new qt(function(t,e){var i=setTimeout(function(){e(new Yi("network-request-failed"))},Kh.get());!l.grecaptcha||r!==o.f&&!o.b?(l[o.a]=function(){if(l.grecaptcha){o.f=r;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(i),t(l.grecaptcha)}else clearTimeout(i),e(new Yi("internal-error"));delete l[o.a]},Yt(Ea(nt(Fh,{onload:o.a,hl:r||""}))).s(function(){clearTimeout(i),e(new Yi("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),t(l.grecaptcha))})},Vh.prototype.c=function(){this.b--};var qh=null;function Hh(t,e,n,i,r,o,a){if(Mi(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a=a?Uh=Uh||new jh:qh=qh||new Vh,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Wh])throw new Yi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Xh],!l.document)throw new Yi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Fn(e)||!this.i&&Fn(e).hasChildNodes())throw new Yi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Pa(t,o||null,r||null),this.v=i||function(){return null};var s=this;this.l=[];var u=this.a[Bh];this.a[Bh]=function(t){if(Jh(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=mi(u,l);"function"==typeof e&&e(t)}};var c=this.a[Gh];this.a[Gh]=function(){if(Jh(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=mi(c,l);"function"==typeof t&&t()}}}var Bh="callback",Gh="expired-callback",Wh="sitekey",Xh="size";function Jh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Yh(t,e){return t.h.push(e),e.ka(function(){F(t.h,e)}),e}function zh(t){if(t.B)throw new Yi("internal-error","RecaptchaVerifier instance has been destroyed.")}function $h(t,e,n){var i=!1;try{this.b=n||fl.app()}catch(t){throw new Yi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Yi("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Aa()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=fl.SDK_VERSION?pi(fl.SDK_VERSION,o):null,Hh.call(this,n,t,e,function(){try{var e=r.b.auth().ha()}catch(t){e=null}return e},o,Nr(Ar),i)}function Zh(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Yi("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].N(n[r])&&!o){if(e=e[r],r<0||r>=Qh.length)throw new Yi("internal-error","Argument validator received an unsupported number of arguments.");n=Qh[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}i=null}}if(i)throw new Yi("argument-error",t+" failed: "+i)}(t=Hh.prototype).Ba=function(){var e=this;return this.f?this.f:this.f=Yh(this,Yt().then(function(){if(yi()&&!si())return ri();throw new Yi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.v())}).then(function(t){return e.g=t,Ns(e.o,ds,{})}).then(function(t){e.a[Wh]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){zh(this);var n=this;return Yh(this,this.Ba().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=Fn(t);t=Hn("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){zh(this);var r=this;return Yh(this,this.render().then(function(i){return new qt(function(e){var t=r.g.getResponse(i);if(t)e(t);else{var n=function(t){t&&(function(t,e){K(t.l,function(t){return t==e})}(r,n),e(t))};r.l.push(n),r.i&&r.g.execute(r.c)}})}))},t.reset=function(){zh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){zh(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Fn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},k($h,Hh);var Qh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function tl(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:h}}function el(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:n}}function nl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:g}}function il(t,e){return{name:t||"",M:"a function",optional:!!e,N:m}}function rl(t,e){return{name:t||"",M:"null",optional:!!e,N:r}}function ol(n){return{name:n?n+"Credential":"credential",M:n?"a valid "+n+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.na||!e)}}}function al(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&h(t.type)&&m(t.verify))}}}function sl(e,n,t,i){return{name:t||"",M:e.M+" or "+n.M,optional:!!i,N:function(t){return e.N(t)||n.N(t)}}}function ul(t,e){for(var n in e){var i=e[n].name;t[i]=ll(i,t[n],e[n].j)}}function cl(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:T(function(t){return this[t]},n),set:T(function(t,e,n,i){Zh(t,[n],[i],!0),this[e]=i},i,n,e[n].Ya),enumerable:!0})}}function hl(t,e,n,i){t[e]=ll(e,n,i)}function ll(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return Zh(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}ul(gh.prototype,{Xa:{name:"applyActionCode",j:[tl("code")]},Ka:{name:"checkActionCode",j:[tl("code")]},$a:{name:"confirmPasswordReset",j:[tl("code"),tl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[tl("email"),tl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[tl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[tl("emailLink")]},wc:{name:"onAuthStateChanged",j:[sl(nl(),il(),"nextOrObserver"),il("opt_error",!0),il("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[sl(nl(),il(),"nextOrObserver"),il("opt_error",!0),il("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[tl("email"),sl(nl("opt_actionCodeSettings",!0),rl(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[tl("email"),nl("actionCodeSettings")]},mb:{name:"setPersistence",j:[tl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[ol()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[ol()]},Hc:{name:"signInWithCustomToken",j:[tl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[tl("email"),tl("password")]},Jc:{name:"signInWithEmailLink",j:[tl("email"),tl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[tl("phoneNumber"),al()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[sl({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Dc)}},rl(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[tl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[tl("code")]}}),cl(gh.prototype,{lc:{name:"languageCode",Ya:sl(tl(),rl(),"languageCode")},ti:{name:"tenantId",Ya:sl(tl(),rl(),"tenantId")}}),(gh.Persistence=Tu).LOCAL="local",gh.Persistence.SESSION="session",gh.Persistence.NONE="none",ul(Dc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[el("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[el("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[ol()]},eb:{name:"linkWithCredential",j:[ol()]},sc:{name:"linkWithPhoneNumber",j:[tl("phoneNumber"),al()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ol()]},gb:{name:"reauthenticateWithCredential",j:[ol()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[tl("phoneNumber"),al()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[sl(nl("opt_actionCodeSettings",!0),rl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[tl(null,!0)]},Qc:{name:"unlink",j:[tl("provider")]},rb:{name:"updateEmail",j:[tl("email")]},sb:{name:"updatePassword",j:[tl("password")]},Sc:{name:"updatePhoneNumber",j:[ol("phone")]},tb:{name:"updateProfile",j:[nl("profile")]}}),ul(Rh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ul(Ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ul(qt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),cl(yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:el("appVerificationDisabledForTesting")}}),ul(wc.prototype,{confirm:{name:"confirm",j:[tl("verificationCode")]}}),hl(qr,"fromJSON",function(t){t=h(t)?JSON.parse(t):t;for(var e,n=[Yr,uo,po,Wr],i=0;i<n.length;i++)if(e=n[i](t))return e;return null},[sl(tl(),nl(),"json")]),hl(co,"credential",function(t,e){return new so(t,e)},[tl("email"),tl("password")]),ul(so.prototype,{A:{name:"toJSON",j:[tl(null,!0)]}}),ul(Qr.prototype,{wa:{name:"addScope",j:[tl("scope")]},Ea:{name:"setCustomParameters",j:[nl("customOAuthParameters")]}}),hl(Qr,"credential",to,[sl(tl(),nl(),"token")]),hl(co,"credentialWithLink",ho,[tl("email"),tl("emailLink")]),ul(eo.prototype,{wa:{name:"addScope",j:[tl("scope")]},Ea:{name:"setCustomParameters",j:[nl("customOAuthParameters")]}}),hl(eo,"credential",no,[sl(tl(),nl(),"token")]),ul(io.prototype,{wa:{name:"addScope",j:[tl("scope")]},Ea:{name:"setCustomParameters",j:[nl("customOAuthParameters")]}}),hl(io,"credential",ro,[sl(tl(),sl(nl(),rl()),"idToken"),sl(tl(),rl(),"accessToken",!0)]),ul(oo.prototype,{Ea:{name:"setCustomParameters",j:[nl("customOAuthParameters")]}}),hl(oo,"credential",ao,[sl(tl(),nl(),"token"),tl("secret",!0)]),ul(Zr.prototype,{wa:{name:"addScope",j:[tl("scope")]},credential:{name:"credential",j:[sl(tl(),sl(nl(),rl()),"optionsOrIdToken"),sl(tl(),rl(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[nl("customOAuthParameters")]}}),ul(Xr.prototype,{A:{name:"toJSON",j:[tl(null,!0)]}}),ul(Br.prototype,{A:{name:"toJSON",j:[tl(null,!0)]}}),hl(mo,"credential",go,[tl("verificationId"),tl("verificationCode")]),ul(mo.prototype,{Va:{name:"verifyPhoneNumber",j:[tl("phoneNumber"),al()]}}),ul(fo.prototype,{A:{name:"toJSON",j:[tl(null,!0)]}}),ul(Yi.prototype,{toJSON:{name:"toJSON",j:[tl(null,!0)]}}),ul(So.prototype,{toJSON:{name:"toJSON",j:[tl(null,!0)]}}),ul(Ao.prototype,{toJSON:{name:"toJSON",j:[tl(null,!0)]}}),ul($h.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hl(Qi,"parseLink",sr,[tl("link")]),function(){if(void 0===fl||!fl.INTERNAL||!fl.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ki,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:gh,AuthCredential:qr,Error:Yi};hl(t,"EmailAuthProvider",co,[]),hl(t,"FacebookAuthProvider",Qr,[]),hl(t,"GithubAuthProvider",eo,[]),hl(t,"GoogleAuthProvider",io,[]),hl(t,"TwitterAuthProvider",oo,[]),hl(t,"OAuthProvider",Zr,[tl("providerId")]),hl(t,"SAMLAuthProvider",$r,[tl("providerId")]),hl(t,"PhoneAuthProvider",mo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof gh)}}]),hl(t,"RecaptchaVerifier",$h,[sl(tl(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),nl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof fl.app.App)}}]),hl(t,"ActionCodeURL",Qi,[]),fl.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:I((t=new gh(t)).getUid,t),getToken:I(t.cc,t),addAuthTokenListener:I(t.Wb,t),removeAuthTokenListener:I(t.Ec,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),fl.INTERNAL.extendNamespace({User:Dc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-auth - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-auth.js.map

;(function(){
            ;var g,aa=this||self;
function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ba(a){return"function"==q(a)}function da(a){return a[ea]||(a[ea]=++ja)}var ea="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ma(a,b,c){ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return ma.apply(null,arguments)}
function oa(a,b){function c(){}c.prototype=b.prototype;a.Bd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ab=function(d,e,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[e].apply(d,h)}};function qa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,qa);else{const b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}oa(qa,Error);qa.prototype.name="CustomError";function ra(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");qa.call(this,c+a[d])}oa(ra,qa);ra.prototype.name="AssertionError";function sa(a,b){throw new ra("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};function ta(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};function ua(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function ya(a,b){return null!==a&&b in a?a[b]:void 0}var za="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Aa(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<za.length;f++)c=za[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ba(a,b){this.Fc=a===Da&&b||"";this.Hc=Ea}Ba.prototype.toString=function(){return"Const{"+this.Fc+"}"};var Ea={},Da={},Fa=new Ba(Da,"");function Ga(){this.Ac=""}Ga.prototype.toString=function(){return"SafeScript{"+this.Ac+"}"};Ga.prototype.Na=function(a){this.Ac=a;return this};(new Ga).Na("");function Ha(a,b){this.Dc=a===Ia&&b||"";this.Ic=Ja}Ha.prototype.toString=function(){return"TrustedResourceUrl{"+this.Dc+"}"};var Ja={},Ia={};function Ka(a){return-1!=La.toLowerCase().indexOf(a.toLowerCase())};function Ma(){this.Cc=""}Ma.prototype.toString=function(){return"SafeStyle{"+this.Cc+"}"};Ma.prototype.Na=function(a){this.Cc=a;return this};(new Ma).Na("");function Oa(){this.Bc=""}Oa.prototype.toString=function(){return"SafeStyleSheet{"+this.Bc+"}"};Oa.prototype.Na=function(a){this.Bc=a;return this};(new Oa).Na("");var La;a:{var Pa=aa.navigator;if(Pa){var Qa=Pa.userAgent;if(Qa){La=Qa;break a}}La=""}function Sa(a){return-1!=La.indexOf(a)};function Ta(){this.dc="";this.Gc=Ua}Ta.prototype.toString=function(){return"SafeHtml{"+this.dc+"}"};function Va(){var a=Wa;if(a instanceof Ta&&a.constructor===Ta&&a.Gc===Ua)return a.dc;sa("expected object of type SafeHtml, got '"+a+"' of type "+q(a));return"type_error:SafeHtml"}var Ua={};Ta.prototype.Na=function(a){this.dc=a;return this};(new Ta).Na("\x3c!DOCTYPE html\x3e");var Wa=(new Ta).Na("");(new Ta).Na("\x3cbr\x3e");function Xa(a){if(Fa instanceof Ba&&Fa.constructor===Ba&&Fa.Hc===Ea)var b=Fa.Fc;else sa("expected object of type Const, got '"+Fa+"'"),b="type_error:Const";b=new Ha(Ia,b);a:{try{var c=a&&a.ownerDocument,d=c&&(c.defaultView||c.parentWindow);d=d||aa;if(d.Element&&d.Location){var e=d;break a}}catch(h){}e=null}if(e&&"undefined"!=typeof e.HTMLIFrameElement&&(!a||!(a instanceof e.HTMLIFrameElement)&&(a instanceof e.Location||a instanceof e.Element))){e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=
a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(h){f="\x3cobject could not be stringified\x3e"}else f=void 0===a?"undefined":null===a?"null":typeof a;sa("Argument is not a %s (or a non-Element, non-Location mock); got: %s","HTMLIFrameElement",f)}b instanceof Ha&&b.constructor===Ha&&b.Ic===Ja?f=b.Dc:(sa("expected object of type TrustedResourceUrl, got '"+b+"' of type "+q(b)),f="type_error:TrustedResourceUrl");a.src=f.toString()};function Ya(a,b){null!=a&&this.append.apply(this,arguments)}g=Ya.prototype;g.Ua="";g.set=function(a){this.Ua=""+a};g.append=function(a,b,c){this.Ua+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.Ua+=arguments[d];return this};g.clear=function(){this.Ua=""};g.toString=function(){return this.Ua};var Za={},$a={},ab;if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof t)var t={};if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof bb)var bb=null;if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof eb)var eb=null;var fb=!0,gb=null;if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof hb)var hb=null;function ib(){return new u(null,5,[jb,!0,kb,!0,lb,!1,mb,!1,nb,null],null)}
function ob(){fb=!1;bb=function(){return console.log.apply(console,ta(arguments))};eb=function(){return console.error.apply(console,ta(arguments))}}function v(a){return null!=a&&!1!==a}function pb(a){return a instanceof Array}function qb(a){return null==a?!0:!1===a?!0:!1}function z(a,b){return a[q(null==b?null:b)]?!0:a._?!0:!1}function A(a,b){var c=null==b?null:b.constructor;c=v(v(c)?c.gb:c)?c.Ra:q(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}
function rb(a){var b=a.Ra;return v(b)?b:C.a(a)}var sb="undefined"!==typeof Symbol&&"function"===q(Symbol)?Symbol.iterator:"@@iterator";function tb(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function ub(a){return vb(function(b,c){b.push(c);return b},[],a)}function wb(a){return"symbol"===q(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function xb(){}function yb(){}function zb(){}
function Ab(a){if(null!=a&&null!=a.L)a=a.L(a);else{var b=Ab[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Ab._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("ICounted.-count",a);}return a}function Bb(){}function Cb(a){if(null!=a&&null!=a.W)a=a.W(a);else{var b=Cb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Cb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IEmptyableCollection.-empty",a);}return a}function Db(){}
function Eb(a,b){if(null!=a&&null!=a.Y)a=a.Y(a,b);else{var c=Eb[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=Eb._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("ICollection.-conj",a);}return a}function Fb(){}
var Hb=function(){function a(d,e,f){var h=Gb[q(null==d?null:d)];if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);h=Gb._;if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);throw A("IIndexed.-nth",d);}function b(d,e){var f=Gb[q(null==d?null:d)];if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);f=Gb._;if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);throw A("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.b=b;c.f=a;return c}(),Gb=function Gb(a){switch(arguments.length){case 2:return Gb.b(arguments[0],arguments[1]);case 3:return Gb.f(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};Gb.b=function(a,b){return null!=a&&null!=a.H?a.H(a,b):Hb.b(a,b)};Gb.f=function(a,b,c){return null!=a&&null!=a.aa?a.aa(a,b,c):Hb.f(a,b,c)};Gb.v=3;function Ib(){}
function Jb(a){if(null!=a&&null!=a.Z)a=a.Z(a);else{var b=Jb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("ISeq.-first",a);}return a}function Kb(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=Kb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Kb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("ISeq.-rest",a);}return a}function Lb(){}
function Mb(a){if(null!=a&&null!=a.X)a=a.X(a);else{var b=Mb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Mb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("INext.-next",a);}return a}function Nb(){}
var Pb=function(){function a(d,e,f){var h=Ob[q(null==d?null:d)];if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);h=Ob._;if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);throw A("ILookup.-lookup",d);}function b(d,e){var f=Ob[q(null==d?null:d)];if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);f=Ob._;if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);throw A("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.b=b;c.f=a;return c}(),Ob=function Ob(a){switch(arguments.length){case 2:return Ob.b(arguments[0],arguments[1]);case 3:return Ob.f(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};Ob.b=function(a,b){return null!=a&&null!=a.S?a.S(a,b):Pb.b(a,b)};Ob.f=function(a,b,c){return null!=a&&null!=a.C?a.C(a,b,c):Pb.f(a,b,c)};Ob.v=3;
function Rb(a,b,c){if(null!=a&&null!=a.Qa)a=a.Qa(a,b,c);else{var d=Rb[q(null==a?null:a)];if(null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=Rb._,null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("IAssociative.-assoc",a);}return a}function Sb(a,b){if(null!=a&&null!=a.jb)a=a.jb(a,b);else{var c=Sb[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=Sb._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IFind.-find",a);}return a}function Tb(){}
function Ub(a,b){if(null!=a&&null!=a.Tb)a=a.Tb(a,b);else{var c=Ub[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=Ub._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IMap.-dissoc",a);}return a}function Vb(a){if(null!=a&&null!=a.Tc)a=a.key;else{var b=Vb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Vb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IMapEntry.-key",a);}return a}
function Wb(a){if(null!=a&&null!=a.Uc)a=a.val;else{var b=Wb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Wb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IMapEntry.-val",a);}return a}function Xb(){}function Yb(a,b){if(null!=a&&null!=a.pc)a=a.pc(a,b);else{var c=Yb[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=Yb._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("ISet.-disjoin",a);}return a}
function Zb(a){if(null!=a&&null!=a.lb)a=a.lb(a);else{var b=Zb[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Zb._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IStack.-peek",a);}return a}function $b(a){if(null!=a&&null!=a.mb)a=a.mb(a);else{var b=$b[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=$b._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IStack.-pop",a);}return a}function ac(){}
function bc(a){if(null!=a&&null!=a.Va)a=a.Va(a);else{var b=bc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=bc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IDeref.-deref",a);}return a}function cc(){}function dc(a){if(null!=a&&null!=a.M)a=a.M(a);else{var b=dc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=dc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IMeta.-meta",a);}return a}
function ec(a,b){if(null!=a&&null!=a.P)a=a.P(a,b);else{var c=ec[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=ec._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IWithMeta.-with-meta",a);}return a}function fc(){}
var hc=function(){function a(d,e,f){var h=gc[q(null==d?null:d)];if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);h=gc._;if(null!=h)return h.f?h.f(d,e,f):h.call(null,d,e,f);throw A("IReduce.-reduce",d);}function b(d,e){var f=gc[q(null==d?null:d)];if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);f=gc._;if(null!=f)return f.b?f.b(d,e):f.call(null,d,e);throw A("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.b=b;c.f=a;return c}(),gc=function gc(a){switch(arguments.length){case 2:return gc.b(arguments[0],arguments[1]);case 3:return gc.f(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};gc.b=function(a,b){return null!=a&&null!=a.ba?a.ba(a,b):hc.b(a,b)};gc.f=function(a,b,c){return null!=a&&null!=a.ca?a.ca(a,b,c):hc.f(a,b,c)};gc.v=3;function ic(){}
function jc(a,b,c){if(null!=a&&null!=a.Fb)a=a.Fb(a,b,c);else{var d=jc[q(null==a?null:a)];if(null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=jc._,null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("IKVReduce.-kv-reduce",a);}return a}function kc(a,b){if(null!=a&&null!=a.B)a=a.B(a,b);else{var c=kc[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=kc._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IEquiv.-equiv",a);}return a}
function lc(a){if(null!=a&&null!=a.R)a=a.R(a);else{var b=lc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=lc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IHash.-hash",a);}return a}function mc(){}function nc(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=nc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=nc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("ISeqable.-seq",a);}return a}function oc(){}function pc(){}function qc(){}function rc(){}
function sc(a){if(null!=a&&null!=a.Gb)a=a.Gb(a);else{var b=sc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=sc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IReversible.-rseq",a);}return a}function tc(a,b){if(null!=a&&null!=a.qc)a=a.qc(a,b);else{var c=tc[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=tc._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IWriter.-write",a);}return a}function uc(){}
function vc(a,b,c){if(null!=a&&null!=a.N)a=a.N(a,b,c);else{var d=vc[q(null==a?null:a)];if(null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=vc._,null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("IPrintWithWriter.-pr-writer",a);}return a}function wc(a,b,c){if(null!=a&&null!=a.Hb)a.Hb(a,b,c);else{var d=wc[q(null==a?null:a)];if(null!=d)d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=wc._,null!=d)d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("IWatchable.-add-watch",a);}}
function xc(a,b){if(null!=a&&null!=a.Ib)a.Ib(a,b);else{var c=xc[q(null==a?null:a)];if(null!=c)c.b?c.b(a,b):c.call(null,a,b);else if(c=xc._,null!=c)c.b?c.b(a,b):c.call(null,a,b);else throw A("IWatchable.-remove-watch",a);}}function yc(a){if(null!=a&&null!=a.cb)a=a.cb(a);else{var b=yc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=yc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IEditableCollection.-as-transient",a);}return a}
function zc(a,b){if(null!=a&&null!=a.fb)a=a.fb(a,b);else{var c=zc[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=zc._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("ITransientCollection.-conj!",a);}return a}function Ac(a){if(null!=a&&null!=a.nb)a=a.nb(a);else{var b=Ac[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Ac._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("ITransientCollection.-persistent!",a);}return a}
function Bc(a,b,c){if(null!=a&&null!=a.eb)a=a.eb(a,b,c);else{var d=Bc[q(null==a?null:a)];if(null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=Bc._,null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("ITransientAssociative.-assoc!",a);}return a}function Cc(a){if(null!=a&&null!=a.Rb)a=a.Rb(a);else{var b=Cc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Cc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IChunk.-drop-first",a);}return a}
function Dc(a){if(null!=a&&null!=a.Eb)a=a.Eb(a);else{var b=Dc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Dc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-first",a);}return a}function Ec(a){if(null!=a&&null!=a.bb)a=a.bb(a);else{var b=Ec[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Ec._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-rest",a);}return a}
function Fc(a,b){if(null!=a&&null!=a.na)a=a.na(a,b);else{var c=Fc[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=Fc._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IReset.-reset!",a);}return a}
var Hc=function(){function a(f,h,k,l,m){var n=Gc[q(null==f?null:f)];if(null!=n)return n.O?n.O(f,h,k,l,m):n.call(null,f,h,k,l,m);n=Gc._;if(null!=n)return n.O?n.O(f,h,k,l,m):n.call(null,f,h,k,l,m);throw A("ISwap.-swap!",f);}function b(f,h,k,l){var m=Gc[q(null==f?null:f)];if(null!=m)return m.u?m.u(f,h,k,l):m.call(null,f,h,k,l);m=Gc._;if(null!=m)return m.u?m.u(f,h,k,l):m.call(null,f,h,k,l);throw A("ISwap.-swap!",f);}function c(f,h,k){var l=Gc[q(null==f?null:f)];if(null!=l)return l.f?l.f(f,h,k):l.call(null,
f,h,k);l=Gc._;if(null!=l)return l.f?l.f(f,h,k):l.call(null,f,h,k);throw A("ISwap.-swap!",f);}function d(f,h){var k=Gc[q(null==f?null:f)];if(null!=k)return k.b?k.b(f,h):k.call(null,f,h);k=Gc._;if(null!=k)return k.b?k.b(f,h):k.call(null,f,h);throw A("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.b=d;e.f=c;e.u=b;e.O=a;return e}(),Gc=function Gc(a){switch(arguments.length){case 2:return Gc.b(arguments[0],arguments[1]);case 3:return Gc.f(arguments[0],arguments[1],arguments[2]);case 4:return Gc.u(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Gc.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};Gc.b=function(a,b){return null!=a&&null!=a.Ub?a.Ub(a,b):Hc.b(a,b)};
Gc.f=function(a,b,c){return null!=a&&null!=a.Vb?a.Vb(a,b,c):Hc.f(a,b,c)};Gc.u=function(a,b,c,d){return null!=a&&null!=a.Wb?a.Wb(a,b,c,d):Hc.u(a,b,c,d)};Gc.O=function(a,b,c,d,e){return null!=a&&null!=a.Xb?a.Xb(a,b,c,d,e):Hc.O(a,b,c,d,e)};Gc.v=5;function Ic(){}function Jc(a){if(null!=a&&null!=a.ma)a=a.ma(a);else{var b=Jc[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=Jc._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IIterable.-iterator",a);}return a}
function Kc(a){this.gd=a;this.h=1073741824;this.w=0}Kc.prototype.qc=function(a,b){return this.gd.append(b)};function Lc(a){var b=new Ya;a.N(null,new Kc(b),ib());return C.a(b)}var Mc="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Nc(a){a=Mc(a|0,-862048943);return Mc(a<<15|a>>>-15,461845907)}
function Oc(a,b){a=(a|0)^(b|0);return Mc(a<<13|a>>>-13,5)+-430675100|0}function Pc(a,b){a=(a|0)^b;a=Mc(a^a>>>16,-2048144789);a=Mc(a^a>>>13,-1028477387);return a^a>>>16}function Qc(a){a:{var b=1;for(var c=0;;)if(b<a.length){var d=b+2;c=Oc(c,Nc(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}}b=1===(a.length&1)?b^Nc(a.charCodeAt(a.length-1)):b;return Pc(b,Mc(2,a.length))}var Rc={},Sc=0;
function Tc(a){255<Sc&&(Rc={},Sc=0);if(null==a)return 0;var b=Rc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b){var e=c+1;d=Mc(31,d)+a.charCodeAt(c);c=e}else{b=d;break a}else b=0;else b=0;Rc[a]=b;Sc+=1;a=b}return a}
function Vc(a){if(null!=a&&(a.h&4194304||t===a.pd))return a.R(null)^0;if("number"===typeof a){if(v(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=Tc(a),0!==a&&(a=Nc(a),a=Oc(0,a),a=Pc(a,4))):a=a instanceof Date?a.valueOf()^0:null==a?0:lc(a)^0,a}function Wc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function Xc(a,b,c,d,e){this.yb=a;this.name=b;this.Ta=c;this.ab=d;this.ua=e;this.h=2154168321;this.w=4096}g=Xc.prototype;g.toString=function(){return this.Ta};g.equiv=function(a){return this.B(null,a)};g.B=function(a,b){return b instanceof Xc?this.Ta===b.Ta:!1};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return D.b(c,this);case 3:return D.f(c,this,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return D.b(c,this)};a.f=function(b,c,d){return D.f(c,this,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return D.b(a,this)};g.b=function(a,b){return D.f(a,this,b)};g.M=function(){return this.ua};
g.P=function(a,b){return new Xc(this.yb,this.name,this.Ta,this.ab,b)};g.R=function(){var a=this.ab;return null!=a?a:this.ab=a=Wc(Qc(this.name),Tc(this.yb))};g.N=function(a,b){return tc(b,this.Ta)};var Yc=function Yc(a){switch(arguments.length){case 1:return Yc.a(arguments[0]);case 2:return Yc.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};
Yc.a=function(a){for(;;){if(a instanceof Xc)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Yc.b(null,a):Yc.b(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof E)a=a.oa;else throw Error("no conversion to symbol");}};Yc.b=function(a,b){var c=null!=a?[C.a(a),"/",C.a(b)].join(""):b;return new Xc(a,b,c,null,null)};Yc.v=2;function Zc(a){return null!=a?a.w&131072||t===a.qd?!0:a.w?!1:z(Ic,a):z(Ic,a)}
function G(a){if(null==a)return null;if(null!=a&&(a.h&8388608||t===a.Xc))return a.T(null);if(pb(a)||"string"===typeof a)return 0===a.length?null:new H(a,0,null);if(null!=a&&null!=a[sb])return $c(ya(a,sb).call(a));if(z(mc,a))return nc(a);throw Error([C.a(a)," is not ISeqable"].join(""));}function M(a){if(null==a)return null;if(null!=a&&(a.h&64||t===a.V))return a.Z(null);a=G(a);return null==a?null:Jb(a)}function ad(a){return null!=a?null!=a&&(a.h&64||t===a.V)?a.da(null):(a=G(a))?a.da(null):bd:bd}
function O(a){return null==a?null:null!=a&&(a.h&128||t===a.kb)?a.X(null):G(ad(a))}var cd=function cd(a){switch(arguments.length){case 1:return cd.a(arguments[0]);case 2:return cd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return cd.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};cd.a=function(){return!0};cd.b=function(a,b){return null==a?null==b:a===b||kc(a,b)};
cd.i=function(a,b,c){for(;;)if(cd.b(a,b))if(O(c))a=b,b=M(c),c=O(c);else return cd.b(b,M(c));else return!1};cd.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};cd.v=2;function dd(a){this.D=a}dd.prototype.next=function(){if(null!=this.D){var a=M(this.D);this.D=O(this.D);return{value:a,done:!1}}return{value:null,done:!0}};function ed(a){return new dd(G(a))}function fd(a,b){this.value=a;this.vb=b;this.Pb=null;this.h=8388672;this.w=0}fd.prototype.T=function(){return this};
fd.prototype.Z=function(){return this.value};fd.prototype.da=function(){null==this.Pb&&(this.Pb=$c(this.vb));return this.Pb};function $c(a){var b=a.next();return v(b.done)?null:new fd(b.value,a)}function gd(a,b){a=Nc(a);a=Oc(0,a);return Pc(a,b)}function hd(a){var b=0,c=1;for(a=G(a);;)if(null!=a)b+=1,c=Mc(31,c)+Vc(M(a))|0,a=O(a);else return gd(c,b)}var id=gd(1,0);function jd(a){var b=0,c=0;for(a=G(a);;)if(null!=a)b+=1,c=c+Vc(M(a))|0,a=O(a);else return gd(c,b)}var kd=gd(0,0);zb["null"]=!0;
Ab["null"]=function(){return 0};Date.prototype.B=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};kc.number=function(a,b){return a===b};xb["function"]=!0;cc["function"]=!0;dc["function"]=function(){return null};lc._=function(a){return da(a)};function ld(a){return a+1}function md(){this.val=!1;this.h=32768;this.w=0}md.prototype.Va=function(){return this.val};function nd(a){return a instanceof md}
function od(a,b){var c=a.L(null);if(0===c)return b.l?b.l():b.call(null);for(var d=a.H(null,0),e=1;;)if(e<c){var f=a.H(null,e);d=b.b?b.b(d,f):b.call(null,d,f);if(nd(d))return bc(d);e+=1}else return d}function pd(a,b){var c=a.length;if(0===a.length)return b.l?b.l():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.b?b.b(d,f):b.call(null,d,f);if(nd(d))return bc(d);e+=1}else return d}
function qd(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.b?b.b(e,f):b.call(null,e,f);if(nd(e))return bc(e);c+=1}else return e}function rd(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.b?b.b(c,f):b.call(null,c,f);if(nd(c))return bc(c);d+=1}else return c}function sd(a){return null!=a?a.h&2||t===a.Lc?!0:a.h?!1:z(zb,a):z(zb,a)}function td(a){return null!=a?a.h&16||t===a.mc?!0:a.h?!1:z(Fb,a):z(Fb,a)}
function P(a,b,c){var d=R(a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(cd.b(ud(a,c),b))return c;c+=1}else return-1}function vd(a,b,c){var d=R(a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(cd.b(ud(a,c),b))return c;--c}else return-1}function wd(a,b){this.c=a;this.m=b}wd.prototype.ea=function(){return this.m<this.c.length};wd.prototype.next=function(){var a=this.c[this.m];this.m+=1;return a};
function H(a,b,c){this.c=a;this.m=b;this.o=c;this.h=166592766;this.w=139264}g=H.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.H=function(a,b){a=b+this.m;if(0<=a&&a<this.c.length)return this.c[a];throw Error("Index out of bounds");};g.aa=function(a,b,c){a=b+this.m;return 0<=a&&a<this.c.length?this.c[a]:c};g.ma=function(){return new wd(this.c,this.m)};
g.M=function(){return this.o};g.X=function(){return this.m+1<this.c.length?new H(this.c,this.m+1,null):null};g.L=function(){var a=this.c.length-this.m;return 0>a?0:a};g.Gb=function(){var a=this.L(null);return 0<a?new xd(this,a-1,null):null};g.R=function(){return hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return rd(this.c,b,this.c[this.m],this.m+1)};g.ca=function(a,b,c){return rd(this.c,b,c,this.m)};g.Z=function(){return this.c[this.m]};
g.da=function(){return this.m+1<this.c.length?new H(this.c,this.m+1,null):bd};g.T=function(){return this.m<this.c.length?this:null};g.P=function(a,b){return b===this.o?this:new H(this.c,this.m,b)};g.Y=function(a,b){return zd(b,this)};H.prototype[sb]=function(){return ed(this)};function S(a){return 0<a.length?new H(a,0,null):null}function xd(a,b,c){this.Db=a;this.m=b;this.o=c;this.h=32374990;this.w=8192}g=xd.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return 0<this.m?new xd(this.Db,this.m-1,null):null};g.L=function(){return this.m+1};g.R=function(){return hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};
g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return Gb.b(this.Db,this.m)};g.da=function(){return 0<this.m?new xd(this.Db,this.m-1,null):bd};g.T=function(){return this};g.P=function(a,b){return b===this.o?this:new xd(this.Db,this.m,b)};g.Y=function(a,b){return zd(b,this)};xd.prototype[sb]=function(){return ed(this)};kc._=function(a,b){return a===b};
var Cd=function Cd(a){switch(arguments.length){case 0:return Cd.l();case 1:return Cd.a(arguments[0]);case 2:return Cd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Cd.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Cd.l=function(){return Dd};Cd.a=function(a){return a};Cd.b=function(a,b){return null!=a?Eb(a,b):new Ed(null,b,null,1,null)};
Cd.i=function(a,b,c){for(;;)if(v(c))a=Cd.b(a,b),b=M(c),c=O(c);else return Cd.b(a,b)};Cd.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Cd.v=2;function Fd(a){return null==a?null:null!=a&&(a.h&4||t===a.Nc)?a.W(null):(null!=a?a.h&4||t===a.Nc||(a.h?0:z(Bb,a)):z(Bb,a))?Cb(a):null}
function R(a){if(null!=a)if(null!=a&&(a.h&2||t===a.Lc))a=a.L(null);else if(pb(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.h&8388608||t===a.Xc))a:{a=G(a);for(var b=0;;){if(sd(a)){a=b+Ab(a);break a}a=O(a);b+=1}}else a=Ab(a);else a=0;return a}function Gd(a,b){for(var c=null;;){if(null==a)return c;if(0===b)return G(a)?M(a):c;if(td(a))return Gb.f(a,b,c);if(G(a))a=O(a),--b;else return c}}
function ud(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.h&16||t===a.mc))return a.H(null,b);if(pb(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.h&64||t===a.V)||null!=a&&(a.h&16777216||t===a.oc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(G(a)){a=M(a);break a}throw Error("Index out of bounds");}if(td(a)){a=Gb.b(a,b);break a}if(G(a))a=O(a),--b;else throw Error("Index out of bounds");}return a}if(z(Fb,a))return Gb.b(a,b);throw Error(["nth not supported on this type ",C.a(rb(null==a?null:a.constructor))].join(""));}
function U(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return null;if(null!=a&&(a.h&16||t===a.mc))return a.aa(null,b,null);if(pb(a))return-1<b&&b<a.length?a[b|0]:null;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):null;if(null!=a&&(a.h&64||t===a.V)||null!=a&&(a.h&16777216||t===a.oc))return 0>b?null:Gd(a,b);if(z(Fb,a))return Gb.f(a,b,null);throw Error(["nth not supported on this type ",C.a(rb(null==a?null:a.constructor))].join(""));}
var D=function D(a){switch(arguments.length){case 2:return D.b(arguments[0],arguments[1]);case 3:return D.f(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};D.b=function(a,b){return null==a?null:null!=a&&(a.h&256||t===a.Sc)?a.S(null,b):pb(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:z(Nb,a)?Ob.b(a,b):null};
D.f=function(a,b,c){return null!=a?null!=a&&(a.h&256||t===a.Sc)?a.C(null,b,c):pb(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:z(Nb,a)?Ob.f(a,b,c):c:c};D.v=3;var Hd=function Hd(a){switch(arguments.length){case 3:return Hd.f(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Hd.i(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};
Hd.f=function(a,b,c){return null!=a&&(a.h&512||t===a.jd)?a.Qa(null,b,c):null!=a?Rb(a,b,c):Id([b,c])};Hd.i=function(a,b,c,d){for(;;)if(a=Hd.f(a,b,c),v(d))b=M(d),c=M(O(d)),d=O(O(d));else return a};Hd.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);d=O(d);return this.i(b,a,c,d)};Hd.v=3;
var Jd=function Jd(a){switch(arguments.length){case 1:return Jd.a(arguments[0]);case 2:return Jd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Jd.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Jd.a=function(a){return a};Jd.b=function(a,b){return null==a?null:Ub(a,b)};Jd.i=function(a,b,c){for(;;){if(null==a)return null;a=Jd.b(a,b);if(v(c))b=M(c),c=O(c);else return a}};
Jd.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Jd.v=2;function Kd(a){var b=ba(a);return b?b:null!=a?t===a.Kc?!0:a.ac?!1:z(xb,a):z(xb,a)}function Ld(a,b){this.g=a;this.o=b;this.h=393217;this.w=0}g=Ld.prototype;g.M=function(){return this.o};g.P=function(a,b){return new Ld(this.g,b)};g.Kc=t;
g.call=function(){function a(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc,Xf){return Md(this.g,F,J,K,L,S([N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc,Xf]))}function b(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc){x=this;return x.g.Ha?x.g.Ha(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc)}function c(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb){x=this;return x.g.Ga?x.g.Ga(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,
Ra,cb,Qb):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb)}function d(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb){x=this;return x.g.Fa?x.g.Fa(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb)}function e(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra){x=this;return x.g.Ea?x.g.Ea(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra)}function f(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca){x=
this;return x.g.Da?x.g.Da(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca)}function h(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va){x=this;return x.g.Ca?x.g.Ca(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va)}function k(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa){x=this;return x.g.Ba?x.g.Ba(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa)}function l(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na){x=this;return x.g.Aa?
x.g.Aa(F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na)}function m(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia){x=this;return x.g.za?x.g.za(F,J,K,L,N,Q,T,V,Y,ca,fa,ia):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa,ia)}function n(x,F,J,K,L,N,Q,T,V,Y,ca,fa){x=this;return x.g.ya?x.g.ya(F,J,K,L,N,Q,T,V,Y,ca,fa):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca,fa)}function p(x,F,J,K,L,N,Q,T,V,Y,ca){x=this;return x.g.xa?x.g.xa(F,J,K,L,N,Q,T,V,Y,ca):x.g.call(null,F,J,K,L,N,Q,T,V,Y,ca)}function r(x,F,J,K,L,N,Q,T,V,
Y){x=this;return x.g.Ka?x.g.Ka(F,J,K,L,N,Q,T,V,Y):x.g.call(null,F,J,K,L,N,Q,T,V,Y)}function w(x,F,J,K,L,N,Q,T,V){x=this;return x.g.Ja?x.g.Ja(F,J,K,L,N,Q,T,V):x.g.call(null,F,J,K,L,N,Q,T,V)}function y(x,F,J,K,L,N,Q,T){x=this;return x.g.Ia?x.g.Ia(F,J,K,L,N,Q,T):x.g.call(null,F,J,K,L,N,Q,T)}function B(x,F,J,K,L,N,Q){x=this;return x.g.ja?x.g.ja(F,J,K,L,N,Q):x.g.call(null,F,J,K,L,N,Q)}function I(x,F,J,K,L,N){x=this;return x.g.O?x.g.O(F,J,K,L,N):x.g.call(null,F,J,K,L,N)}function W(x,F,J,K,L){x=this;return x.g.u?
x.g.u(F,J,K,L):x.g.call(null,F,J,K,L)}function ha(x,F,J,K){x=this;return x.g.f?x.g.f(F,J,K):x.g.call(null,F,J,K)}function wa(x,F,J){x=this;return x.g.b?x.g.b(F,J):x.g.call(null,F,J)}function Na(x,F){x=this;return x.g.a?x.g.a(F):x.g.call(null,F)}function db(x){x=this;return x.g.l?x.g.l():x.g.call(null)}var xa=null;xa=function(x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc,Xf){switch(arguments.length){case 1:return db.call(this,x);case 2:return Na.call(this,x,F);case 3:return wa.call(this,x,F,
J);case 4:return ha.call(this,x,F,J,K);case 5:return W.call(this,x,F,J,K,L);case 6:return I.call(this,x,F,J,K,L,N);case 7:return B.call(this,x,F,J,K,L,N,Q);case 8:return y.call(this,x,F,J,K,L,N,Q,T);case 9:return w.call(this,x,F,J,K,L,N,Q,T,V);case 10:return r.call(this,x,F,J,K,L,N,Q,T,V,Y);case 11:return p.call(this,x,F,J,K,L,N,Q,T,V,Y,ca);case 12:return n.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa);case 13:return m.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia);case 14:return l.call(this,x,F,J,K,L,N,Q,T,V,Y,
ca,fa,ia,na);case 15:return k.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa);case 16:return h.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va);case 17:return f.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca);case 18:return e.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra);case 19:return d.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb);case 20:return c.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb);case 21:return b.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,
Ca,Ra,cb,Qb,Uc);case 22:return a.call(this,x,F,J,K,L,N,Q,T,V,Y,ca,fa,ia,na,pa,va,Ca,Ra,cb,Qb,Uc,Xf)}throw Error("Invalid arity: "+(arguments.length-1));};xa.a=db;xa.b=Na;xa.f=wa;xa.u=ha;xa.O=W;xa.ja=I;xa.Ia=B;xa.Ja=y;xa.Ka=w;xa.xa=r;xa.ya=p;xa.za=n;xa.Aa=m;xa.Ba=l;xa.Ca=k;xa.Da=h;xa.Ea=f;xa.Fa=e;xa.Ga=d;xa.Ha=c;xa.Rc=b;xa.od=a;return xa}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.l=function(){return this.g.l?this.g.l():this.g.call(null)};
g.a=function(a){return this.g.a?this.g.a(a):this.g.call(null,a)};g.b=function(a,b){return this.g.b?this.g.b(a,b):this.g.call(null,a,b)};g.f=function(a,b,c){return this.g.f?this.g.f(a,b,c):this.g.call(null,a,b,c)};g.u=function(a,b,c,d){return this.g.u?this.g.u(a,b,c,d):this.g.call(null,a,b,c,d)};g.O=function(a,b,c,d,e){return this.g.O?this.g.O(a,b,c,d,e):this.g.call(null,a,b,c,d,e)};g.ja=function(a,b,c,d,e,f){return this.g.ja?this.g.ja(a,b,c,d,e,f):this.g.call(null,a,b,c,d,e,f)};
g.Ia=function(a,b,c,d,e,f,h){return this.g.Ia?this.g.Ia(a,b,c,d,e,f,h):this.g.call(null,a,b,c,d,e,f,h)};g.Ja=function(a,b,c,d,e,f,h,k){return this.g.Ja?this.g.Ja(a,b,c,d,e,f,h,k):this.g.call(null,a,b,c,d,e,f,h,k)};g.Ka=function(a,b,c,d,e,f,h,k,l){return this.g.Ka?this.g.Ka(a,b,c,d,e,f,h,k,l):this.g.call(null,a,b,c,d,e,f,h,k,l)};g.xa=function(a,b,c,d,e,f,h,k,l,m){return this.g.xa?this.g.xa(a,b,c,d,e,f,h,k,l,m):this.g.call(null,a,b,c,d,e,f,h,k,l,m)};
g.ya=function(a,b,c,d,e,f,h,k,l,m,n){return this.g.ya?this.g.ya(a,b,c,d,e,f,h,k,l,m,n):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.za=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.g.za?this.g.za(a,b,c,d,e,f,h,k,l,m,n,p):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};g.Aa=function(a,b,c,d,e,f,h,k,l,m,n,p,r){return this.g.Aa?this.g.Aa(a,b,c,d,e,f,h,k,l,m,n,p,r):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r)};
g.Ba=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w){return this.g.Ba?this.g.Ba(a,b,c,d,e,f,h,k,l,m,n,p,r,w):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w)};g.Ca=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y){return this.g.Ca?this.g.Ca(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y)};g.Da=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B){return this.g.Da?this.g.Da(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B)};
g.Ea=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I){return this.g.Ea?this.g.Ea(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I)};g.Fa=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W){return this.g.Fa?this.g.Fa(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W)};
g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha){return this.g.Ga?this.g.Ga(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha)};g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa){return this.g.Ha?this.g.Ha(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa):this.g.call(null,a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa)};g.Rc=function(a,b,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na){return Md(this.g,a,b,c,d,S([e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na]))};
function Nd(a,b){return ba(a)?new Ld(a,b):null==a?null:ec(a,b)}function Od(a){return null!=a&&(null!=a?a.h&131072||t===a.Vc||(a.h?0:z(cc,a)):z(cc,a))?dc(a):null}var Pd=function Pd(a){switch(arguments.length){case 1:return Pd.a(arguments[0]);case 2:return Pd.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Pd.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Pd.a=function(a){return a};
Pd.b=function(a,b){return null==a?null:Yb(a,b)};Pd.i=function(a,b,c){for(;;){if(null==a)return null;a=Pd.b(a,b);if(v(c))b=M(c),c=O(c);else return a}};Pd.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Pd.v=2;function Qd(a){return null==a||qb(G(a))}function Rd(a){return null==a?!1:null!=a?a.h&8||t===a.ld?!0:a.h?!1:z(Db,a):z(Db,a)}function Sd(a){return null==a?!1:null!=a?a.h&4096||t===a.xd?!0:a.h?!1:z(Xb,a):z(Xb,a)}
function Td(a){return null!=a?a.h&16777216||t===a.oc?!0:a.h?!1:z(oc,a):z(oc,a)}function Ud(a){return null==a?!1:null!=a?a.h&1024||t===a.td?!0:a.h?!1:z(Tb,a):z(Tb,a)}function Vd(a){return null!=a?a.h&67108864||t===a.vd?!0:a.h?!1:z(qc,a):z(qc,a)}function Wd(a){return null!=a?a.h&16384||t===a.yd?!0:a.h?!1:z(ac,a):z(ac,a)}function Xd(a){return null!=a?a.w&512||t===a.kd?!0:!1:!1}function Yd(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Zd={};
function $d(a){return null==a?!1:null!=a?a.h&64||t===a.V?!0:a.h?!1:z(Ib,a):z(Ib,a)}function ae(a){return null==a?!1:!1===a?!1:!0}function be(a){var b=Kd(a);return b?b:null!=a?a.h&1||t===a.nd?!0:a.h?!1:z(yb,a):z(yb,a)}function ce(a,b){return D.f(a,b,Zd)===Zd?!1:!0}function Ad(a,b){return(b=G(b))?vb(a,M(b),O(b)):a.l?a.l():a.call(null)}function Bd(a,b,c){for(c=G(c);;)if(c){var d=M(c);b=a.b?a.b(b,d):a.call(null,b,d);if(nd(b))return bc(b);c=O(c)}else return b}
function de(a,b){a=Jc(a);if(v(a.ea()))for(var c=a.next();;)if(a.ea()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(nd(c))return bc(c)}else return c;else return b.l?b.l():b.call(null)}function ee(a,b,c){for(a=Jc(a);;)if(a.ea()){var d=a.next();c=b.b?b.b(c,d):b.call(null,c,d);if(nd(c))return bc(c)}else return c}function fe(a,b){return null!=b&&(b.h&524288||t===b.Wc)?b.ba(null,a):pb(b)?pd(b,a):"string"===typeof b?pd(b,a):z(fc,b)?gc.b(b,a):Zc(b)?de(b,a):Ad(a,b)}
function vb(a,b,c){return null!=c&&(c.h&524288||t===c.Wc)?c.ca(null,a,b):pb(c)?qd(c,a,b):"string"===typeof c?qd(c,a,b):z(fc,c)?gc.f(c,a,b):Zc(c)?ee(c,a,b):Bd(a,b,c)}function ge(a,b,c){return null!=c?jc(c,a,b):b}function he(a){return a}function ie(a,b,c,d){a=a.a?a.a(b):a.call(null,b);c=vb(a,c,d);return a.a?a.a(c):a.call(null,c)}
var je=function je(a){switch(arguments.length){case 0:return je.l();case 1:return je.a(arguments[0]);case 2:return je.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return je.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};je.l=function(){return 0};je.a=function(a){return a};je.b=function(a,b){return a+b};je.i=function(a,b,c){return vb(je,a+b,c)};je.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};
je.v=2;var ke=function ke(a){switch(arguments.length){case 0:return ke.l();case 1:return ke.a(arguments[0]);case 2:return ke.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ke.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};ke.l=function(){return 1};ke.a=function(a){return a};ke.b=function(a,b){return a*b};ke.i=function(a,b,c){return vb(ke,a*b,c)};
ke.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};ke.v=2;function le(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}function me(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var C=function C(a){switch(arguments.length){case 0:return C.l();case 1:return C.a(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return C.i(arguments[0],new H(c.slice(1),0,null))}};C.l=function(){return""};
C.a=function(a){return null==a?"":[a].join("")};C.i=function(a,b){for(a=new Ya(C.a(a));;)if(v(b))a=a.append(C.a(M(b))),b=O(b);else return a.toString()};C.s=function(a){var b=M(a);a=O(a);return this.i(b,a)};C.v=1;function yd(a,b){if(Td(b))if(sd(a)&&sd(b)&&R(a)!==R(b))a=!1;else a:for(a=G(a),b=G(b);;){if(null==a){a=null==b;break a}if(null!=b&&cd.b(M(a),M(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return ae(a)}
function Ed(a,b,c,d,e){this.o=a;this.first=b;this.Oa=c;this.count=d;this.A=e;this.h=65937646;this.w=8192}g=Ed.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return 1===this.count?null:this.Oa};g.L=function(){return this.count};g.lb=function(){return this.first};g.mb=function(){return this.da(null)};
g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return ec(bd,this.o)};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return this.first};g.da=function(){return 1===this.count?bd:this.Oa};g.T=function(){return this};g.P=function(a,b){return b===this.o?this:new Ed(b,this.first,this.Oa,this.count,this.A)};g.Y=function(a,b){return new Ed(this.o,b,this,this.count+1,null)};
function ne(a){return null!=a?a.h&33554432||t===a.sd?!0:a.h?!1:z(pc,a):z(pc,a)}Ed.prototype[sb]=function(){return ed(this)};function oe(a){this.o=a;this.h=65937614;this.w=8192}g=oe.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return null};g.L=function(){return 0};g.lb=function(){return null};g.mb=function(){throw Error("Can't pop empty list");};g.R=function(){return id};
g.B=function(a,b){return ne(b)||Td(b)?null==G(b):!1};g.W=function(){return this};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return null};g.da=function(){return bd};g.T=function(){return null};g.P=function(a,b){return b===this.o?this:new oe(b)};g.Y=function(a,b){return new Ed(this.o,b,null,1,null)};var bd=new oe(null);oe.prototype[sb]=function(){return ed(this)};
function pe(a){return(null!=a?a.h&134217728||t===a.wd||(a.h?0:z(rc,a)):z(rc,a))?(a=sc(a))?a:bd:vb(Cd,bd,a)}var qe=function qe(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return qe.i(0<c.length?new H(c.slice(0),0,null):null)};qe.i=function(a){if(a instanceof H&&0===a.m)var b=a.c;else a:for(b=[];;)if(null!=a)b.push(Jb(a)),a=Mb(a);else break a;a=b.length;for(var c=bd;;)if(0<a){var d=a-1;c=Eb(c,b[a-1]);a=d}else return c};qe.v=0;qe.s=function(a){return this.i(G(a))};
function re(a,b,c,d){this.o=a;this.first=b;this.Oa=c;this.A=d;this.h=65929452;this.w=8192}g=re.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return null==this.Oa?null:G(this.Oa)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};
g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return this.first};g.da=function(){return null==this.Oa?bd:this.Oa};g.T=function(){return this};g.P=function(a,b){return b===this.o?this:new re(b,this.first,this.Oa,this.A)};g.Y=function(a,b){return new re(null,b,this,null)};re.prototype[sb]=function(){return ed(this)};function zd(a,b){return null==b?new Ed(null,a,null,1,null):null!=b&&(b.h&64||t===b.V)?new re(null,a,b,null):new re(null,a,G(b),null)}
function E(a,b,c,d){this.yb=a;this.name=b;this.oa=c;this.ab=d;this.h=2153775105;this.w=4096}g=E.prototype;g.toString=function(){return[":",C.a(this.oa)].join("")};g.equiv=function(a){return this.B(null,a)};g.B=function(a,b){return b instanceof E?this.oa===b.oa:!1};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return D.b(c,this);case 3:return D.f(c,this,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return D.b(c,this)};a.f=function(b,c,d){return D.f(c,this,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return D.b(a,this)};g.b=function(a,b){return D.f(a,this,b)};
g.R=function(){var a=this.ab;return null!=a?a:this.ab=a=Wc(Qc(this.name),Tc(this.yb))+2654435769|0};g.N=function(a,b){return tc(b,[":",C.a(this.oa)].join(""))};function se(a,b){return a===b?!0:a instanceof E&&b instanceof E?a.oa===b.oa:!1}function te(a){if(null!=a&&(a.w&4096||t===a.nc))return a.yb;throw Error(["Doesn't support namespace: ",C.a(a)].join(""));}
var ue=function ue(a){switch(arguments.length){case 1:return ue.a(arguments[0]);case 2:return ue.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};ue.a=function(a){if(a instanceof E)return a;if(a instanceof Xc)return new E(te(a),ve(a),a.Ta,null);if(cd.b("/",a))return new E(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null)}return null};
ue.b=function(a,b){a=a instanceof E?ve(a):a instanceof Xc?ve(a):a;b=b instanceof E?ve(b):b instanceof Xc?ve(b):b;return new E(a,b,[v(a)?[C.a(a),"/"].join(""):null,C.a(b)].join(""),null)};ue.v=2;function we(a,b,c){this.o=a;this.qb=b;this.D=null;this.A=c;this.h=32374988;this.w=1}g=we.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};function xe(a){null!=a.qb&&(a.D=a.qb.l?a.qb.l():a.qb.call(null),a.qb=null);return a.D}
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){this.T(null);return null==this.D?null:O(this.D)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};
g.W=function(){return ec(bd,this.o)};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){this.T(null);return null==this.D?null:M(this.D)};g.da=function(){this.T(null);return null!=this.D?ad(this.D):bd};g.T=function(){xe(this);if(null==this.D)return null;for(var a=this.D;;)if(a instanceof we)a=xe(a);else return this.D=a,G(this.D)};g.P=function(a,b){var c=this;return b===this.o?c:new we(b,function(){return c.T(null)},this.A)};
g.Y=function(a,b){return zd(b,this)};we.prototype[sb]=function(){return ed(this)};function ye(a){this.G=a;this.end=0;this.h=2;this.w=0}ye.prototype.add=function(a){this.G[this.end]=a;return this.end+=1};ye.prototype.ha=function(){var a=new ze(this.G,0,this.end);this.G=null;return a};ye.prototype.L=function(){return this.end};function ze(a,b,c){this.c=a;this.off=b;this.end=c;this.h=524306;this.w=0}g=ze.prototype;g.L=function(){return this.end-this.off};g.H=function(a,b){return this.c[this.off+b]};
g.aa=function(a,b,c){return 0<=b&&b<this.end-this.off?this.c[this.off+b]:c};g.Rb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new ze(this.c,this.off+1,this.end)};g.ba=function(a,b){return rd(this.c,b,this.c[this.off],this.off+1)};g.ca=function(a,b,c){return rd(this.c,b,c,this.off)};function Ae(a,b,c,d){this.ha=a;this.ra=b;this.o=c;this.A=d;this.h=31850732;this.w=1536}g=Ae.prototype;g.toString=function(){return Lc(this)};
g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return 1<Ab(this.ha)?new Ae(Cc(this.ha),this.ra,null,null):null==this.ra?null:nc(this.ra)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};
g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.Z=function(){return Gb.b(this.ha,0)};g.da=function(){return 1<Ab(this.ha)?new Ae(Cc(this.ha),this.ra,null,null):null==this.ra?bd:this.ra};g.T=function(){return this};g.Eb=function(){return this.ha};g.bb=function(){return null==this.ra?bd:this.ra};g.P=function(a,b){return b===this.o?this:new Ae(this.ha,this.ra,b,this.A)};g.Y=function(a,b){return zd(b,this)};g.Sb=function(){return null==this.ra?null:this.ra};Ae.prototype[sb]=function(){return ed(this)};
function Be(a,b){return 0===Ab(a)?b:new Ae(a,b,null,null)}function Ce(a,b){a.add(b)}function De(a,b){if(sd(b))return R(b);var c=0;for(b=G(b);;)if(null!=b&&c<a)c+=1,b=O(b);else return c}
var Ee=function Ee(a){if(null==a)return null;var c=O(a);return null==c?G(M(a)):zd(M(a),Ee.a?Ee.a(c):Ee.call(null,c))},Fe=function Fe(a){switch(arguments.length){case 0:return Fe.l();case 1:return Fe.a(arguments[0]);case 2:return Fe.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Fe.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Fe.l=function(){return new we(null,function(){return null},null)};
Fe.a=function(a){return new we(null,function(){return a},null)};Fe.b=function(a,b){return new we(null,function(){var c=G(a);return c?Xd(c)?Be(Dc(c),Fe.b(Ec(c),b)):zd(M(c),Fe.b(ad(c),b)):b},null)};Fe.i=function(a,b,c){return function h(e,f){return new we(null,function(){var k=G(e);return k?Xd(k)?Be(Dc(k),h(Ec(k),f)):zd(M(k),h(ad(k),f)):v(f)?h(M(f),O(f)):null},null)}(Fe.b(a,b),c)};Fe.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Fe.v=2;
var Ge=function Ge(a){switch(arguments.length){case 0:return Ge.l();case 1:return Ge.a(arguments[0]);case 2:return Ge.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ge.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Ge.l=function(){return yc(Dd)};Ge.a=function(a){return a};Ge.b=function(a,b){return zc(a,b)};Ge.i=function(a,b,c){for(;;)if(a=zc(a,b),v(c))b=M(c),c=O(c);else return a};
Ge.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Ge.v=2;
function He(a,b,c){var d=G(c);if(0===b)return a.l?a.l():a.call(null);c=Jb(d);var e=Kb(d);if(1===b)return a.a?a.a(c):a.call(null,c);d=Jb(e);var f=Kb(e);if(2===b)return a.b?a.b(c,d):a.call(null,c,d);e=Jb(f);var h=Kb(f);if(3===b)return a.f?a.f(c,d,e):a.call(null,c,d,e);f=Jb(h);var k=Kb(h);if(4===b)return a.u?a.u(c,d,e,f):a.call(null,c,d,e,f);h=Jb(k);var l=Kb(k);if(5===b)return a.O?a.O(c,d,e,f,h):a.call(null,c,d,e,f,h);k=Jb(l);var m=Kb(l);if(6===b)return a.ja?a.ja(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);
l=Jb(m);var n=Kb(m);if(7===b)return a.Ia?a.Ia(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=Jb(n);var p=Kb(n);if(8===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=Jb(p);var r=Kb(p);if(9===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=Jb(r);var w=Kb(r);if(10===b)return a.xa?a.xa(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);r=Jb(w);var y=Kb(w);if(11===b)return a.ya?a.ya(c,d,e,f,h,k,l,m,n,p,r):a.call(null,c,d,e,f,h,k,l,m,n,p,r);w=Jb(y);var B=Kb(y);
if(12===b)return a.za?a.za(c,d,e,f,h,k,l,m,n,p,r,w):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w);y=Jb(B);var I=Kb(B);if(13===b)return a.Aa?a.Aa(c,d,e,f,h,k,l,m,n,p,r,w,y):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y);B=Jb(I);var W=Kb(I);if(14===b)return a.Ba?a.Ba(c,d,e,f,h,k,l,m,n,p,r,w,y,B):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B);I=Jb(W);var ha=Kb(W);if(15===b)return a.Ca?a.Ca(c,d,e,f,h,k,l,m,n,p,r,w,y,B,I):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I);W=Jb(ha);var wa=Kb(ha);if(16===b)return a.Da?a.Da(c,d,e,f,h,
k,l,m,n,p,r,w,y,B,I,W):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W);ha=Jb(wa);var Na=Kb(wa);if(17===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha);wa=Jb(Na);var db=Kb(Na);if(18===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa);Na=Jb(db);db=Kb(db);if(19===b)return a.Ga?a.Ga(c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na);var xa=Jb(db);
Kb(db);if(20===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na,xa):a.call(null,c,d,e,f,h,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na,xa);throw Error("Only up to 20 arguments supported on functions");}function Ie(a){return null!=a&&(a.h&128||t===a.kb)?a.X(null):G(ad(a))}function Je(a,b,c){if(null==c)a=a.a?a.a(b):a.call(a,b);else{var d=Jb(c);c=Ie(c);a=null==c?a.b?a.b(b,d):a.call(a,b,d):Ke(a,b,d,Jb(c),Ie(c))}return a}
function Ke(a,b,c,d,e){return null==e?a.f?a.f(b,c,d):a.call(a,b,c,d):Le(a,b,c,d,Jb(e),Ie(e))}
function Le(a,b,c,d,e,f){if(null==f)return a.u?a.u(b,c,d,e):a.call(a,b,c,d,e);var h=Jb(f),k=O(f);if(null==k)return a.O?a.O(b,c,d,e,h):a.call(a,b,c,d,e,h);f=Jb(k);var l=O(k);if(null==l)return a.ja?a.ja(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=Jb(l);var m=O(l);if(null==m)return a.Ia?a.Ia(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=Jb(m);var n=O(m);if(null==n)return a.Ja?a.Ja(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=Jb(n);var p=O(n);if(null==p)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,
l,m);n=Jb(p);var r=O(p);if(null==r)return a.xa?a.xa(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=Jb(r);var w=O(r);if(null==w)return a.ya?a.ya(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);r=Jb(w);var y=O(w);if(null==y)return a.za?a.za(b,c,d,e,h,f,k,l,m,n,p,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r);w=Jb(y);var B=O(y);if(null==B)return a.Aa?a.Aa(b,c,d,e,h,f,k,l,m,n,p,r,w):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w);y=Jb(B);var I=O(B);if(null==I)return a.Ba?a.Ba(b,c,d,e,h,f,k,l,m,n,p,r,w,y):a.call(a,
b,c,d,e,h,f,k,l,m,n,p,r,w,y);B=Jb(I);var W=O(I);if(null==W)return a.Ca?a.Ca(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w,y,B);I=Jb(W);var ha=O(W);if(null==ha)return a.Da?a.Da(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I);W=Jb(ha);var wa=O(ha);if(null==wa)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W);ha=Jb(wa);var Na=O(wa);if(null==Na)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha):a.call(a,b,
c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha);wa=Jb(Na);var db=O(Na);if(null==db)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha,wa):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha,wa);Na=Jb(db);db=O(db);if(null==db)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na):a.call(a,b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na);b=[b,c,d,e,h,f,k,l,m,n,p,r,w,y,B,I,W,ha,wa,Na];for(c=db;;)if(c)b.push(Jb(c)),c=O(c);else break;return a.apply(a,b)}
function Me(a,b){if(a.s){var c=a.v,d=De(c+1,b);return d<=c?He(a,d,b):a.s(b)}b=G(b);return null==b?a.l?a.l():a.call(a):Je(a,Jb(b),Ie(b))}function Ne(a,b,c){if(a.s){b=zd(b,c);var d=a.v;c=De(d,c)+1;return c<=d?He(a,c,b):a.s(b)}return Je(a,b,G(c))}function Oe(a,b,c,d,e){return a.s?(b=zd(b,zd(c,zd(d,e))),c=a.v,e=3+De(c-2,e),e<=c?He(a,e,b):a.s(b)):Ke(a,b,c,d,G(e))}function Md(a,b,c,d,e,f){return a.s?(f=Ee(f),b=zd(b,zd(c,zd(d,zd(e,f)))),c=a.v,f=4+De(c-3,f),f<=c?He(a,f,b):a.s(b)):Le(a,b,c,d,e,Ee(f))}
function Pe(){if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof ab)ab=function(a){this.bd=a;this.h=393216;this.w=0},ab.prototype.P=function(a,b){return new ab(b)},ab.prototype.M=function(){return this.bd},ab.prototype.ea=function(){return!1},ab.prototype.next=function(){return Error("No such element")},ab.prototype.remove=function(){return Error("Unsupported operation")},ab.cc=function(){return new X(null,1,5,Z,[Qe],null)},ab.gb=!0,ab.Ra="cljs.core/t_cljs$core24122",ab.pb=
function(a){return tc(a,"cljs.core/t_cljs$core24122")};return new ab(Re)}function Se(a,b){for(;;){if(null==G(b))return!0;var c=M(b);c=a.a?a.a(c):a.call(null,c);if(v(c))b=O(b);else return!1}}function Te(a,b){for(;;)if(b=G(b)){var c=M(b);c=a.a?a.a(c):a.call(null,c);if(v(c))return c;b=O(b)}else return null}function Ue(a){if("number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10))return 0===(a&1);throw Error(["Argument must be an integer: ",C.a(a)].join(""));}
function Ve(){return function(){function a(b){if(0<arguments.length)for(var c=0,d=Array(arguments.length-0);c<d.length;)d[c]=arguments[c+0],++c;return!1}a.v=0;a.s=function(b){G(b);return!1};a.i=function(){return!1};return a}()}
var We=function We(a){switch(arguments.length){case 0:return We.l();case 1:return We.a(arguments[0]);case 2:return We.b(arguments[0],arguments[1]);case 3:return We.f(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return We.i(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};We.l=function(){return he};We.a=function(a){return a};
We.b=function(a,b){return function(){function c(l,m,n){l=b.f?b.f(l,m,n):b.call(null,l,m,n);return a.a?a.a(l):a.call(null,l)}function d(l,m){l=b.b?b.b(l,m):b.call(null,l,m);return a.a?a.a(l):a.call(null,l)}function e(l){l=b.a?b.a(l):b.call(null,l);return a.a?a.a(l):a.call(null,l)}function f(){var l=b.l?b.l():b.call(null);return a.a?a.a(l):a.call(null,l)}var h=null,k=function(){function l(n,p,r,w){var y=null;if(3<arguments.length){y=0;for(var B=Array(arguments.length-3);y<B.length;)B[y]=arguments[y+
3],++y;y=new H(B,0,null)}return m.call(this,n,p,r,y)}function m(n,p,r,w){n=Oe(b,n,p,r,w);return a.a?a.a(n):a.call(null,n)}l.v=3;l.s=function(n){var p=M(n);n=O(n);var r=M(n);n=O(n);var w=M(n);n=ad(n);return m(p,r,w,n)};l.i=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var w=Array(arguments.length-3);r<w.length;)w[r]=arguments[r+
3],++r;r=new H(w,0,null)}return k.i(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};h.v=3;h.s=k.s;h.l=f;h.a=e;h.b=d;h.f=c;h.i=k.i;return h}()};
We.f=function(a,b,c){return function(){function d(m,n,p){m=c.f?c.f(m,n,p):c.call(null,m,n,p);m=b.a?b.a(m):b.call(null,m);return a.a?a.a(m):a.call(null,m)}function e(m,n){m=c.b?c.b(m,n):c.call(null,m,n);m=b.a?b.a(m):b.call(null,m);return a.a?a.a(m):a.call(null,m)}function f(m){m=c.a?c.a(m):c.call(null,m);m=b.a?b.a(m):b.call(null,m);return a.a?a.a(m):a.call(null,m)}function h(){var m=c.l?c.l():c.call(null);m=b.a?b.a(m):b.call(null,m);return a.a?a.a(m):a.call(null,m)}var k=null,l=function(){function m(p,
r,w,y){var B=null;if(3<arguments.length){B=0;for(var I=Array(arguments.length-3);B<I.length;)I[B]=arguments[B+3],++B;B=new H(I,0,null)}return n.call(this,p,r,w,B)}function n(p,r,w,y){p=Oe(c,p,r,w,y);p=b.a?b.a(p):b.call(null,p);return a.a?a.a(p):a.call(null,p)}m.v=3;m.s=function(p){var r=M(p);p=O(p);var w=M(p);p=O(p);var y=M(p);p=ad(p);return n(r,w,y,p)};m.i=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,m);case 2:return e.call(this,
m,n);case 3:return d.call(this,m,n,p);default:var w=null;if(3<arguments.length){w=0;for(var y=Array(arguments.length-3);w<y.length;)y[w]=arguments[w+3],++w;w=new H(y,0,null)}return l.i(m,n,p,w)}throw Error("Invalid arity: "+arguments.length);};k.v=3;k.s=l.s;k.l=h;k.a=f;k.b=e;k.f=d;k.i=l.i;return k}()};
We.i=function(a,b,c,d){var e=pe(zd(a,zd(b,zd(c,d))));return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new H(m,0,null)}return h.call(this,l)}function h(k){k=Me(M(e),k);for(var l=O(e);;)if(l){var m=M(l);k=m.a?m.a(k):m.call(null,k);l=O(l)}else return k}f.v=0;f.s=function(k){k=G(k);return h(k)};f.i=h;return f}()};We.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);d=O(d);return this.i(b,a,c,d)};
We.v=3;var Xe=function Xe(a){switch(arguments.length){case 1:return Xe.a(arguments[0]);case 2:return Xe.b(arguments[0],arguments[1]);case 3:return Xe.f(arguments[0],arguments[1],arguments[2]);case 4:return Xe.u(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Xe.i(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};Xe.a=function(a){return a};
Xe.b=function(a,b){return function(){function c(l,m,n){return a.u?a.u(b,l,m,n):a.call(null,b,l,m,n)}function d(l,m){return a.f?a.f(b,l,m):a.call(null,b,l,m)}function e(l){return a.b?a.b(b,l):a.call(null,b,l)}function f(){return a.a?a.a(b):a.call(null,b)}var h=null,k=function(){function l(n,p,r,w){var y=null;if(3<arguments.length){y=0;for(var B=Array(arguments.length-3);y<B.length;)B[y]=arguments[y+3],++y;y=new H(B,0,null)}return m.call(this,n,p,r,y)}function m(n,p,r,w){return Md(a,b,n,p,r,S([w]))}
l.v=3;l.s=function(n){var p=M(n);n=O(n);var r=M(n);n=O(n);var w=M(n);n=ad(n);return m(p,r,w,n)};l.i=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var r=null;if(3<arguments.length){r=0;for(var w=Array(arguments.length-3);r<w.length;)w[r]=arguments[r+3],++r;r=new H(w,0,null)}return k.i(l,m,n,r)}throw Error("Invalid arity: "+arguments.length);};h.v=3;h.s=k.s;h.l=
f;h.a=e;h.b=d;h.f=c;h.i=k.i;return h}()};
Xe.f=function(a,b,c){return function(){function d(m,n,p){return a.O?a.O(b,c,m,n,p):a.call(null,b,c,m,n,p)}function e(m,n){return a.u?a.u(b,c,m,n):a.call(null,b,c,m,n)}function f(m){return a.f?a.f(b,c,m):a.call(null,b,c,m)}function h(){return a.b?a.b(b,c):a.call(null,b,c)}var k=null,l=function(){function m(p,r,w,y){var B=null;if(3<arguments.length){B=0;for(var I=Array(arguments.length-3);B<I.length;)I[B]=arguments[B+3],++B;B=new H(I,0,null)}return n.call(this,p,r,w,B)}function n(p,r,w,y){return Md(a,
b,c,p,r,S([w,y]))}m.v=3;m.s=function(p){var r=M(p);p=O(p);var w=M(p);p=O(p);var y=M(p);p=ad(p);return n(r,w,y,p)};m.i=n;return m}();k=function(m,n,p,r){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,m);case 2:return e.call(this,m,n);case 3:return d.call(this,m,n,p);default:var w=null;if(3<arguments.length){w=0;for(var y=Array(arguments.length-3);w<y.length;)y[w]=arguments[w+3],++w;w=new H(y,0,null)}return l.i(m,n,p,w)}throw Error("Invalid arity: "+arguments.length);
};k.v=3;k.s=l.s;k.l=h;k.a=f;k.b=e;k.f=d;k.i=l.i;return k}()};
Xe.u=function(a,b,c,d){return function(){function e(n,p,r){return a.ja?a.ja(b,c,d,n,p,r):a.call(null,b,c,d,n,p,r)}function f(n,p){return a.O?a.O(b,c,d,n,p):a.call(null,b,c,d,n,p)}function h(n){return a.u?a.u(b,c,d,n):a.call(null,b,c,d,n)}function k(){return a.f?a.f(b,c,d):a.call(null,b,c,d)}var l=null,m=function(){function n(r,w,y,B){var I=null;if(3<arguments.length){I=0;for(var W=Array(arguments.length-3);I<W.length;)W[I]=arguments[I+3],++I;I=new H(W,0,null)}return p.call(this,r,w,y,I)}function p(r,
w,y,B){return Md(a,b,c,d,r,S([w,y,B]))}n.v=3;n.s=function(r){var w=M(r);r=O(r);var y=M(r);r=O(r);var B=M(r);r=ad(r);return p(w,y,B,r)};n.i=p;return n}();l=function(n,p,r,w){switch(arguments.length){case 0:return k.call(this);case 1:return h.call(this,n);case 2:return f.call(this,n,p);case 3:return e.call(this,n,p,r);default:var y=null;if(3<arguments.length){y=0;for(var B=Array(arguments.length-3);y<B.length;)B[y]=arguments[y+3],++y;y=new H(B,0,null)}return m.i(n,p,r,y)}throw Error("Invalid arity: "+
arguments.length);};l.v=3;l.s=m.s;l.l=k;l.a=h;l.b=f;l.f=e;l.i=m.i;return l}()};Xe.i=function(a,b,c,d,e){return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new H(m,0,null)}return h.call(this,l)}function h(k){return Oe(a,b,c,d,Fe.b(e,k))}f.v=0;f.s=function(k){k=G(k);return h(k)};f.i=h;return f}()};Xe.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);var e=O(d);d=M(e);e=O(e);return this.i(b,a,c,d,e)};
Xe.v=4;function Ye(a){var b=Ze;return function f(d,e){return new we(null,function(){var h=G(e);if(h){if(Xd(h)){for(var k=Dc(h),l=R(k),m=new ye(Array(l)),n=0;;)if(n<l)Ce(m,function(){var p=d+n,r=Gb.b(k,n);return b.b?b.b(p,r):b.call(null,p,r)}()),n+=1;else break;return Be(m.ha(),f(d+l,Ec(h)))}return zd(function(){var p=M(h);return b.b?b.b(d,p):b.call(null,d,p)}(),f(d+1,ad(h)))}return null},null)}(0,a)}
function $e(a,b){return new we(null,function(){var c=G(b);if(c){if(Xd(c)){for(var d=Dc(c),e=R(d),f=new ye(Array(e)),h=0;;)if(h<e){var k=function(){var l=Gb.b(d,h);return a.a?a.a(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return Be(f.ha(),$e(a,Ec(c)))}e=function(){var l=M(c);return a.a?a.a(l):a.call(null,l)}();return null==e?$e(a,ad(c)):zd(e,$e(a,ad(c)))}return null},null)}function af(a){this.state=a;this.ga=this.Za=this.o=null;this.w=16386;this.h=6455296}g=af.prototype;
g.equiv=function(a){return this.B(null,a)};g.B=function(a,b){return this===b};g.Va=function(){return this.state};g.M=function(){return this.o};g.Zb=function(a,b){for(var c=G(this.ga),d=null,e=0,f=0;;)if(f<e){var h=d.H(null,f),k=U(h,0);h=U(h,1);h.u?h.u(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=G(c))Xd(c)?(d=Dc(c),c=Ec(c),k=d,e=R(d),d=k):(d=M(c),k=U(d,0),h=U(d,1),h.u?h.u(k,this,a,b):h.call(null,k,this,a,b),c=O(c),d=null,e=0),f=0;else break};g.Hb=function(a,b,c){this.ga=Hd.f(this.ga,b,c);return this};
g.Ib=function(a,b){return this.ga=Jd.b(this.ga,b)};g.R=function(){return da(this)};function bf(a){return new af(a)}function cf(a,b){if(a instanceof af){var c=a.Za;if(null!=c&&!v(c.a?c.a(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ga&&a.Zb(c,b);return b}return Fc(a,b)}
var df=function df(a){switch(arguments.length){case 2:return df.b(arguments[0],arguments[1]);case 3:return df.f(arguments[0],arguments[1],arguments[2]);case 4:return df.u(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return df.i(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
df.b=function(a,b){if(a instanceof af){var c=a.state;b=b.a?b.a(c):b.call(null,c);a=cf(a,b)}else a=Gc.b(a,b);return a};df.f=function(a,b,c){if(a instanceof af){var d=a.state;b=b.b?b.b(d,c):b.call(null,d,c);a=cf(a,b)}else a=Gc.f(a,b,c);return a};df.u=function(a,b,c,d){if(a instanceof af){var e=a.state;b=b.f?b.f(e,c,d):b.call(null,e,c,d);a=cf(a,b)}else a=Gc.u(a,b,c,d);return a};df.i=function(a,b,c,d,e){return a instanceof af?cf(a,Oe(b,a.state,c,d,e)):Gc.O(a,b,c,d,e)};
df.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);var e=O(d);d=M(e);e=O(e);return this.i(b,a,c,d,e)};df.v=4;
var ef=function ef(a){switch(arguments.length){case 1:return ef.a(arguments[0]);case 2:return ef.b(arguments[0],arguments[1]);case 3:return ef.f(arguments[0],arguments[1],arguments[2]);case 4:return ef.u(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ef.i(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
ef.a=function(a){return function(b){return function(){function c(k,l){l=a.a?a.a(l):a.call(null,l);return b.b?b.b(k,l):b.call(null,k,l)}function d(k){return b.a?b.a(k):b.call(null,k)}function e(){return b.l?b.l():b.call(null)}var f=null,h=function(){function k(m,n,p){var r=null;if(2<arguments.length){r=0;for(var w=Array(arguments.length-2);r<w.length;)w[r]=arguments[r+2],++r;r=new H(w,0,null)}return l.call(this,m,n,r)}function l(m,n,p){n=Ne(a,n,p);return b.b?b.b(m,n):b.call(null,m,n)}k.v=2;k.s=function(m){var n=
M(m);m=O(m);var p=M(m);m=ad(m);return l(n,p,m)};k.i=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new H(p,0,null)}return h.i(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.v=2;f.s=h.s;f.l=e;f.a=d;f.b=c;f.i=h.i;return f}()}};
ef.b=function(a,b){return new we(null,function(){var c=G(b);if(c){if(Xd(c)){for(var d=Dc(c),e=R(d),f=new ye(Array(e)),h=0;;)if(h<e)Ce(f,function(){var k=Gb.b(d,h);return a.a?a.a(k):a.call(null,k)}()),h+=1;else break;return Be(f.ha(),ef.b(a,Ec(c)))}return zd(function(){var k=M(c);return a.a?a.a(k):a.call(null,k)}(),ef.b(a,ad(c)))}return null},null)};
ef.f=function(a,b,c){return new we(null,function(){var d=G(b),e=G(c);if(d&&e){var f=M(d);var h=M(e);f=a.b?a.b(f,h):a.call(null,f,h);d=zd(f,ef.f(a,ad(d),ad(e)))}else d=null;return d},null)};ef.u=function(a,b,c,d){return new we(null,function(){var e=G(b),f=G(c),h=G(d);if(e&&f&&h){var k=M(e);var l=M(f),m=M(h);k=a.f?a.f(k,l,m):a.call(null,k,l,m);e=zd(k,ef.u(a,ad(e),ad(f),ad(h)))}else e=null;return e},null)};
ef.i=function(a,b,c,d,e){return ef.b(function(f){return Me(a,f)},function k(h){return new we(null,function(){var l=ef.b(G,h);return Se(he,l)?zd(ef.b(M,l),k(ef.b(ad,l))):null},null)}(Cd.i(e,d,S([c,b]))))};ef.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);var e=O(d);d=M(e);e=O(e);return this.i(b,a,c,d,e)};ef.v=4;
function ff(a,b){if("number"!==typeof a)throw Error("Assert failed: (number? n)");return new we(null,function(){if(0<a){var c=G(b);return c?zd(M(c),ff(a-1,ad(c))):null}return null},null)}function gf(a){return new we(null,function(){a:for(var b=2,c=a;;)if(c=G(c),0<b&&c)--b,c=ad(c);else break a;return c},null)}function hf(a){return ef.f(function(b){return b},a,gf(a))}
function jf(a,b){return new we(null,function(){var c=G(b);if(c){if(Xd(c)){for(var d=Dc(c),e=R(d),f=new ye(Array(e)),h=0;;)if(h<e){var k=Gb.b(d,h);k=a.a?a.a(k):a.call(null,k);v(k)&&(k=Gb.b(d,h),f.add(k));h+=1}else break;return Be(f.ha(),jf(a,Ec(c)))}d=M(c);c=ad(c);return v(a.a?a.a(d):a.call(null,d))?zd(d,jf(a,c)):jf(a,c)}return null},null)}
var kf=function kf(a){switch(arguments.length){case 0:return kf.l();case 1:return kf.a(arguments[0]);case 2:return kf.b(arguments[0],arguments[1]);case 3:return kf.f(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};kf.l=function(){return Dd};kf.a=function(a){return a};kf.b=function(a,b){return null!=a?null!=a&&(a.w&4||t===a.Mc)?ec(Ac(vb(zc,yc(a),b)),Od(a)):vb(Eb,a,b):vb(Cd,a,b)};
kf.f=function(a,b,c){return null!=a&&(a.w&4||t===a.Mc)?ec(Ac(ie(b,Ge,yc(a),c)),Od(a)):ie(b,Cd,a,c)};kf.v=3;function lf(a,b){return Ac(vb(function(c,d){return Ge.b(c,a.a?a.a(d):a.call(null,d))},yc(Dd),b))}
var mf=function mf(a){switch(arguments.length){case 3:return mf.f(arguments[0],arguments[1],arguments[2]);case 4:return mf.u(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return mf.O(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return mf.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return mf.i(arguments[0],arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],new H(c.slice(6),0,null))}};mf.f=function(a,b,c){b=G(b);var d=M(b);return(b=O(b))?Hd.f(a,d,mf.f(D.b(a,d),b,c)):Hd.f(a,d,function(){var e=D.b(a,d);return c.a?c.a(e):c.call(null,e)}())};mf.u=function(a,b,c,d){b=G(b);var e=M(b);return(b=O(b))?Hd.f(a,e,mf.u(D.b(a,e),b,c,d)):Hd.f(a,e,function(){var f=D.b(a,e);return c.b?c.b(f,d):c.call(null,f,d)}())};
mf.O=function(a,b,c,d,e){b=G(b);var f=M(b);return(b=O(b))?Hd.f(a,f,mf.O(D.b(a,f),b,c,d,e)):Hd.f(a,f,function(){var h=D.b(a,f);return c.f?c.f(h,d,e):c.call(null,h,d,e)}())};mf.ja=function(a,b,c,d,e,f){b=G(b);var h=M(b);return(b=O(b))?Hd.f(a,h,mf.ja(D.b(a,h),b,c,d,e,f)):Hd.f(a,h,function(){var k=D.b(a,h);return c.u?c.u(k,d,e,f):c.call(null,k,d,e,f)}())};mf.i=function(a,b,c,d,e,f,h){var k=G(b);b=M(k);return(k=O(k))?Hd.f(a,b,Md(mf,D.b(a,b),k,c,d,S([e,f,h]))):Hd.f(a,b,Md(c,D.b(a,b),d,e,f,S([h])))};
mf.s=function(a){var b=M(a),c=O(a);a=M(c);var d=O(c);c=M(d);var e=O(d);d=M(e);var f=O(e);e=M(f);var h=O(f);f=M(h);h=O(h);return this.i(b,a,c,d,e,f,h)};mf.v=6;function nf(a,b){var c=of;return Hd.f(a,c,function(){var d=D.b(a,c);return Cd.b?Cd.b(d,b):Cd.call(null,d,b)}())}function pf(a,b){this.J=a;this.c=b}function qf(a){return new pf(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}
function rf(a){return new pf(a.J,tb(a.c))}function sf(a){a=a.j;return 32>a?0:a-1>>>5<<5}function tf(a,b,c){for(;;){if(0===b)return c;var d=qf(a);d.c[0]=c;c=d;b-=5}}var uf=function uf(a,b,c,d){var f=rf(c),h=a.j-1>>>b&31;5===b?f.c[h]=d:(c=c.c[h],null!=c?(b-=5,a=uf.u?uf.u(a,b,c,d):uf.call(null,a,b,c,d)):a=tf(null,b-5,d),f.c[h]=a);return f};function vf(a,b){throw Error(["No item ",C.a(a)," in vector of length ",C.a(b)].join(""));}
function wf(a,b){if(b>=sf(a))return a.I;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.c[b>>>a&31];a=d}else return c.c}var xf=function xf(a,b,c,d,e){var h=rf(c);if(0===b)h.c[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.c[k];a=xf.O?xf.O(a,b,c,d,e):xf.call(null,a,b,c,d,e);h.c[k]=a}return h},yf=function yf(a,b,c){var e=a.j-2>>>b&31;if(5<b){b-=5;var f=c.c[e];a=yf.f?yf.f(a,b,f):yf.call(null,a,b,f);if(null==a&&0===e)return null;c=rf(c);c.c[e]=a;return c}if(0===e)return null;c=rf(c);c.c[e]=null;return c};
function zf(a,b,c){this.Ab=this.m=0;this.c=a;this.hd=b;this.start=0;this.end=c}zf.prototype.ea=function(){return this.m<this.end};zf.prototype.next=function(){32===this.m-this.Ab&&(this.c=wf(this.hd,this.m),this.Ab+=32);var a=this.c[this.m&31];this.m+=1;return a};function Af(a,b,c,d){return c<d?Bf(a,b,ud(a,c),c+1,d):b.l?b.l():b.call(null)}
function Bf(a,b,c,d,e){var f=c;c=d;for(d=wf(a,d);;)if(c<e){var h=c&31;d=0===h?wf(a,c):d;h=d[h];f=b.b?b.b(f,h):b.call(null,f,h);if(nd(f))return bc(f);c+=1}else return f}function X(a,b,c,d,e,f){this.o=a;this.j=b;this.shift=c;this.root=d;this.I=e;this.A=f;this.h=167666463;this.w=139268}g=X.prototype;g.jb=function(a,b){return 0<=b&&b<this.j?new Cf(b,wf(this,b)[b&31]):null};g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.S=function(a,b){return this.C(null,b,null)};g.C=function(a,b,c){return"number"===typeof b?this.aa(null,b,c):c};
g.Fb=function(a,b,c){a=0;for(var d=c;;)if(a<this.j){var e=wf(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.f?b.f(d,h,k):b.call(null,d,h,k);if(nd(d)){e=d;break a}f+=1}else{e=d;break a}if(nd(e))return bc(e);a+=c;d=e}else return d};g.H=function(a,b){return(0<=b&&b<this.j?wf(this,b):vf(b,this.j))[b&31]};g.aa=function(a,b,c){return 0<=b&&b<this.j?wf(this,b)[b&31]:c};
g.Yb=function(a,b){if(0<=a&&a<this.j){if(sf(this)<=a){var c=tb(this.I);c[a&31]=b;return new X(this.o,this.j,this.shift,this.root,c,null)}return new X(this.o,this.j,this.shift,xf(this,this.shift,this.root,a,b),this.I,null)}if(a===this.j)return this.Y(null,b);throw Error(["Index ",C.a(a)," out of bounds  [0,",C.a(this.j),"]"].join(""));};g.ma=function(){var a=this.j;return new zf(0<R(this)?wf(this,0):null,this,a)};g.M=function(){return this.o};g.L=function(){return this.j};
g.lb=function(){return 0<this.j?this.H(null,this.j-1):null};g.mb=function(){if(0===this.j)throw Error("Can't pop empty vector");if(1===this.j)return ec(Dd,this.o);if(1<this.j-sf(this))return new X(this.o,this.j-1,this.shift,this.root,this.I.slice(0,-1),null);var a=wf(this,this.j-2),b=yf(this,this.shift,this.root);b=null==b?Z:b;var c=this.j-1;return 5<this.shift&&null==b.c[1]?new X(this.o,c,this.shift-5,b.c[0],a,null):new X(this.o,c,this.shift,b,a,null)};
g.Gb=function(){return 0<this.j?new xd(this,this.j-1,null):null};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){if(b instanceof X)if(this.j===R(b))for(a=this.ma(null),b=b.ma(null);;)if(a.ea()){var c=a.next(),d=b.next();if(!cd.b(c,d))return!1}else return!0;else return!1;else return yd(this,b)};
g.cb=function(){var a=this.j,b=this.shift,c=new pf({},tb(this.root.c)),d=this.I,e=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Yd(d,0,e,0,d.length);return new Df(a,b,c,e)};g.W=function(){return ec(Dd,this.o)};g.ba=function(a,b){return Af(this,b,0,this.j)};
g.ca=function(a,b,c){a=0;for(var d=c;;)if(a<this.j){var e=wf(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.b?b.b(d,h):b.call(null,d,h);if(nd(d)){e=d;break a}f+=1}else{e=d;break a}if(nd(e))return bc(e);a+=c;d=e}else return d};g.Qa=function(a,b,c){if("number"===typeof b)return this.Yb(b,c);throw Error("Vector's key for assoc must be a number.");};
g.T=function(){if(0===this.j)var a=null;else if(32>=this.j)a=new H(this.I,0,null);else{a:{a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.c[0];else{a=a.c;break a}}a=new Ef(this,a,0,0,null)}return a};g.P=function(a,b){return b===this.o?this:new X(b,this.j,this.shift,this.root,this.I,this.A)};
g.Y=function(a,b){if(32>this.j-sf(this)){a=this.I.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.I[d],d+=1;else break;c[a]=b;return new X(this.o,this.j+1,this.shift,this.root,c,null)}a=(c=this.j>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=qf(null),c.c[0]=this.root,d=tf(null,this.shift,new pf(null,this.I)),c.c[1]=d):c=uf(this,this.shift,this.root,new pf(null,this.I));return new X(this.o,this.j+1,a,c,[b],null)};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.H(null,c);case 3:return this.aa(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.H(null,c)};a.f=function(b,c,d){return this.aa(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.H(null,a)};g.b=function(a,b){return this.aa(null,a,b)};
var Z=new pf(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Dd=new X(null,0,5,Z,[],id);function Ff(a,b){var c=a.length;a=b?a:tb(a);if(32>c)return new X(null,c,5,Z,a,null);b=32;for(var d=(new X(null,32,5,Z,a.slice(0,32),null)).cb(null);;)if(b<c){var e=b+1;d=Ge.b(d,a[b]);b=e}else return Ac(d)}X.prototype[sb]=function(){return ed(this)};
function Gf(a){return Hf(a)?new X(null,2,5,Z,[Vb(a),Wb(a)],null):Wd(a)?Nd(a,null):pb(a)?Ff(a,!0):Ac(vb(zc,yc(Dd),a))}var Ze=function Ze(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ze.i(0<c.length?new H(c.slice(0),0,null):null)};Ze.i=function(a){return a instanceof H&&0===a.m?Ff(a.c,!pb(a.c)):Gf(a)};Ze.v=0;Ze.s=function(a){return this.i(G(a))};
function Ef(a,b,c,d,e){this.ka=a;this.node=b;this.m=c;this.off=d;this.o=e;this.A=null;this.h=32375020;this.w=1536}g=Ef.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){if(this.off+1<this.node.length){var a=new Ef(this.ka,this.node,this.m,this.off+1,null);return null==a?null:a}return this.Sb()};
g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return Af(this.ka,b,this.m+this.off,R(this.ka))};g.ca=function(a,b,c){return Bf(this.ka,b,c,this.m+this.off,R(this.ka))};g.Z=function(){return this.node[this.off]};g.da=function(){if(this.off+1<this.node.length){var a=new Ef(this.ka,this.node,this.m,this.off+1,null);return null==a?bd:a}return this.bb(null)};g.T=function(){return this};
g.Eb=function(){var a=this.node;return new ze(a,this.off,a.length)};g.bb=function(){var a=this.m+this.node.length;return a<Ab(this.ka)?new Ef(this.ka,wf(this.ka,a),a,0,null):bd};g.P=function(a,b){return b===this.o?this:new Ef(this.ka,this.node,this.m,this.off,b)};g.Y=function(a,b){return zd(b,this)};g.Sb=function(){var a=this.m+this.node.length;return a<Ab(this.ka)?new Ef(this.ka,wf(this.ka,a),a,0,null):null};Ef.prototype[sb]=function(){return ed(this)};
function If(a,b){return a===b.J?b:new pf(a,tb(b.c))}var Jf=function Jf(a,b,c,d){c=If(a.root.J,c);var f=a.j-1>>>b&31;if(5===b)a=d;else{var h=c.c[f];null!=h?(b-=5,a=Jf.u?Jf.u(a,b,h,d):Jf.call(null,a,b,h,d)):a=tf(a.root.J,b-5,d)}c.c[f]=a;return c};function Df(a,b,c,d){this.j=a;this.shift=b;this.root=c;this.I=d;this.w=88;this.h=275}g=Df.prototype;
g.fb=function(a,b){if(this.root.J){if(32>this.j-sf(this))this.I[this.j&31]=b;else{a=new pf(this.root.J,this.I);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.I=c;this.j>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+5,b[0]=
this.root,b[1]=tf(this.root.J,this.shift,a),this.root=new pf(this.root.J,b),this.shift=c):this.root=Jf(this,this.shift,this.root,a)}this.j+=1;return this}throw Error("conj! after persistent!");};g.nb=function(){if(this.root.J){this.root.J=null;var a=this.j-sf(this),b=Array(a);Yd(this.I,0,b,0,a);return new X(null,this.j,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.eb=function(a,b,c){if("number"===typeof b)return Kf(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function Kf(a,b,c){if(a.root.J){if(0<=b&&b<a.j){if(sf(a)<=b)a.I[b&31]=c;else{var d=function(){return function k(f,h){h=If(a.root.J,h);if(0===f)h.c[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.c[l]);h.c[l]=f}return h}(a.shift,a.root)}();a.root=d}return a}if(b===a.j)return a.fb(null,c);throw Error(["Index ",C.a(b)," out of bounds for TransientVector of length",C.a(a.j)].join(""));}throw Error("assoc! after persistent!");}g.L=function(){if(this.root.J)return this.j;throw Error("count after persistent!");};
g.H=function(a,b){if(this.root.J)return(0<=b&&b<this.j?wf(this,b):vf(b,this.j))[b&31];throw Error("nth after persistent!");};g.aa=function(a,b,c){return 0<=b&&b<this.j?this.H(null,b):c};g.S=function(a,b){return this.C(null,b,null)};g.C=function(a,b,c){if(this.root.J)return"number"===typeof b?this.aa(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.S(null,c);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.S(null,c)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.S(null,a)};g.b=function(a,b){return this.C(null,a,b)};function Lf(){this.h=2097152;this.w=0}
Lf.prototype.equiv=function(a){return this.B(null,a)};Lf.prototype.B=function(){return!1};var Mf=new Lf;function Nf(a,b){return ae(Ud(b)&&!Vd(b)?R(a)===R(b)?(null!=a?a.h&1048576||t===a.rd||(a.h?0:z(ic,a)):z(ic,a))?ge(function(c,d,e){return cd.b(D.f(b,d,Mf),e)?!0:new md},!0,a):Se(function(c){return cd.b(D.f(b,M(c),Mf),M(O(c)))},a):null:null)}function Of(a){this.D=a}
Of.prototype.next=function(){if(null!=this.D){var a=M(this.D),b=U(a,0);a=U(a,1);this.D=O(this.D);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Pf(a){this.D=a}Pf.prototype.next=function(){if(null!=this.D){var a=M(this.D);this.D=O(this.D);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Qf(a,b){if(b instanceof E)a:{var c=a.length;b=b.oa;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].oa){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Xc)a:for(c=a.length,b=b.Ta,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Xc&&b===a[d].Ta){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(cd.b(b,a[d])){a=d;break a}d+=2}return a}function Cf(a,b){this.key=a;this.val=b;this.A=null;this.h=166619935;this.w=0}g=Cf.prototype;g.jb=function(a,b){switch(b){case 0:return new Cf(0,this.key);case 1:return new Cf(1,this.val);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.S=function(a,b){return this.aa(null,b,null)};g.C=function(a,b,c){return this.aa(null,b,c)};g.H=function(a,b){if(0===b)return this.key;if(1===b)return this.val;throw Error("Index out of bounds");};
g.aa=function(a,b,c){return 0===b?this.key:1===b?this.val:c};g.Yb=function(a,b){return(new X(null,2,5,Z,[this.key,this.val],null)).Yb(a,b)};g.M=function(){return null};g.L=function(){return 2};g.Tc=function(){return this.key};g.Uc=function(){return this.val};g.lb=function(){return this.val};g.mb=function(){return new X(null,1,5,Z,[this.key],null)};g.Gb=function(){return new H([this.val,this.key],0,null)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};
g.B=function(a,b){return yd(this,b)};g.W=function(){return null};g.ba=function(a,b){return od(this,b)};g.ca=function(a,b,c){a:{a=this.L(null);var d=c;for(c=0;;)if(c<a){var e=this.H(null,c);d=b.b?b.b(d,e):b.call(null,d,e);if(nd(d)){b=bc(d);break a}c+=1}else{b=d;break a}}return b};g.Qa=function(a,b,c){return Hd.f(new X(null,2,5,Z,[this.key,this.val],null),b,c)};g.T=function(){return new H([this.key,this.val],0,null)};g.P=function(a,b){return Nd(new X(null,2,5,Z,[this.key,this.val],null),b)};
g.Y=function(a,b){return new X(null,3,5,Z,[this.key,this.val,b],null)};g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.H(null,c);case 3:return this.aa(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.H(null,c)};a.f=function(b,c,d){return this.aa(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.H(null,a)};
g.b=function(a,b){return this.aa(null,a,b)};function Hf(a){return null!=a?a.h&2048||t===a.ud?!0:!1:!1}function Rf(a,b,c){this.c=a;this.m=b;this.ua=c;this.h=32374990;this.w=0}g=Rf.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.ua};g.X=function(){return this.m<this.c.length-2?new Rf(this.c,this.m+2,null):null};g.L=function(){return(this.c.length-this.m)/2};g.R=function(){return hd(this)};
g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return new Cf(this.c[this.m],this.c[this.m+1])};g.da=function(){return this.m<this.c.length-2?new Rf(this.c,this.m+2,null):bd};g.T=function(){return this};g.P=function(a,b){return b===this.ua?this:new Rf(this.c,this.m,b)};g.Y=function(a,b){return zd(b,this)};Rf.prototype[sb]=function(){return ed(this)};
function Sf(a,b){this.c=a;this.m=0;this.j=b}Sf.prototype.ea=function(){return this.m<this.j};Sf.prototype.next=function(){var a=new Cf(this.c[this.m],this.c[this.m+1]);this.m+=2;return a};function u(a,b,c,d){this.o=a;this.j=b;this.c=c;this.A=d;this.h=16647951;this.w=139268}g=u.prototype;g.jb=function(a,b){a=Qf(this.c,b);return-1===a?null:new Cf(this.c[a],this.c[a+1])};g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.keys=function(){return ed(Tf(this))};
g.entries=function(){return new Of(G(G(this)))};g.values=function(){return ed(Uf(this))};g.has=function(a){return ce(this,a)};g.get=function(a,b){return this.C(null,a,b)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.H(null,e),h=U(f,0);f=U(f,1);a.b?a.b(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Xd(b)?(c=Dc(b),b=Ec(b),h=c,d=R(c),c=h):(c=M(b),h=U(c,0),f=U(c,1),a.b?a.b(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.S=function(a,b){return this.C(null,b,null)};
g.C=function(a,b,c){a=Qf(this.c,b);return-1===a?c:this.c[a+1]};g.Fb=function(a,b,c){a=this.c.length;for(var d=0;;)if(d<a){var e=this.c[d],f=this.c[d+1];c=b.f?b.f(c,e,f):b.call(null,c,e,f);if(nd(c))return bc(c);d+=2}else return c};g.ma=function(){return new Sf(this.c,2*this.j)};g.M=function(){return this.o};g.L=function(){return this.j};g.R=function(){var a=this.A;return null!=a?a:this.A=a=jd(this)};
g.B=function(a,b){if(Ud(b)&&!Vd(b))if(a=this.c.length,this.j===b.L(null))for(var c=0;;)if(c<a){var d=b.C(null,this.c[c],Zd);if(d!==Zd)if(cd.b(this.c[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.cb=function(){return new Vf(this.c.length,tb(this.c))};g.W=function(){return ec(Re,this.o)};g.ba=function(a,b){return de(this,b)};g.ca=function(a,b,c){return ee(this,b,c)};
g.Tb=function(a,b){if(0<=Qf(this.c,b)){a=this.c.length;var c=a-2;if(0===c)return this.W(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new u(this.o,this.j-1,c,null);cd.b(b,this.c[d])?d+=2:(c[e]=this.c[d],c[e+1]=this.c[d+1],e+=2,d+=2)}}else return this};
g.Qa=function(a,b,c){a=Qf(this.c,b);if(-1===a){if(this.j<Wf){a=this.c;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new u(this.o,this.j+1,e,null)}return ec(Rb(kf.b(Yf,this),b,c),this.o)}if(c===this.c[a+1])return this;b=tb(this.c);b[a+1]=c;return new u(this.o,this.j,b,null)};g.T=function(){var a=this.c;return 0<=a.length-2?new Rf(a,0,null):null};g.P=function(a,b){return b===this.o?this:new u(b,this.j,this.c,this.A)};
g.Y=function(a,b){if(Wd(b))return this.Qa(null,Gb.b(b,0),Gb.b(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=M(b);if(Wd(c))a=Rb(a,Gb.b(c,0),Gb.b(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.S(null,c);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.S(null,c)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.S(null,a)};g.b=function(a,b){return this.C(null,a,b)};var Re=new u(null,0,[],kd),Wf=8;
function Id(a){for(var b=[],c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=Qf(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;return new u(null,b.length/2,b,null)}u.prototype[sb]=function(){return ed(this)};function Vf(a,b){this.hb={};this.ib=a;this.c=b;this.h=259;this.w=56}g=Vf.prototype;g.L=function(){if(this.hb)return le(this.ib);throw Error("count after persistent!");};g.S=function(a,b){return this.C(null,b,null)};
g.C=function(a,b,c){if(this.hb)return a=Qf(this.c,b),-1===a?c:this.c[a+1];throw Error("lookup after persistent!");};g.fb=function(a,b){if(this.hb){if(Hf(b))return this.eb(null,Vb(b),Wb(b));if(Wd(b))return this.eb(null,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));a=G(b);for(b=this;;){var c=M(a);if(v(c))a=O(a),b=Bc(b,Vb(c),Wb(c));else return b}}else throw Error("conj! after persistent!");};
g.nb=function(){if(this.hb)return this.hb=!1,new u(null,le(this.ib),this.c,null);throw Error("persistent! called twice");};g.eb=function(a,b,c){if(this.hb){a=Qf(this.c,b);if(-1===a){if(this.ib+2<=2*Wf)return this.ib+=2,this.c.push(b),this.c.push(c),this;a:{a=this.ib;var d=this.c;var e=yc(Yf);for(var f=0;;)if(f<a)e=Bc(e,d[f],d[f+1]),f+=2;else break a}return Bc(e,b,c)}c!==this.c[a+1]&&(this.c[a+1]=c);return this}throw Error("assoc! after persistent!");};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.C(null,c,null);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.C(null,c,null)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.C(null,a,null)};g.b=function(a,b){return this.C(null,a,b)};function Zf(){this.val=!1}
function $f(a,b){return a===b?!0:se(a,b)?!0:cd.b(a,b)}function ag(a,b,c){a=tb(a);a[b]=c;return a}function bg(a,b){var c=Array(a.length-2);Yd(a,0,c,0,2*b);Yd(a,2*(b+1),c,2*b,c.length-2*b);return c}function cg(a,b,c,d){a=a.Wa(b);a.c[c]=d;return a}function dg(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.f?b.f(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.wb(b,f):f;if(nd(c))return c;e+=2;f=c}else return f}function eg(a){this.c=a;this.m=0;this.sa=this.xb=null}
eg.prototype.advance=function(){for(var a=this.c.length;;)if(this.m<a){var b=this.c[this.m],c=this.c[this.m+1];null!=b?b=this.xb=new Cf(b,c):null!=c?(b=Jc(c),b=b.ea()?this.sa=b:!1):b=!1;this.m+=2;if(b)return!0}else return!1};eg.prototype.ea=function(){var a=null!=this.xb;return a?a:(a=null!=this.sa)?a:this.advance()};
eg.prototype.next=function(){if(null!=this.xb){var a=this.xb;this.xb=null;return a}if(null!=this.sa)return a=this.sa.next(),this.sa.ea()||(this.sa=null),a;if(this.advance())return this.next();throw Error("No such element");};eg.prototype.remove=function(){return Error("Unsupported operation")};function fg(a,b,c){this.J=a;this.K=b;this.c=c;this.w=131072;this.h=0}g=fg.prototype;
g.Wa=function(a){if(a===this.J)return this;var b=me(this.K),c=Array(0>b?4:2*(b+1));Yd(this.c,0,c,0,2*b);return new fg(a,this.K,c)};g.tb=function(){return gg(this.c,0,null)};g.wb=function(a,b){return dg(this.c,a,b)};g.Xa=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.K&e))return d;var f=me(this.K&e-1);e=this.c[2*f];f=this.c[2*f+1];return null==e?f.Xa(a+5,b,c,d):$f(c,e)?f:d};
g.qa=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=me(this.K&h-1);if(0===(this.K&h)){var l=me(this.K);if(2*l<this.c.length){a=this.Wa(a);b=a.c;f.val=!0;a:for(c=2*(l-k),f=2*k+(c-1),l=2*(k+1)+(c-1);;){if(0===c)break a;b[l]=b[f];--l;--c;--f}b[2*k]=d;b[2*k+1]=e;a.K|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=hg.qa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===
(this.K>>>d&1)?d+=1:(k[d]=null!=this.c[e]?hg.qa(a,b+5,Vc(this.c[e]),this.c[e],this.c[e+1],f):this.c[e+1],e+=2,d+=1);else break;return new ig(a,l+1,k)}b=Array(2*(l+4));Yd(this.c,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Yd(this.c,2*k,b,2*(k+1),2*(l-k));f.val=!0;a=this.Wa(a);a.c=b;a.K|=h;return a}l=this.c[2*k];h=this.c[2*k+1];if(null==l)return l=h.qa(a,b+5,c,d,e,f),l===h?this:cg(this,a,2*k+1,l);if($f(d,l))return e===h?this:cg(this,a,2*k+1,e);f.val=!0;f=b+5;b=Vc(l);if(b===c)e=new jg(null,b,2,[l,h,d,e]);else{var m=
new Zf;e=hg.qa(a,f,b,l,h,m).qa(a,f,c,d,e,m)}d=2*k;k=2*k+1;a=this.Wa(a);a.c[d]=null;a.c[k]=e;return a};
g.pa=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=me(this.K&f-1);if(0===(this.K&f)){var k=me(this.K);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=hg.pa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.K>>>c&1)?c+=1:(h[c]=null!=this.c[d]?hg.pa(a+5,Vc(this.c[d]),this.c[d],this.c[d+1],e):this.c[d+1],d+=2,c+=1);else break;return new ig(null,k+1,h)}a=Array(2*(k+1));Yd(this.c,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Yd(this.c,2*h,a,2*(h+1),2*(k-h));e.val=!0;return new fg(null,this.K|f,a)}var l=this.c[2*h];f=this.c[2*h+1];if(null==l)return k=f.pa(a+5,b,c,d,e),k===f?this:new fg(null,this.K,ag(this.c,2*h+1,k));if($f(c,l))return d===f?this:new fg(null,this.K,ag(this.c,2*h+1,d));e.val=!0;e=this.K;k=this.c;a+=5;var m=Vc(l);if(m===b)c=new jg(null,m,2,[l,f,c,d]);else{var n=new Zf;c=hg.pa(a,m,l,f,n).pa(a,b,c,d,n)}a=2*h;h=2*h+1;d=tb(k);d[a]=null;d[h]=c;return new fg(null,e,d)};
g.sb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.K&e))return d;var f=me(this.K&e-1);e=this.c[2*f];f=this.c[2*f+1];return null==e?f.sb(a+5,b,c,d):$f(c,e)?new Cf(e,f):d};g.ub=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.K&d))return this;var e=me(this.K&d-1),f=this.c[2*e],h=this.c[2*e+1];return null==f?(a=h.ub(a+5,b,c),a===h?this:null!=a?new fg(null,this.K,ag(this.c,2*e+1,a)):this.K===d?null:new fg(null,this.K^d,bg(this.c,e))):$f(c,f)?new fg(null,this.K^d,bg(this.c,e)):this};g.ma=function(){return new eg(this.c)};
var hg=new fg(null,0,[]);function kg(a){this.c=a;this.m=0;this.sa=null}kg.prototype.ea=function(){for(var a=this.c.length;;){if(null!=this.sa&&this.sa.ea())return!0;if(this.m<a){var b=this.c[this.m];this.m+=1;null!=b&&(this.sa=Jc(b))}else return!1}};kg.prototype.next=function(){if(this.ea())return this.sa.next();throw Error("No such element");};kg.prototype.remove=function(){return Error("Unsupported operation")};function ig(a,b,c){this.J=a;this.j=b;this.c=c;this.w=131072;this.h=0}g=ig.prototype;
g.Wa=function(a){return a===this.J?this:new ig(a,this.j,tb(this.c))};g.tb=function(){return lg(this.c,0,null)};g.wb=function(a,b){for(var c=this.c.length,d=0;;)if(d<c){var e=this.c[d];if(null!=e){b=e.wb(a,b);if(nd(b))return b;d+=1}else d+=1}else return b};g.Xa=function(a,b,c,d){var e=this.c[b>>>a&31];return null!=e?e.Xa(a+5,b,c,d):d};
g.qa=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.c[h];if(null==k)return a=cg(this,a,h,hg.qa(a,b+5,c,d,e,f)),a.j+=1,a;b=k.qa(a,b+5,c,d,e,f);return b===k?this:cg(this,a,h,b)};g.pa=function(a,b,c,d,e){var f=b>>>a&31,h=this.c[f];if(null==h)return new ig(null,this.j+1,ag(this.c,f,hg.pa(a+5,b,c,d,e)));a=h.pa(a+5,b,c,d,e);return a===h?this:new ig(null,this.j,ag(this.c,f,a))};g.sb=function(a,b,c,d){var e=this.c[b>>>a&31];return null!=e?e.sb(a+5,b,c,d):d};
g.ub=function(a,b,c){var d=b>>>a&31,e=this.c[d];if(null!=e){a=e.ub(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.j)a:{e=this.c;a=e.length;b=Array(2*(this.j-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new fg(null,h,b);break a}}else d=new ig(null,this.j-1,ag(this.c,d,a));else d=new ig(null,this.j,ag(this.c,d,a));return d}return this};g.ma=function(){return new kg(this.c)};
function mg(a,b,c){b*=2;for(var d=0;;)if(d<b){if($f(c,a[d]))return d;d+=2}else return-1}function jg(a,b,c,d){this.J=a;this.La=b;this.j=c;this.c=d;this.w=131072;this.h=0}g=jg.prototype;g.Wa=function(a){if(a===this.J)return this;var b=Array(2*(this.j+1));Yd(this.c,0,b,0,2*this.j);return new jg(a,this.La,this.j,b)};g.tb=function(){return gg(this.c,0,null)};g.wb=function(a,b){return dg(this.c,a,b)};g.Xa=function(a,b,c,d){a=mg(this.c,this.j,c);return 0>a?d:$f(c,this.c[a])?this.c[a+1]:d};
g.qa=function(a,b,c,d,e,f){if(c===this.La){b=mg(this.c,this.j,d);if(-1===b){if(this.c.length>2*this.j)return b=2*this.j,c=2*this.j+1,a=this.Wa(a),a.c[b]=d,a.c[c]=e,f.val=!0,a.j+=1,a;c=this.c.length;b=Array(c+2);Yd(this.c,0,b,0,c);b[c]=d;b[c+1]=e;f.val=!0;d=this.j+1;a===this.J?(this.c=b,this.j=d,a=this):a=new jg(this.J,this.La,d,b);return a}return this.c[b+1]===e?this:cg(this,a,b+1,e)}return(new fg(a,1<<(this.La>>>b&31),[null,this,null,null])).qa(a,b,c,d,e,f)};
g.pa=function(a,b,c,d,e){return b===this.La?(a=mg(this.c,this.j,c),-1===a?(a=2*this.j,b=Array(a+2),Yd(this.c,0,b,0,a),b[a]=c,b[a+1]=d,e.val=!0,new jg(null,this.La,this.j+1,b)):cd.b(this.c[a+1],d)?this:new jg(null,this.La,this.j,ag(this.c,a+1,d))):(new fg(null,1<<(this.La>>>a&31),[null,this])).pa(a,b,c,d,e)};g.sb=function(a,b,c,d){a=mg(this.c,this.j,c);return 0>a?d:$f(c,this.c[a])?new Cf(this.c[a],this.c[a+1]):d};
g.ub=function(a,b,c){a=mg(this.c,this.j,c);return-1===a?this:1===this.j?null:new jg(null,this.La,this.j-1,bg(this.c,le(a)))};g.ma=function(){return new eg(this.c)};function ng(a,b,c,d,e){this.o=a;this.ta=b;this.m=c;this.D=d;this.A=e;this.h=32374988;this.w=0}g=ng.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return null==this.D?gg(this.ta,this.m+2,null):gg(this.ta,this.m,O(this.D))};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};
g.W=function(){return bd};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return null==this.D?new Cf(this.ta[this.m],this.ta[this.m+1]):M(this.D)};g.da=function(){var a=null==this.D?gg(this.ta,this.m+2,null):gg(this.ta,this.m,O(this.D));return null!=a?a:bd};g.T=function(){return this};g.P=function(a,b){return b===this.o?this:new ng(b,this.ta,this.m,this.D,this.A)};g.Y=function(a,b){return zd(b,this)};ng.prototype[sb]=function(){return ed(this)};
function gg(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new ng(null,a,b,null,null);var d=a[b+1];if(v(d)&&(d=d.tb(),v(d)))return new ng(null,a,b+2,d,null);b+=2}else return null;else return new ng(null,a,b,c,null)}function og(a,b,c,d,e){this.o=a;this.ta=b;this.m=c;this.D=d;this.A=e;this.h=32374988;this.w=0}g=og.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.o};g.X=function(){return lg(this.ta,this.m,O(this.D))};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};
g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return M(this.D)};g.da=function(){var a=lg(this.ta,this.m,O(this.D));return null!=a?a:bd};g.T=function(){return this};g.P=function(a,b){return b===this.o?this:new og(b,this.ta,this.m,this.D,this.A)};g.Y=function(a,b){return zd(b,this)};og.prototype[sb]=function(){return ed(this)};
function lg(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(v(d)&&(d=d.tb(),v(d)))return new og(null,a,b+1,d,null);b+=1}else return null;else return new og(null,a,b,c,null)}function pg(a,b){this.fa=a;this.Ec=b;this.hc=!1}pg.prototype.ea=function(){return!this.hc||this.Ec.ea()};pg.prototype.next=function(){if(this.hc)return this.Ec.next();this.hc=!0;return new Cf(null,this.fa)};pg.prototype.remove=function(){return Error("Unsupported operation")};
function qg(a,b,c,d,e,f){this.o=a;this.j=b;this.root=c;this.ia=d;this.fa=e;this.A=f;this.h=16123663;this.w=139268}g=qg.prototype;g.jb=function(a,b){return null==b?this.ia?new Cf(null,this.fa):null:null==this.root?null:this.root.sb(0,Vc(b),b,null)};g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.keys=function(){return ed(Tf(this))};g.entries=function(){return new Of(G(G(this)))};g.values=function(){return ed(Uf(this))};g.has=function(a){return ce(this,a)};
g.get=function(a,b){return this.C(null,a,b)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.H(null,e),h=U(f,0);f=U(f,1);a.b?a.b(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Xd(b)?(c=Dc(b),b=Ec(b),h=c,d=R(c),c=h):(c=M(b),h=U(c,0),f=U(c,1),a.b?a.b(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.S=function(a,b){return this.C(null,b,null)};g.C=function(a,b,c){return null==b?this.ia?this.fa:c:null==this.root?c:this.root.Xa(0,Vc(b),b,c)};
g.Fb=function(a,b,c){a=this.ia?b.f?b.f(c,null,this.fa):b.call(null,c,null,this.fa):c;nd(a)?b=bc(a):null!=this.root?(b=this.root.wb(b,a),b=nd(b)?bc(b):b):b=a;return b};g.ma=function(){var a=this.root?Jc(this.root):Pe();return this.ia?new pg(this.fa,a):a};g.M=function(){return this.o};g.L=function(){return this.j};g.R=function(){var a=this.A;return null!=a?a:this.A=a=jd(this)};g.B=function(a,b){return Nf(this,b)};g.cb=function(){return new rg(this.root,this.j,this.ia,this.fa)};
g.W=function(){return ec(Yf,this.o)};g.Tb=function(a,b){if(null==b)return this.ia?new qg(this.o,this.j-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.ub(0,Vc(b),b);return a===this.root?this:new qg(this.o,this.j-1,a,this.ia,this.fa,null)};
g.Qa=function(a,b,c){if(null==b)return this.ia&&c===this.fa?this:new qg(this.o,this.ia?this.j:this.j+1,this.root,!0,c,null);a=new Zf;b=(null==this.root?hg:this.root).pa(0,Vc(b),b,c,a);return b===this.root?this:new qg(this.o,a.val?this.j+1:this.j,b,this.ia,this.fa,null)};g.T=function(){if(0<this.j){var a=null!=this.root?this.root.tb():null;return this.ia?zd(new Cf(null,this.fa),a):a}return null};g.P=function(a,b){return b===this.o?this:new qg(b,this.j,this.root,this.ia,this.fa,this.A)};
g.Y=function(a,b){if(Wd(b))return this.Qa(null,Gb.b(b,0),Gb.b(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=M(b);if(Wd(c))a=Rb(a,Gb.b(c,0),Gb.b(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.S(null,c);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.S(null,c)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.S(null,a)};g.b=function(a,b){return this.C(null,a,b)};var Yf=new qg(null,0,null,!1,null,kd);qg.prototype[sb]=function(){return ed(this)};
function rg(a,b,c,d){this.J={};this.root=a;this.count=b;this.ia=c;this.fa=d;this.h=259;this.w=56}function sg(a,b,c){if(a.J){if(null==b)a.fa!==c&&(a.fa=c),a.ia||(a.count+=1,a.ia=!0);else{var d=new Zf;b=(null==a.root?hg:a.root).qa(a.J,0,Vc(b),b,c,d);b!==a.root&&(a.root=b);d.val&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=rg.prototype;g.L=function(){if(this.J)return this.count;throw Error("count after persistent!");};
g.S=function(a,b){return null==b?this.ia?this.fa:null:null==this.root?null:this.root.Xa(0,Vc(b),b)};g.C=function(a,b,c){return null==b?this.ia?this.fa:c:null==this.root?c:this.root.Xa(0,Vc(b),b,c)};g.fb=function(a,b){a:if(this.J)if(Hf(b))a=sg(this,Vb(b),Wb(b));else if(Wd(b))a=sg(this,b.a?b.a(0):b.call(null,0),b.a?b.a(1):b.call(null,1));else for(a=G(b),b=this;;){var c=M(a);if(v(c))a=O(a),b=sg(b,Vb(c),Wb(c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.nb=function(){if(this.J){this.J=null;var a=new qg(null,this.count,this.root,this.ia,this.fa,null)}else throw Error("persistent! called twice");return a};g.eb=function(a,b,c){return sg(this,b,c)};g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.S(null,c);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.S(null,c)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();
g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return this.S(null,a)};g.b=function(a,b){return this.C(null,a,b)};var tg=function tg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return tg.i(0<c.length?new H(c.slice(0),0,null):null)};tg.i=function(a){for(var b=G(a),c=yc(Yf);;)if(b){a=O(O(b));var d=M(b);b=M(O(b));c=Bc(c,d,b);b=a}else return Ac(c)};tg.v=0;tg.s=function(a){return this.i(G(a))};
var ug=function ug(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return ug.i(0<c.length?new H(c.slice(0),0,null):null)};ug.i=function(a){a=a instanceof H&&0===a.m?a.c:ub(a);return Id(a)};ug.v=0;ug.s=function(a){return this.i(G(a))};function vg(a,b){this.F=a;this.ua=b;this.h=32374988;this.w=0}g=vg.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.ua};g.X=function(){var a=(null!=this.F?this.F.h&128||t===this.F.kb||(this.F.h?0:z(Lb,this.F)):z(Lb,this.F))?this.F.X(null):O(this.F);return null==a?null:new vg(a,null)};g.R=function(){return hd(this)};
g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return this.F.Z(null).key};g.da=function(){var a=(null!=this.F?this.F.h&128||t===this.F.kb||(this.F.h?0:z(Lb,this.F)):z(Lb,this.F))?this.F.X(null):O(this.F);return null!=a?new vg(a,null):bd};g.T=function(){return this};g.P=function(a,b){return b===this.ua?this:new vg(this.F,b)};g.Y=function(a,b){return zd(b,this)};vg.prototype[sb]=function(){return ed(this)};
function Tf(a){return(a=G(a))?new vg(a,null):null}function wg(a,b){this.F=a;this.ua=b;this.h=32374988;this.w=0}g=wg.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();g.M=function(){return this.ua};g.X=function(){var a=(null!=this.F?this.F.h&128||t===this.F.kb||(this.F.h?0:z(Lb,this.F)):z(Lb,this.F))?this.F.X(null):O(this.F);return null==a?null:new wg(a,null)};g.R=function(){return hd(this)};
g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return Ad(b,this)};g.ca=function(a,b,c){return Bd(b,c,this)};g.Z=function(){return this.F.Z(null).val};g.da=function(){var a=(null!=this.F?this.F.h&128||t===this.F.kb||(this.F.h?0:z(Lb,this.F)):z(Lb,this.F))?this.F.X(null):O(this.F);return null!=a?new wg(a,null):bd};g.T=function(){return this};g.P=function(a,b){return b===this.ua?this:new wg(this.F,b)};g.Y=function(a,b){return zd(b,this)};wg.prototype[sb]=function(){return ed(this)};
function Uf(a){return(a=G(a))?new wg(a,null):null}var xg=function xg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return xg.i(0<c.length?new H(c.slice(0),0,null):null)};xg.i=function(a){return v(Te(he,a))?fe(function(b,c){return Cd.b(v(b)?b:Re,c)},a):null};xg.v=0;xg.s=function(a){return this.i(G(a))};function yg(a,b){var c=Re;for(b=G(b);;)if(b){var d=M(b),e=D.f(a,d,zg);c=cd.b(e,zg)?c:Hd.f(c,d,e);b=O(b)}else return ec(c,Od(a))}function Ag(a){this.vb=a}
Ag.prototype.ea=function(){return this.vb.ea()};Ag.prototype.next=function(){if(this.vb.ea())return this.vb.next().key;throw Error("No such element");};Ag.prototype.remove=function(){return Error("Unsupported operation")};function Bg(a,b,c){this.o=a;this.Ma=b;this.A=c;this.h=15077647;this.w=139268}g=Bg.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.keys=function(){return ed(G(this))};g.entries=function(){return new Pf(G(G(this)))};g.values=function(){return ed(G(this))};
g.has=function(a){return ce(this,a)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.H(null,e),h=U(f,0);f=U(f,1);a.b?a.b(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Xd(b)?(c=Dc(b),b=Ec(b),h=c,d=R(c),c=h):(c=M(b),h=U(c,0),f=U(c,1),a.b?a.b(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.S=function(a,b){return this.C(null,b,null)};g.C=function(a,b,c){a=Sb(this.Ma,b);return v(a)?Vb(a):c};g.ma=function(){return new Ag(Jc(this.Ma))};g.M=function(){return this.o};
g.L=function(){return Ab(this.Ma)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=jd(this)};g.B=function(a,b){if(Sd(b))if(R(this)===R(b))try{return ge(function(c,d){return(c=ce(b,d))?c:new md},!0,this.Ma)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};g.cb=function(){return new Cg(yc(this.Ma))};g.W=function(){return ec(Dg,this.o)};g.pc=function(a,b){return new Bg(this.o,Ub(this.Ma,b),null)};g.T=function(){return Tf(this.Ma)};
g.P=function(a,b){return b===this.o?this:new Bg(b,this.Ma,this.A)};g.Y=function(a,b){return new Bg(this.o,Hd.f(this.Ma,b,null),null)};g.call=function(){var a=null;a=function(b,c,d){switch(arguments.length){case 2:return this.S(null,c);case 3:return this.C(null,c,d)}throw Error("Invalid arity: "+(arguments.length-1));};a.b=function(b,c){return this.S(null,c)};a.f=function(b,c,d){return this.C(null,c,d)};return a}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};
g.a=function(a){return this.S(null,a)};g.b=function(a,b){return this.C(null,a,b)};var Dg=new Bg(null,Re,kd);Bg.prototype[sb]=function(){return ed(this)};function Cg(a){this.Pa=a;this.w=136;this.h=259}g=Cg.prototype;g.fb=function(a,b){this.Pa=Bc(this.Pa,b,null);return this};g.nb=function(){return new Bg(null,Ac(this.Pa),null)};g.L=function(){return R(this.Pa)};g.S=function(a,b){return this.C(null,b,null)};g.C=function(a,b,c){return Ob.f(this.Pa,b,Zd)===Zd?c:b};
g.call=function(){function a(d,e,f){return Ob.f(this.Pa,e,Zd)===Zd?f:e}function b(d,e){return Ob.f(this.Pa,e,Zd)===Zd?null:e}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+(arguments.length-1));};c.b=b;c.f=a;return c}();g.apply=function(a,b){return this.call.apply(this,[this].concat(tb(b)))};g.a=function(a){return Ob.f(this.Pa,a,Zd)===Zd?null:a};g.b=function(a,b){return Ob.f(this.Pa,a,Zd)===Zd?b:a};
function Eg(a){if(Sd(a))return Nd(a,null);a=G(a);if(null==a)return Dg;if(a instanceof H&&0===a.m){a=a.c;for(var b=a.length,c=yc(Dg),d=0;;)if(d<b)zc(c,a[d]),d+=1;else break;return Ac(c)}for(c=yc(Dg);;)if(null!=a)b=O(a),c=zc(c,Jb(a)),a=b;else return Ac(c)}function ve(a){if(null!=a&&(a.w&4096||t===a.nc))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",C.a(a)].join(""));}function Fg(a,b,c){this.start=a;this.step=b;this.count=c;this.h=82;this.w=0}g=Fg.prototype;g.L=function(){return this.count};
g.Z=function(){return this.start};g.H=function(a,b){return this.start+b*this.step};g.aa=function(a,b,c){return 0<=b&&b<this.count?this.start+b*this.step:c};g.Rb=function(){if(1>=this.count)throw Error("-drop-first of empty chunk");return new Fg(this.start+this.step,this.step,this.count-1)};function Gg(a,b,c){this.m=a;this.end=b;this.step=c}Gg.prototype.ea=function(){return 0<this.step?this.m<this.end:this.m>this.end};Gg.prototype.next=function(){var a=this.m;this.m+=this.step;return a};
function Hg(a,b,c,d,e,f,h){this.o=a;this.start=b;this.end=c;this.step=d;this.ha=e;this.Cb=f;this.A=h;this.h=32375006;this.w=140800}g=Hg.prototype;g.toString=function(){return Lc(this)};g.equiv=function(a){return this.B(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return P(this,b,0);case 2:return P(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.a=function(b){return P(this,b,0)};a.b=function(b,c){return P(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return vd(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return vd(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.a=a;b.b=function(c,d){return vd(this,c,d)};return b}();function Ig(a){if(null==a.ha){var b=a.L(null);32<b?(a.Cb=new Hg(null,a.start+32*a.step,a.end,a.step,null,null,null),a.ha=new Fg(a.start,a.step,32)):a.ha=new Fg(a.start,a.step,b)}}
g.H=function(a,b){if(0<=b&&b<this.L(null))return this.start+b*this.step;if(0<=b&&this.start>this.end&&0===this.step)return this.start;throw Error("Index out of bounds");};g.aa=function(a,b,c){return 0<=b&&b<this.L(null)?this.start+b*this.step:0<=b&&this.start>this.end&&0===this.step?this.start:c};g.ma=function(){return new Gg(this.start,this.end,this.step)};g.M=function(){return this.o};
g.X=function(){return 0<this.step?this.start+this.step<this.end?new Hg(null,this.start+this.step,this.end,this.step,null,null,null):null:this.start+this.step>this.end?new Hg(null,this.start+this.step,this.end,this.step,null,null,null):null};g.L=function(){return Math.ceil((this.end-this.start)/this.step)};g.R=function(){var a=this.A;return null!=a?a:this.A=a=hd(this)};g.B=function(a,b){return yd(this,b)};g.W=function(){return bd};g.ba=function(a,b){return od(this,b)};
g.ca=function(a,b,c){for(a=this.start;;)if(0<this.step?a<this.end:a>this.end){c=b.b?b.b(c,a):b.call(null,c,a);if(nd(c))return bc(c);a+=this.step}else return c};g.Z=function(){return this.start};g.da=function(){var a=this.X(null);return null==a?bd:a};g.T=function(){return this};g.Eb=function(){Ig(this);return this.ha};g.bb=function(){Ig(this);return null==this.Cb?bd:this.Cb};g.P=function(a,b){return b===this.o?this:new Hg(b,this.start,this.end,this.step,this.ha,this.Cb,this.A)};
g.Y=function(a,b){return zd(b,this)};g.Sb=function(){return G(this.bb(null))};Hg.prototype[sb]=function(){return ed(this)};function Jg(a){return 2>=a?bd:new Hg(null,2,a,1,null,null,null)}function Kg(a){a:for(var b=a;;)if(b=G(b))b=O(b);else break a;return a}function Lg(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&cd.b(a[0],b)?1===a.length?a[0]:Gf(a):null;throw new TypeError("re-matches must match against a string.");}
var Mg=function Mg(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:Gf(d);return zd(f,new we(null,function(){var h=e.length;h=d.index+(1>h?1:h);return h<=b.length?(h=b.substring(h),Mg.b?Mg.b(a,h):Mg.call(null,a,h)):null},null))};function Ng(a){var b=/\d/;if("string"===typeof a)return Mg(b,a);throw new TypeError("re-seq must match against a string.");}
function Og(a){if(a instanceof RegExp)return a;var b=/^\(\?([idmsux]*)\)/;if("string"===typeof a){b=b.exec(a);var c=null==b?null:1===b.length?b[0]:Gf(b)}else throw new TypeError("re-find must match against a string.");b=U(c,0);c=U(c,1);return new RegExp(a.substring(null==b?0:b.length),v(c)?c:"")}
function Pg(a,b,c,d,e,f,h){var k=gb;gb=null==gb?null:gb-1;try{if(null!=gb&&0>gb)return tc(a,"#");tc(a,c);if(0===nb.a(f))G(h)&&tc(a,function(){var w=Qg.a(f);return v(w)?w:"..."}());else{if(G(h)){var l=M(h);b.f?b.f(l,a,f):b.call(null,l,a,f)}for(var m=O(h),n=nb.a(f)-1;;)if(!m||null!=n&&0===n){G(m)&&0===n&&(tc(a,d),tc(a,function(){var w=Qg.a(f);return v(w)?w:"..."}()));break}else{tc(a,d);var p=M(m);c=a;h=f;b.f?b.f(p,c,h):b.call(null,p,c,h);var r=O(m);c=n-1;m=r;n=c}}return tc(a,e)}finally{gb=k}}
function Rg(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.H(null,e);tc(a,f);e+=1}else if(b=G(b))c=b,Xd(c)?(b=Dc(c),d=Ec(c),c=b,f=R(b),b=d,d=f):(f=M(c),tc(a,f),b=O(c),c=null,d=0),e=0;else return null}function Sg(a){if(null==bb)throw Error("No *print-fn* fn set for evaluation environment");bb.a?bb.a(a):bb.call(null,a)}var Tg={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};
function Ug(a){return['"',C.a(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return Tg[b]})),'"'].join("")}function Vg(a,b){return ae(D.b(a,lb))?null!=b&&(b.h&131072||t===b.Vc)?null!=Od(b):!1:!1}
function Wg(a,b,c){if(null==a)return tc(b,"nil");Vg(c,a)&&(tc(b,"^"),Xg(Od(a),b,c),tc(b," "));if(a.gb)return a.pb(b);if(null!=a?a.h&2147483648||t===a.U||(a.h?0:z(uc,a)):z(uc,a))return vc(a,b,c);if(!0===a||!1===a)return tc(b,C.a(a));if("number"===typeof a)return tc(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":C.a(a));if(null!=a&&a.constructor===Object)return tc(b,"#js "),Yg(ef.b(function(d){return new Cf(null!=Lg(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
d)?ue.a(d):d,a[d])},ua(a)),b,c);if(pb(a))return Pg(b,Xg,"#js ["," ","]",c,a);if("string"==typeof a)return v(kb.a(c))?tc(b,Ug(a)):tc(b,a);if(ba(a))return c=a.name,c=null==c||/^[\s\xa0]*$/.test(c)?"Function":c,Rg(b,S(["#object[",c,v(!1)?[' "',C.a(a),'"'].join(""):"","]"]));if(a instanceof Date)return c=function(d,e){for(d=C.a(d);;)if(d.length<e)d=["0",d].join("");else return d},Rg(b,S(['#inst "',C.a(a.getUTCFullYear()),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",
c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return Rg(b,S(['#"',a.source,'"']));if(wb(a))return Rg(b,S(["#object[",a.toString(),"]"]));if(v(function(){var d=null==a?null:a.constructor;return null==d?null:d.Ra}()))return Rg(b,S(["#object[",a.constructor.Ra.replace(/\//g,"."),"]"]));c=function(){var d=null==a?null:a.constructor;return null==d?null:d.name}();c=null==c||/^[\s\xa0]*$/.test(c)?"Object":c;return null==a.constructor?
Rg(b,S(["#object[",c,"]"])):Rg(b,S(["#object[",c," ",C.a(a),"]"]))}function Xg(a,b,c){var d=Zg.a(c);return v(d)?(c=Hd.f(c,$g,Wg),d.f?d.f(a,b,c):d.call(null,a,b,c)):Wg(a,b,c)}function ah(a,b){var c=new Ya;a:{var d=new Kc(c);Xg(M(a),d,b);a=G(O(a));for(var e=null,f=0,h=0;;)if(h<f){var k=e.H(null,h);tc(d," ");Xg(k,d,b);h+=1}else if(a=G(a))e=a,Xd(e)?(a=Dc(e),f=Ec(e),e=a,k=R(a),a=f,f=k):(k=M(e),tc(d," "),Xg(k,d,b),a=O(e),e=null,f=0),h=0;else break a}return c}
function bh(a){var b=ib();return Qd(a)?"":C.a(ah(a,b))}function ch(a){return a instanceof Xc?Yc.b(null,ve(a)):ue.b(null,ve(a))}
function dh(a){if(v(!1)){var b=G(a),c=G(b),d=M(c);O(c);U(d,0);U(d,1);c=Fd(a);for(a=null;;){d=a;b=G(b);a=M(b);var e=O(b),f=a;a=U(f,0);b=U(f,1);if(v(f))if(a instanceof E||a instanceof Xc)if(v(d))if(cd.b(d,te(a)))c=Hd.f(c,ch(a),b),a=d,b=e;else return null;else if(d=te(a),v(d))c=Hd.f(c,ch(a),b),a=d,b=e;else return null;else return null;else return new X(null,2,5,Z,[d,c],null)}}else return null}
function eh(a,b,c,d,e){return Pg(d,function(f,h,k){var l=Vb(f);c.f?c.f(l,h,k):c.call(null,l,h,k);tc(h," ");f=Wb(f);return c.f?c.f(f,h,k):c.call(null,f,h,k)},[C.a(a),"{"].join(""),", ","}",e,G(b))}function Yg(a,b,c){var d=Xg,e=Ud(a)?dh(a):null,f=U(e,0);e=U(e,1);return v(f)?eh(["#:",C.a(f)].join(""),e,d,b,c):eh(null,a,d,b,c)}H.prototype.U=t;H.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};we.prototype.U=t;we.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};
Cf.prototype.U=t;Cf.prototype.N=function(a,b,c){return Pg(b,Xg,"["," ","]",c,this)};ng.prototype.U=t;ng.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};Rf.prototype.U=t;Rf.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};fd.prototype.U=t;fd.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};Ef.prototype.U=t;Ef.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};re.prototype.U=t;re.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};
xd.prototype.U=t;xd.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};qg.prototype.U=t;qg.prototype.N=function(a,b,c){return Yg(this,b,c)};og.prototype.U=t;og.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};Bg.prototype.U=t;Bg.prototype.N=function(a,b,c){return Pg(b,Xg,"#{"," ","}",c,this)};Ae.prototype.U=t;Ae.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};af.prototype.U=t;
af.prototype.N=function(a,b,c){tc(b,"#object[cljs.core.Atom ");Xg(new u(null,1,[fh,this.state],null),b,c);return tc(b,"]")};wg.prototype.U=t;wg.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};X.prototype.U=t;X.prototype.N=function(a,b,c){return Pg(b,Xg,"["," ","]",c,this)};oe.prototype.U=t;oe.prototype.N=function(a,b){return tc(b,"()")};u.prototype.U=t;u.prototype.N=function(a,b,c){return Yg(this,b,c)};Hg.prototype.U=t;Hg.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};
vg.prototype.U=t;vg.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};Ed.prototype.U=t;Ed.prototype.N=function(a,b,c){return Pg(b,Xg,"("," ",")",c,this)};var gh=null;function hh(){null==gh&&(gh=bf(0));return Yc.a([C.a("reagent"),C.a(df.b(gh,ld))].join(""))}function ih(){}
function jh(a){if(null!=a&&null!=a.Qc)a=a.Qc(a);else{var b=jh[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=jh._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("IEncodeJS.-clj-\x3ejs",a);}return a}function kh(a,b){return(null!=a?t===a.Pc||(a.ac?0:z(ih,a)):z(ih,a))?jh(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof Xc?b.a?b.a(a):b.call(null,a):bh(S([a]))}
var lh=function lh(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return lh.i(arguments[0],1<c.length?new H(c.slice(1),0,null):null)};
lh.i=function(a,b){b=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;var c=D.f(b,mh,ve),d=function h(f){if(null==f)return null;if(null!=f?t===f.Pc||(f.ac?0:z(ih,f)):z(ih,f))return jh(f);if(f instanceof E)return c.a?c.a(f):c.call(null,f);if(f instanceof Xc)return C.a(f);if(Ud(f)){var k={};f=G(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.H(null,n),r=U(p,0);p=U(p,1);r=kh(r,d);p=h(p);k[r]=p;n+=1}else if(f=G(f))Xd(f)?(m=Dc(f),f=Ec(f),l=m,m=R(m)):(m=M(f),l=U(m,0),m=U(m,1),l=kh(l,d),m=h(m),k[l]=m,f=O(f),l=null,m=0),
n=0;else break;return k}if(Rd(f)){k=[];f=G(ef.b(h,f));l=null;for(n=m=0;;)if(n<m)r=l.H(null,n),k.push(r),n+=1;else if(f=G(f))l=f,Xd(l)?(f=Dc(l),n=Ec(l),l=f,m=R(f),f=n):(f=M(l),k.push(f),f=O(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};lh.v=1;lh.s=function(a){var b=M(a);a=O(a);return this.i(b,a)};function nh(){}
function oh(a,b){if(null!=a&&null!=a.Oc)a=a.Oc(a,b);else{var c=oh[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=oh._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("IEncodeClojure.-js-\x3eclj",a);}return a}
function ph(a,b){var c=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;c=D.b(c,qh);var d=v(c)?ue:C;return function h(f){return(null!=f?t===f.md||(f.ac?0:z(nh,f)):z(nh,f))?oh(f,Me(ug,b)):$d(f)?Kg(ef.b(h,f)):Hf(f)?new Cf(h(Vb(f)),h(Wb(f))):Rd(f)?kf.f(Fd(f),ef.a(h),f):pb(f)?Ac(vb(function(k,l){return Ge.b(k,h(l))},yc(Dd),f)):(null==f?null:f.constructor)===Object?Ac(vb(function(k,l){var m=d.a?d.a(l):d.call(null,l);l=h(ya(f,l));return Bc(k,m,l)},yc(Re),ua(f))):f}(a)}
function rh(a){var b=sh,c=Error(b);this.message=b;this.data=a;this.kc=null;this.name=c.name;this.description=c.description;this.fileName=c.fileName;this.lineNumber=c.lineNumber;this.columnNumber=c.columnNumber;this.stack=c.stack;return this}rh.prototype.__proto__=Error.prototype;rh.prototype.U=t;rh.prototype.N=function(a,b,c){tc(b,"#error {:message ");Xg(this.message,b,c);v(this.data)&&(tc(b,", :data "),Xg(this.data,b,c));v(this.kc)&&(tc(b,", :cause "),Xg(this.kc,b,c));return tc(b,"}")};
rh.prototype.toString=function(){return Lc(this)};if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof th)var th=null;"undefined"!==typeof console&&ob();if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof uh)var uh=function(){throw Error("cljs.core/*eval* not bound");};var Qe=new Xc(null,"meta24123","meta24123",-46999360,null),vh=new E(null,"description","description",-1428560544),wh=new E(null,"old-state","old-state",1039580704),xh=new E(null,"path","path",-188191168),yh=new E(null,"field--invalid","field--invalid",-1287614816),zh=new E(null,"CPF","CPF",199691873),Ah=new E(null,"data-checkout","data-checkout",1904349121),Bh=new E(null,"on-set","on-set",-140953470),Ch=new E(null,"register-auth-with-firebase-application","register-auth-with-firebase-application",
32742562),Dh=new E(null,"cardNumber","cardNumber",243741922),Eh=new E(null,"email","email",1415816706),Fh=new E(null,"card-number","card-number",2071197827),Gh=new E(null,"h2.payment-information__form__title","h2.payment-information__form__title",1679413475),Hh=new E(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),Ih=new E(null,"cardExpirationYear","cardExpirationYear",-1752837533),Jh=new E(null,"where","where",-2044795965),Kh=new E(null,"p.payment-information__error","p.payment-information__error",
1599315108),Lh=new E(null,"new-state","new-state",-490349212),Mh=new E(null,"group","group",582596132),lb=new E(null,"meta","meta",1499536964),Nh=new E(null,"input#email.field","input#email.field",-861252700),Oh=new E(null,"div.plan-selection__content","div.plan-selection__content",-1492657019),Ph=new Xc(null,"blockable","blockable",-28395259,null),mb=new E(null,"dup","dup",556298533),Qh=new E(null,"div.group-profile","div.group-profile",-656836155),Rh=new E(null,"key","key",-1516042587),Sh=new E(null,
"limit","limit",-1355822363),Th=new E(null,"placeholder","placeholder",-104873083),Uh=new E(null,"numeric","numeric",-1495594714),Vh=new E(null,"group-id","group-id",-1316082778),Wh=new E(null,"ref","ref",1289896967),Xh=new E(null,"ul.plan-list","ul.plan-list",1209831687),Yh=new E(null,"childContextTypes","childContextTypes",578717991),Zh=new E(null,"input#identification.field","input#identification.field",-1287054681),$h=new E(null,"displayName","displayName",-809144601),ai=new E(null,"main.payment-information",
"main.payment-information",743248647),bi=new E(null,"input#expiration-date.field","input#expiration-date.field",-2021117081),ci=new E(null,"validator","validator",-1966190681),di=new E(null,"start-at","start-at",-103334680),ei=new E(null,"default","default",-1987822328),fi=new E(null,"plan-card--selected","plan-card--selected",-1850808056),gi=new E(null,"payment","payment",-1682035288),hi=new E(null,"finally-block","finally-block",832982472),ii=new E(null,"uid","uid",-1447769400),ji=new E(null,"warn",
"warn",-436710552),ki=new E(null,"img.group-profile__picture","img.group-profile__picture",-1473765367),li=new E(null,"name","name",1843675177),mi=new E(null,"li","li",723558921),ni=new E(null,"value","value",305978217),sh=new E(null,"promise-\x3echan-failure","promise-\x3echan-failure",-636959831),oi=new E(null,"contextTypes","contextTypes",-2023853910),pi=new E(null,"authDomain","authDomain",-1125516118),qi=new E(null,"confirmation","confirmation",-634977782),ri=new E(null,"section.card.order-description",
"section.card.order-description",-1410922261),si=new E(null,"b.plan-card__price","b.plan-card__price",1102885291),ti=new E(null,"submit","submit",-49315317),ui=new E(null,"on-blur","on-blur",814300747),vi=new E(null,"apiKey","apiKey",-942818613),wi=new E(null,"component-did-update","component-did-update",-1468549173),xi=new E(null,"plans","plans",75657163),yi=new E(null,"start-after","start-after",-1380036532),fh=new E(null,"val","val",128701612),zi=new E(null,"form.card.payment-information__form",
"form.card.payment-information__form",686881964),Ai=new E(null,"recur","recur",-437573268),Bi=new E(null,"span.field__error","span.field__error",293560684),Ci=new E(null,"type","type",1174270348),Di=new E(null,"catch-block","catch-block",1175212748),Ei=new E(null,"debug","debug",-1608172596),Fi=new E(null,"transaction","transaction",1777321997),Gi=new E(null,"main.payment-confirmation","main.payment-confirmation",-1817280467),Hi=new E(null,"src","src",-1651076051),Ii=new E(null,"h3.plan-card__title",
"h3.plan-card__title",-1534512787),Ji=new E(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),Ki=new E(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),$g=new E(null,"fallback-impl","fallback-impl",-1501286995),of=new E(null,"references","references",882562509),Li=new E(null,"securityCode","securityCode",-1098270131),mh=new E(null,"keyword-fn","keyword-fn",-64566675),jb=new E(null,"flush-on-newline","flush-on-newline",-151457939),Mi=new E(null,"componentWillUnmount",
"componentWillUnmount",1573788814),Ni=new E(null,"on-click","on-click",1632826543),Oi=new E(null,"title","title",636505583),Pi=new E(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),Qi=new E(null,"cardExpirationMonth","cardExpirationMonth",-657220400),Ri=new E(null,"style","style",-496642736),Si=new E(null,"identification","identification",-1342325264),Ti=new E(null,"div","div",1057191632),kb=new E(null,"readably","readably",1129599760),Ui=new E(null,"currency","currency",-898327568),
Qg=new E(null,"more-marker","more-marker",-14717935),Vi=new E(null,"reagentRender","reagentRender",-358306383),Wi=new E(null,"hr.divider","hr.divider",1742411249),Xi=new E(null,"span.order-description__items__item","span.order-description__items__item",-542080463),Yi=new E(null,"reference","reference",-1711695023),Zi=new E(null,"h1.group-profile__name","h1.group-profile__name",1862278993),$i=new E(null,"for","for",-1323786319),aj=new E(null,"\x3c\x3e","\x3c\x3e",1280186386),bj=new E(null,"no-cache",
"no-cache",1588056370),cj=new E(null,"render","render",-1408033454),dj=new E(null,"anonymous?","anonymous?",374098995),ej=new E(null,"reagent-render","reagent-render",-985383853),fj=new Xc(null,"meta25890","meta25890",1166189843,null),gj=new Xc(null,"val","val",1769233139,null),hj=new E(null,"on-write","on-write",31519475),ij=new E(null,"li.card.plan-card","li.card.plan-card",-1557283021),jj=new E(null,"end-at","end-at",1331226740),nb=new E(null,"print-length","print-length",1931866356),kj=new E(null,
"hidden","hidden",-312506092),lj=new E(null,"trx","trx",-1323841164),mj=new E(null,"id","id",-1388402092),nj=new E(null,"picture","picture",-921943404),oj=new E(null,"span.order-description__items__name","span.order-description__items__name",-1113772364),pj=new E(null,"class","class",-2030961996),qj=new E(null,"getInitialState","getInitialState",1541760916),rj=new E(null,"catch-exception","catch-exception",-1997306795),sj=new E(null,"p.plan-card__description","p.plan-card__description",1140363509),
tj=new E(null,"main.plan-selection","main.plan-selection",50718965),uj=new E(null,"constructor","constructor",-1953928811),vj=new E(null,"auto-run","auto-run",1958400437),wj=new E(null,"component-will-unmount","component-will-unmount",-2058314698),xj=new E(null,"prev","prev",-1597069226),yj=new E("firemore","no-document","firemore/no-document",-2015079306),zj=new Xc(null,"meta28123","meta28123",48649654,null),Aj=new E(null,"continue-block","continue-block",-1852047850),Bj=new E(null,"fb","fb",-1331669322),
Cj=new E(null,"end-before","end-before",1724055831),Dj=new E(null,"input#name.field","input#name.field",51792279),Ej=new E(null,"display-name","display-name",694513143),Fj=new E(null,"on-submit","on-submit",1227871159),Gj=new E(null,"label.label","label.label",725637336),Hj=new E(null,"order","order",-1254677256),Ij=new E(null,"on-dispose","on-dispose",2105306360),Jj=new E(null,"error","error",-978969032),Kj=new E(null,"input#verification-code.field","input#verification-code.field",-408235432),Lj=
new E(null,"button.button.plan-selection__subscribe-button","button.button.plan-selection__subscribe-button",-545677672),Mj=new E(null,"projectId","projectId",-1551013096),Nj=new E(null,"componentFunction","componentFunction",825866104),Oj=new E(null,"pending?","pending?",-2133618792),Pj=new E(null,"input","input",556931961),Qj=new E(null,"groups","groups",-136896102),Rj=new E(null,"input#card-number.field","input#card-number.field",-59835782),Sj=new E(null,"query","query",-1288509510),Tj=new E(null,
"cardholderName","cardholderName",1300897754),Uj=new E(null,"expiration-date","expiration-date",-1266973669),Vj=new E(null,"atom","atom",-397043653),Wj=new E(null,"on-change","on-change",-732046149),Xj=new E(null,"project-id","project-id",206449307),Zg=new E(null,"alt-impl","alt-impl",670969595),Yj=new E(null,"ul.order-description__items","ul.order-description__items",-330317476),Zj=new E(null,"selected-plan","selected-plan",210054588),ak=new E(null,"price","price",22129180),bk=new E(null,"verification-code",
"verification-code",-1045306756),qh=new E(null,"keywordize-keys","keywordize-keys",1310784252),ck=new E(null,"step","step",1288888124),dk=new E(null,"p","p",151049309),ek=new E(null,"a.link","a.link",-619461443),fk=new E(null,"button.button","button.button",1464242525),gk=new Xc(null,"meta28005","meta28005",-1339173475,null),hk=new E(null,"contextType","contextType",1033066077),ik=new E(null,"href","href",-793805698),jk=new E(null,"img","img",1442687358),kk=new E(null,"docNumber","docNumber",-1719173346),
lk=new E(null,"api-key","api-key",1037904031),mk=new E(null,"inputMode","inputMode",-1531650881),zg=new E("cljs.core","not-found","cljs.core/not-found",-1572889185),nk=new E(null,"text","text",-1790561697),ok=new E(null,"docType","docType",602900159),pk=new Xc(null,"f","f",43394975,null);var process={};function qk(a,b,c){var d=v(b.ignoreCase)?"gi":"g";d=v(b.multiline)?[d,"m"].join(""):d;return a.replace(new RegExp(b.source,v(b.Cd)?[d,"u"].join(""):d),c)}
function rk(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new H(f,0,null)}return c.call(this,e)}function c(d){d=hf(d);if(cd.b(R(d),1))return d=M(d),a.a?a.a(d):a.call(null,d);d=Gf(d);return a.a?a.a(d):a.call(null,d)}b.v=0;b.s=function(d){d=G(d);return c(d)};b.i=c;return b}()}
function sk(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?qk(a,b,c):qk(a,b,rk(c));throw["Invalid match arg: ",C.a(b)].join("");}function tk(a){var b=new Ya;for(a=G(a);;)if(null!=a)b.append(C.a(M(a))),a=O(a),null!=a&&b.append(" ");else return b.toString()}
function uk(a,b){a="/(?:)/"===C.a(b)?Cd.b(Gf(zd("",ef.b(C,G(a)))),""):Gf(C.a(a).split(b));if(1<R(a))a:for(;;)if(""===(null==a?null:Zb(a)))a=null==a?null:$b(a);else break a;return a};function vk(a){return Intl.NumberFormat(void 0,lh(Me(tg,S([Ri,"currency",Ui,"BRL"])))).format(a)}function wk(a){return tk(ef.b(We.b(ve,M),jf(function(b){b=M(O(b));return b.l?b.l():b.call(null)},Me(tg,a))))}function xk(a,b){return function(c){return new X(null,2,5,Z,[a,xg.i(S([bc(b),c]))],null)}};var yk={},zk={},Ak="undefined"!==typeof window&&null!=window.document,Bk=new Bg(null,new u(null,2,["aria",null,"data",null],null),null);function Ck(a){return 2>R(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function Dk(a){if("string"===typeof a)return a;a=ve(a);var b=uk(a,/-/);var c=G(b);b=M(c);c=O(c);return v(Bk.a?Bk.a(b):Bk.call(null,b))?a:Ne(C,b,ef.b(Ck,c))}
function Ek(a){var b=function(){if(Kd(a)){var c=a.displayName;v(c)||(c=a.name,c="string"===typeof c&&G(c)?c:null)}else c=!1;if(v(c))return c;c=null!=a&&(a.w&4096||t===a.nc)?ve(a):!1;if(v(c))return c;c=Od(a);return Ud(c)?li.a(c):null}();return v(b)?sk(C.a(b),"$","."):null}function Fk(a){return a instanceof E||a instanceof Xc}
var Gk=function Gk(a){switch(arguments.length){case 0:return Gk.l();case 1:return Gk.a(arguments[0]);case 2:return Gk.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Gk.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Gk.l=function(){return null};Gk.a=function(a){return Rd(a)?(a=$e(function(b){return v(b)?Fk(b)?ve(b):b:null},a),G(a)?tk(a):null):Fk(a)?ve(a):a};
Gk.b=function(a,b){return v(a)?v(b)?[C.a(Gk.a(a))," ",C.a(Gk.a(b))].join(""):Gk.a(a):Gk.a(b)};Gk.i=function(a,b,c){return vb(Gk,Gk.b(a,b),c)};Gk.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};Gk.v=2;var Hk=!1;var Ik={},Jk="undefined"!==typeof console;if("undefined"===typeof yk||"undefined"===typeof Ik||"undefined"===typeof Kk)var Kk=bf(null);
if("undefined"===typeof yk||"undefined"===typeof Ik||"undefined"===typeof Lk)var Lk=function(){var a={};a.warn=function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new H(f,0,null)}return c.call(this,e)}function c(d){return df.i(Kk,mf,new X(null,1,5,Z,[ji],null),Cd,S([Me(C,d)]))}b.v=0;b.s=function(d){d=G(d);return c(d)};b.i=c;return b}();a.error=function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=
Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new H(f,0,null)}return c.call(this,e)}function c(d){return df.i(Kk,mf,new X(null,1,5,Z,[Jj],null),Cd,S([Me(C,d)]))}b.v=0;b.s=function(d){d=G(d);return c(d)};b.i=c;return b}();return a}();var Mk={};if("undefined"===typeof yk||"undefined"===typeof zk||"undefined"===typeof Mk||"undefined"===typeof Nk)var Nk=0;function Ok(a){return setTimeout(a,16)}var Pk=Ak?function(){var a=window,b=a.requestAnimationFrame;if(v(b))return b;b=a.webkitRequestAnimationFrame;if(v(b))return b;b=a.mozRequestAnimationFrame;if(v(b))return b;a=a.msRequestAnimationFrame;return v(a)?a:Ok}():Ok;function Qk(a,b){return a.vc-b.vc}
if("undefined"===typeof yk||"undefined"===typeof zk||"undefined"===typeof Mk||"undefined"===typeof Rk)var Rk=function(){return null};function Sk(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.l?d.l():d.call(null);c+=1}else return null}function Tk(a,b,c){if(!v(c))throw Error("Assert failed: Enqueued function must not be nil\nf");b.push(c);return Uk(a)}function Vk(){this.Ob=!1}function Wk(a){var b=a.zb;if(null==b)return null;a.zb=null;return Sk(b)}
function Uk(a){function b(){a.Ob=!1;var c=a.Jc;null!=c&&(a.Jc=null,Sk(c));Rk();c=a.Lb;if(null!=c)a:{a.Lb=null,c.sort(Qk);for(var d=c.length,e=0;;)if(e<d){var f=c[e];!0===f.cljsIsDirty&&f.forceUpdate();e+=1}else break a}return Wk(a)}if(a.Ob)return null;a.Ob=!0;return Pk.a?Pk.a(b):Pk.call(null,b)}function Xk(a){var b=Yk;null==b.zb&&(b.zb=[]);return Tk(b,b.zb,a)}if("undefined"===typeof yk||"undefined"===typeof zk||"undefined"===typeof Mk||"undefined"===typeof Yk){var Yk;Yk=new Vk}
function Zk(a){if(v(a.cljsIsDirty))return null;a.cljsIsDirty=!0;var b=Yk;null==b.Lb&&(b.Lb=[]);return Tk(b,b.Lb,a)};var $k=function $k(a){switch(arguments.length){case 1:return $k.a(arguments[0]);case 2:return $k.b(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return $k.i(arguments[0],arguments[1],new H(c.slice(2),0,null))}};$k.a=function(a){return a};$k.b=function(a,b){return R(a)<R(b)?vb(function(c,d){return ce(b,d)?Pd.b(c,d):c},a,a):vb(Pd,a,b)};$k.i=function(a,b,c){return vb($k,a,Cd.b(c,b))};
$k.s=function(a){var b=M(a),c=O(a);a=M(c);c=O(c);return this.i(b,a,c)};$k.v=2;var al={},bl;if("undefined"===typeof yk||"undefined"===typeof al||"undefined"===typeof cl)var cl=!1;if("undefined"===typeof yk||"undefined"===typeof al||"undefined"===typeof dl)var dl=0;if("undefined"===typeof yk||"undefined"===typeof al||"undefined"===typeof el)var el=bf(0);function fl(a,b){var c=bl;bl=a;try{return b.l?b.l():b.call(null)}finally{bl=c}}
function gl(a,b){b.Bb=null;b.Ad=dl+=1;a=fl(b,a);var c=b.Bb;b.Sa=!1;a:{var d=b.$a;var e=null==c?0:c.length;if(e===(null==d?0:d.length))for(var f=0;;){var h=f===e;if(h){d=h;break a}if(c[f]===d[f])f+=1;else{d=!1;break a}}else d=!1}if(!d)a:{d=Eg(c);e=Eg(b.$a);b.$a=c;c=G($k.b(d,e));f=null;for(var k=h=0;;)if(k<h){var l=f.H(null,k);wc(l,b,hl);k+=1}else if(c=G(c))f=c,Xd(f)?(c=Dc(f),k=Ec(f),f=c,h=R(c),c=k):(c=M(f),wc(c,b,hl),c=O(f),f=null,h=0),k=0;else break;d=G($k.b(e,d));e=null;for(h=f=0;;)if(h<f)c=e.H(null,
h),xc(c,b),h+=1;else if(d=G(d))e=d,Xd(e)?(d=Dc(e),f=Ec(e),e=d,c=R(d),d=f,f=c):(c=M(e),xc(c,b),d=O(e),e=null,f=0),h=0;else break a}return a}function il(a){var b=bl;if(null!=b){var c=b.Bb;null==c?b.Bb=[a]:c.push(a)}}function jl(a,b){cl&&df.f(el,je,R(b)-R(a));return b}function kl(a,b,c){var d=a.ga;a.ga=jl(d,Hd.f(d,b,c));return a.ic=null}function ll(a,b){var c=a.ga;a.ga=jl(c,Jd.b(c,b));return a.ic=null}
function ml(a,b,c){var d=a.ic;d=null==d?a.ic=ge(function(l,m,n){l.push(m);l.push(n);return l},[],a.ga):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.u?k.u(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else break}function nl(a,b,c,d){tc(b,["#\x3c",C.a(d)," "].join(""));a:{d=bl;bl=null;try{var e=bc(a);break a}finally{bl=d}e=void 0}Xg(e,b,c);return tc(b,"\x3e")}if("undefined"===typeof yk||"undefined"===typeof al||"undefined"===typeof ol)var ol=null;
function pl(){for(;;){var a=ol;if(null==a)return null;ol=null;for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.Sa&&null!=d.$a&&ql(d,!0);c+=1}else break}}Rk=pl;function rl(a,b,c,d){this.state=a;this.o=b;this.Za=c;this.ga=d;this.h=2154201088;this.w=114690}g=rl.prototype;g.N=function(a,b,c){return nl(this,b,c,"Atom:")};g.M=function(){return this.o};g.R=function(){return da(this)};g.B=function(a,b){return this===b};
g.na=function(a,b){if(null!=this.Za&&!v(this.Za.a?this.Za.a(b):this.Za.call(null,b)))throw Error("Assert failed: Validator rejected reference state\n(validator new-value)");a=this.state;this.state=b;null!=this.ga&&ml(this,a,b);return b};g.Ub=function(a,b){return this.na(null,b.a?b.a(this.state):b.call(null,this.state))};g.Vb=function(a,b,c){return this.na(null,b.b?b.b(this.state,c):b.call(null,this.state,c))};
g.Wb=function(a,b,c,d){return this.na(null,b.f?b.f(this.state,c,d):b.call(null,this.state,c,d))};g.Xb=function(a,b,c,d,e){return this.na(null,Oe(b,this.state,c,d,e))};g.Zb=function(a,b){ml(this,a,b)};g.Hb=function(a,b,c){return kl(this,b,c)};g.Ib=function(a,b){return ll(this,b)};g.P=function(a,b){return new rl(this.state,b,this.Za,this.ga)};g.Va=function(){il(this);return this.state};
var sl=function sl(a){switch(arguments.length){case 1:return sl.a(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return sl.i(arguments[0],new H(c.slice(1),0,null))}};sl.a=function(a){return new rl(a,null,null,null)};sl.i=function(a,b){var c=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;b=D.b(c,lb);c=D.b(c,ci);return new rl(a,b,c,null)};sl.s=function(a){var b=M(a);a=O(a);return this.i(b,a)};sl.v=1;
function tl(a){if(null!=a&&null!=a.ec)a.ec(a);else{var b=tl[q(null==a?null:a)];if(null!=b)b.a?b.a(a):b.call(null,a);else if(b=tl._,null!=b)b.a?b.a(a):b.call(null,a);else throw A("IDisposable.dispose!",a);}}function hl(a,b,c,d){c===d||a.Sa?a=null:null==a.va?(a.Sa=!0,null==ol&&(ol=[],!1===Yk.Ob&&Uk(Yk)),a=ol.push(a)):a=!0===a.va?ql(a,!1):a.va.a?a.va.a(a):a.va.call(null,a);return a}
function ul(a){this.$=a;this.state=null;this.Sa=!0;this.xc=!1;this.Qb=this.va=this.ga=this.$a=null;this.h=2153807872;this.w=114690}function vl(a){var b=bl;bl=null;try{return a.Va(null)}finally{bl=b}}function ql(a,b){var c=a.state;if(v(b)){b=a.$;try{a.Qb=null;var d=gl(b,a)}catch(e){d=e,a.state=d,a.Qb=d,d=a.Sa=!1}}else d=gl(a.$,a);a.xc||(a.state=d,null==a.ga||cd.b(c,d)||ml(a,c,d));return d}
function wl(a,b){var c=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;b=D.b(c,vj);var d=D.b(c,Bh),e=D.b(c,Ij);c=D.b(c,bj);null!=b&&(a.va=b);null!=d&&(a.zc=d);null!=e&&(a.yc=e);null!=c&&(a.xc=c)}g=ul.prototype;g.N=function(a,b,c){return nl(this,b,c,["Reaction ",C.a(Vc(this)),":"].join(""))};g.R=function(){return da(this)};g.B=function(a,b){return this===b};
g.ec=function(){var a=this.state,b=this.$a;this.va=this.state=this.$a=null;this.Sa=!0;b=G(Eg(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.H(null,e);xc(f,this);e+=1}else if(b=G(b))c=b,Xd(c)?(b=Dc(c),e=Ec(c),c=b,d=R(b),b=e):(b=M(c),xc(b,this),b=O(c),c=null,d=0),e=0;else break;null!=this.yc&&this.yc(a);a=this.zd;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.a?d.a(this):d.call(null,this),c+=1;else return null};
g.na=function(a,b){if(!Kd(this.zc))throw Error("Assert failed: Reaction is read only; on-set is not allowed\n(fn? (.-on-set a))");a=this.state;this.state=b;this.zc(a,b);ml(this,a,b);return b};g.Ub=function(a,b){var c=this;return c.na(null,function(){var d=vl(c);return b.a?b.a(d):b.call(null,d)}())};g.Vb=function(a,b,c){var d=this;return d.na(null,function(){var e=vl(d);return b.b?b.b(e,c):b.call(null,e,c)}())};
g.Wb=function(a,b,c,d){var e=this;return e.na(null,function(){var f=vl(e);return b.f?b.f(f,c,d):b.call(null,f,c,d)}())};g.Xb=function(a,b,c,d,e){return this.na(null,Oe(b,vl(this),c,d,e))};g.Zb=function(a,b){ml(this,a,b)};g.Hb=function(a,b,c){return kl(this,b,c)};g.Ib=function(a,b){a=Qd(this.ga);ll(this,b);return!a&&Qd(this.ga)&&null==this.va?this.ec(null):null};
g.Va=function(){var a=this.Qb;if(null!=a)throw a;(a=null==bl)&&pl();a&&null==this.va?this.Sa&&(a=this.state,this.state=this.$.l?this.$.l():this.$.call(null),null==this.ga||cd.b(a,this.state)||ml(this,a,this.state)):(il(this),this.Sa&&ql(this,!1));return this.state};
function xl(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];b=1<b.length?new H(b.slice(1),0,null):null;var e=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;b=D.b(e,vj);d=D.b(e,Bh);e=D.b(e,Ij);c=new ul(c);wl(c,new u(null,3,[vj,b,Bh,d,Ij,e],null));return c}var yl=xl(null);function zl(a,b){var c=Al,d=yl,e=gl(a,d);null!=d.$a&&(yl=xl(null),wl(d,c),d.$=a,d.va=function(){return Zk.a?Zk.a(b):Zk.call(null,b)},b.cljsRatom=d);return e}
function Bl(a){var b={};a=fl(b,a);return new X(null,2,5,Z,[a,null!=b.Bb],null)};var Cl={},Dl,El=require("react");function Fl(a,b){var c=b.argv;if(null==c){c=Z;a=a.constructor;a:for(var d=ua(b),e=d.length,f=Re,h=0;;)if(h<e){var k=d[h];f=Hd.f(f,ue.a(k),ya(b,k));h+=1}else break a;b=new X(null,2,5,c,[a,f],null)}else b=c;return b}function Gl(a){var b;if(b=Kd(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.fc);return b}function Hl(a){var b;if(b=Kd(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.render);return b}
if("undefined"===typeof yk||"undefined"===typeof zk||"undefined"===typeof Cl||"undefined"===typeof Il)var Il=null;
function Jl(a){for(;;){var b=a.fc;if(be(b))var c=null;else throw Error(["Assert failed: ",["Expected something callable, not ",bh(S([b]))].join(""),"\n(clojure.core/ifn? f)"].join(""));var d=!0===a.Yc?b.call(a,a):function(){var e=Fl(a,a.props);switch(R(e)){case 1:return b.call(a);case 2:return b.call(a,ud(e,1));case 3:return b.call(a,ud(e,1),ud(e,2));case 4:return b.call(a,ud(e,1),ud(e,2),ud(e,3));case 5:return b.call(a,ud(e,1),ud(e,2),ud(e,3),ud(e,4));default:return b.apply(a,ub(e).slice(1))}}();
if(Wd(d))return Il.a?Il.a(d):Il.call(null,d);if(be(d))c=Gl(d)?function(e,f,h,k){return function(){function l(n){var p=null;if(0<arguments.length){p=0;for(var r=Array(arguments.length-0);p<r.length;)r[p]=arguments[p+0],++p;p=new H(r,0,null)}return m.call(this,p)}function m(n){n=Ne(Ze,k,n);return Il.a?Il.a(n):Il.call(null,n)}l.v=0;l.s=function(n){n=G(n);return m(n)};l.i=m;return l}()}(a,b,c,d):d,a.fc=c;else return d}}
function Kl(){var a=Dl;a=null==a?null:a.constructor;a=null==a?null:a.displayName;return Qd(a)?"":[" (in ",C.a(a),")"].join("")}var Al=new u(null,1,[bj,!0],null),Ll=new u(null,1,[cj,function(){var a=this,b=ya(a,"cljsRatom");a.cljsIsDirty=!1;return null==b?zl(function(){a:{var c=Dl;Dl=a;try{var d=[!1];try{var e=Jl(a);d[0]=!0;var f=e;break a}finally{v(d[0])||v(Jk)&&(v(!1)?Lk:console).error(["Error rendering component",Kl()].join(""))}}finally{Dl=c}f=void 0}return f},a):ql(b,!1)}],null);
function Ml(a,b){switch(a instanceof E?a.oa:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){return b.call(null,function(){var e=c.argv;null==e?e=c:(e=U(e,1),e=Ud(e)?e:null);return e}(),d)};case "getInitialState":return function(c){var d=c.$c;d=null!=d?d:c.$c=sl.a(null);return cf(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,Fl(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,Fl(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,Fl(this,c))};case "shouldComponentUpdate":return function(c){var d=Hk;if(v(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!cd.b(d,e)}catch(h){return c=h,v(Jk)&&(v(!1)?Lk:console).warn(["Warning: Exception thrown while comparing argv's in shouldComponentUpdate: ",C.a(d)," ",C.a(e)," ",C.a(c)].join("")),!1}}else return f?b.call(this,this,Fl(this,this.props),
Fl(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,Fl(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,d){return b.call(this,this,Fl(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,Fl(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,
this)};case "componentWillUnmount":return function(){var c=ya(this,"cljsRatom");null!=c&&tl(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,d){return b.call(this,this,c,d)};default:return null}}function Nl(a,b){a=Ml(a,b);if(v(v(a)?b:a)&&!be(b))throw Error(["Assert failed: ",["Expected something callable, not ",bh(S([b]))].join(""),"\n(clojure.core/ifn? f)"].join(""));return v(a)?a:b}
var Ol=new u(null,2,[Pi,null,Mi,null],null),Pl=function(a){var b=bf(Re);return function(c){var d=D.b(bc(b),c);if(null!=d)return d;d=a.a?a.a(c):a.call(null,c);df.u(b,Hd,c,d);return d}}(function(a){if("string"===typeof a)return a;a=ve(a);a=sk(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=uk(a,/-/);var b=G(a);a=M(b);b=O(b);return Ne(C,a,ef.b(Ck,b))});function Ql(a){return ge(function(b,c,d){return Hd.f(b,ue.a(Pl.a?Pl.a(c):Pl.call(null,c)),d)},Re,a)}
function Rl(a){var b=yg(a,new X(null,2,5,Z,[cj,Vi],null)),c=M(Uf(b));if(!qb(Nj.a(a)))throw Error("Assert failed: :component-function is no longer supported, use :reagent-render instead.\n(not (:componentFunction fmap))");if(!(0<R(b)))throw Error("Assert failed: Missing reagent-render\n(pos? (count renders))");if(1!==R(b))throw Error("Assert failed: Too many render functions supplied\n(\x3d\x3d 1 (count renders))");if(!be(c))throw Error(["Assert failed: ",["Expected something callable, not ",bh(S([c]))].join(""),
"\n(clojure.core/ifn? render-fun)"].join(""));var d=function(){var f=Vi.a(a);return v(f)?f:cj.a(a)}();b=null==Vi.a(a);c=function(){var f=$h.a(a);if(v(f))return f;f=Ek(d);return v(f)?f:C.a(hh())}();var e=ge(function(f,h,k){return Hd.f(f,h,Nl(h,k))},Re,a);return Hd.i(e,$h,c,S([Hh,b,Vi,d,cj,cj.a(Ll)]))}function Sl(a){return ge(function(b,c,d){c=ve(c);b[c]=d;return b},{},a)}var Tl=new X(null,5,5,Z,[Yh,oi,hk,Ji,Ki],null);
function Ul(a){function b(k,l,m){El.Component.call(this,k,l,m);v(h)&&(h.b?h.b(this,k):h.call(null,this,k));v(f)&&(this.state=f.a?f.a(this):f.call(null,this));this.vc=Nk+=1;return this}if(!Ud(a))throw Error("Assert failed: (map? body)");a=Rl(xg.i(S([Ol,Ql(a)])));var c=Sl(Md(Jd,a,$h,qj,uj,S([cj,Vi,Tl]))),d=Sl(yg(a,Tl)),e=$h.a(a),f=qj.a(a),h=uj.a(a);Aa(b.prototype,El.Component.prototype,c);v(cj.a(a))&&(b.prototype.render=cj.a(a));v(Vi.a(a))&&(b.prototype.fc=Vi.a(a));v(Hh.a(a))&&(b.prototype.Yc=Hh.a(a));
Aa(b,El.Component,d);v(e)&&(b.displayName=e,b.Ra=e,b.pb=function(k){return tc(k,e)});b.gb=!0;return b.prototype.constructor=b}
function Vl(a){if(!be(a))throw Error(["Assert failed: ",["Expected something callable, not ",bh(S([a]))].join(""),"\n(clojure.core/ifn? f)"].join(""));Hl(a)&&!Gl(a)&&v(Jk)&&(v(!1)?Lk:console).warn(["Warning: Using native React classes directly in Hiccup forms is not supported. Use create-element or adapt-react-class instead: ",C.a(function(){var c=Ek(a);return v(c)?c:a}()),Kl()].join(""));if(Gl(a))return a.wc=a;var b=Od(a);b=Hd.f(b,ej,a);b=Ul(b);return a.wc=b};function Wl(a,b,c){if(ne(c)){var d=Me(qe,ef.b(a,c));return b.a?b.a(d):b.call(null,d)}return Hf(c)?(d=new Cf(function(){var e=Vb(c);return a.a?a.a(e):a.call(null,e)}(),function(){var e=Wb(c);return a.a?a.a(e):a.call(null,e)}()),b.a?b.a(d):b.call(null,d)):$d(c)?(d=Kg(ef.b(a,c)),b.a?b.a(d):b.call(null,d)):Vd(c)?(d=vb(function(e,f){return Cd.b(e,a.a?a.a(f):a.call(null,f))},c,c),b.a?b.a(d):b.call(null,d)):Rd(c)?(d=kf.b(Fd(c),ef.b(a,c)),b.a?b.a(d):b.call(null,d)):b.a?b.a(c):b.call(null,c)}
var Xl=function Xl(a,b){return Wl(Xe.b(Xl,a),he,a.a?a.a(b):a.call(null,b))};var Yl={},Zl=require("react"),$l=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,am={"class":"className","for":"htmlFor",charset:"charSet"};function bm(a,b){return a.hasOwnProperty(b)?ya(a,b):null}function cm(a,b,c){if(Fk(b)){var d=bm(am,ve(b));null==d?(d=Dk(b),b=ve(b),b=am[b]=d):b=d}c=dm.a?dm.a(c):dm.call(null,c);a[b]=c;return a}
function dm(a){return"object"!==q(a)?a:Fk(a)?ve(a):Ud(a)?ge(cm,{},a):Rd(a)?lh(a):be(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new H(f,0,null)}return c.call(this,e)}function c(d){return Me(a,d)}b.v=0;b.s=function(d){d=G(d);return c(d)};b.i=c;return b}():lh(a)}var em={};function fm(a,b,c){if(Fk(b)){var d=bm(em,ve(b));null==d?(d=Dk(b),b=ve(b),b=em[b]=d):b=d}c=dm(c);a[b]=c;return a}
function gm(a){return"object"!==q(a)?a:Fk(a)?ve(a):Ud(a)?ge(fm,{},a):Rd(a)?lh(a):be(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new H(f,0,null)}return c.call(this,e)}function c(d){return Me(a,d)}b.v=0;b.s=function(d){d=G(d);return c(d)};b.i=c;return b}():lh(a)}if("undefined"===typeof yk||"undefined"===typeof zk||"undefined"===typeof Yl||"undefined"===typeof hm)var hm=null;
var im=new Bg(null,new u(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null);
function jm(a,b,c,d){var e=Re;e=null!=e&&(e.h&64||t===e.V)?Me(tg,e):e;e=D.b(e,hj);if(a===document.activeElement&&ce(im,a.type)&&"string"===typeof b&&"string"===typeof c){var f=a.value;if(!cd.b(f,c))return Xk(function(){return km.a?km.a(d):km.call(null,d)});c=R(f)-a.selectionStart;c=R(b)-c;d.Kb=b;a.value=b;Kd(e)&&(e.a?e.a(b):e.call(null,b));a.selectionStart=c;return a.selectionEnd=c}d.Kb=b;a.value=b;return Kd(e)?e.a?e.a(b):e.call(null,b):null}
function km(a){if(v(a.bc)){a.uc=!1;var b=a.Zc,c=a.Kb,d=hm.a?hm.a(a):hm.call(null,a);return cd.b(b,c)?null:jm(d,b,c,a)}return null}function lm(a,b,c){a.Kb=c.target.value;v(a.uc)||(a.uc=!0,Xk(function(){return km(a)}));return b.a?b.a(c):b.call(null,c)}
function mm(a){var b=Dl;if(v(null!=a?function(){var e=a.hasOwnProperty("onChange");return v(e)?a.hasOwnProperty("value"):e}():!1)){if(!v(hm))throw Error("Assert failed: reagent.dom needs to be loaded for controlled input to work\nfind-dom-node");var c=a.value;c=null==c?"":c;var d=a.onChange;v(b.bc)||(b.bc=!0,b.Kb=c);b.Zc=c;delete a.value;a.defaultValue=c;a.onChange=function(e){return lm(b,d,e)}}}
var nm=null,pm=new u(null,4,[Ej,"ReagentInput",wi,km,wj,function(a){return a.bc=null},ej,function(a,b,c,d){mm(c);return om.u?om.u(a,b,c,d):om.call(null,a,b,c,d)}],null);function qm(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.ad=d}function rm(a){if(Ud(a))try{var b=D.b(a,Rh)}catch(c){b=null}else b=null;return b}function sm(a){var b=rm(Od(a));return null==b?rm(U(a,1)):b}var tm={};
function um(a,b,c){var d=a.tag,e=U(b,c),f=null==e||Ud(e);e=f?e:null;var h=pj.a(e);e=v(h)?Hd.f(e,pj,Gk.a(h)):e;var k=a.id;h=a.className;k=null!=k&&null==mj.a(e)?Hd.f(e,mj,k):e;e=v(h)?Hd.f(k,pj,Gk.b(h,pj.a(e))):k;a=v(a.ad)?gm(e):dm(e);a=v(a)?a:{};c+=f?1:0;a:switch(d){case "input":case "textarea":f=!0;break a;default:f=!1}if(f)return f=Z,null==nm&&(nm=Ul(pm)),b=Nd(new X(null,5,5,f,[nm,b,d,a,c],null),Od(b)),vm.a?vm.a(b):vm.call(null,b);f=rm(Od(b));null!=f&&(a.key=f);return om.u?om.u(b,d,a,c):om.call(null,
b,d,a,c)}function wm(a){return C.a(Xl(function(b){if(Kd(b)){var c=Ek(b);return cd.b("",c)?b:cd.b(null,c)?b:Yc.a(c)}return b},a))}function xm(a,b){return[C.a(Me(C,b)),": ",wm(a),"\n",Kl()].join("")}
function ym(a){for(;;){if(!(0<R(a)))throw Error(["Assert failed: ",xm(a,S(["Hiccup form should not be empty"])),"\n(pos? (count v))"].join(""));var b=U(a,0);if(!Fk(b)&&"string"!==typeof b&&!be(b))throw Error(["Assert failed: ",xm(a,S(["Invalid Hiccup form"])),"\n(valid-tag? tag)"].join(""));if(se(aj,b)){b=U(a,1);var c=null==b||Ud(b);b=dm(c?b:null);b=v(b)?b:{};c=1+(c?1:0);var d=sm(a);null!=d&&(b.key=d);return om.u?om.u(a,Zl.Fragment,b,c):om.call(null,a,Zl.Fragment,b,c)}if(Fk(b)||"string"===typeof b)switch(b=
ve(b),c=b.indexOf("\x3e"),c){case -1:c=bm(tm,b);if(null==c){var e=b,f=O(Lg($l,ve(e)));c=U(f,0);d=U(f,1);f=U(f,2);f=null==f?null:sk(f,/\./," ");if(!v(c))throw Error(["Assert failed: ",["Invalid tag: '",C.a(e),"'",Kl()].join(""),"\ntag"].join(""));e=c.indexOf("-");e=!cd.b(-1,e);c=new qm(c,d,f,e);b=tm[b]=c}else b=c;return um(b,a,1);case 0:c=U(a,1);if(!cd.b("\x3e",b))throw Error(["Assert failed: ",xm(a,S(["Invalid Hiccup tag"])),'\n(\x3d "\x3e" n)'].join(""));return um(new qm(c,null,null,null),a,2);default:a=
Nd(new X(null,2,5,Z,[b.substring(0,c),Hd.f(Nd(a,null),0,b.substring(c+1))],null),Od(a))}else return c=b.wc,b=null==c?Vl(b):c,c={},c.argv=a,a=sm(a),null!=a&&(c.key=a),Zl.createElement(b,c)}}function vm(a){return"object"!==q(a)?a:Wd(a)?ym(a):$d(a)?zm.a?zm.a(a):zm.call(null,a):Fk(a)?ve(a):(null!=a?a.h&2147483648||t===a.U||(a.h?0:z(uc,a)):z(uc,a))?bh(S([a])):a}Il=vm;function Am(a,b){return ub(ef.b(function(c){Wd(c)&&null==sm(c)&&(b.fd=!0);return vm(c)},a))}
function zm(a){var b={},c=Bl(function(){return Am(a,b)}),d=U(c,0);c=U(c,1);v(c)&&v(Jk)&&(v(!1)?Lk:console).warn(["Warning: ",xm(a,S(["Reactive deref not supported in lazy seq, ","it should be wrapped in doall"]))].join(""));v(b.fd)&&v(Jk)&&(v(!1)?Lk:console).warn(["Warning: ",xm(a,S(["Every element in a seq should have a unique :key"]))].join(""));return d}
function om(a,b,c,d){switch(R(a)-d){case 0:return Zl.createElement(b,c);case 1:return a=vm(U(a,d)),Zl.createElement(b,c,a);default:return Zl.createElement.apply(null,ge(function(e,f,h){f>=d&&e.push(vm(h));return e},[b,c],a))}};var Bm={},Cm=require("react-dom");if("undefined"===typeof yk||"undefined"===typeof Bm||"undefined"===typeof Dm)var Dm=bf(Re);function Em(a,b){var c=Hk;Hk=!0;try{var d=a.l?a.l():a.call(null);return Cm.render(d,b,function(){var e=Hk;Hk=!1;try{return df.u(Dm,Hd,b,new X(null,2,5,Z,[a,b],null)),Wk(Yk),null}finally{Hk=e}})}finally{Hk=c}}hm=function(a){return Cm.findDOMNode(a)};require("react");function Fm(a,b){var c=sl.a("");return new X(null,2,5,Z,[function(){return bc(c)},function(d){return v(a.a?a.a(d):a.call(null,d))?cf(c,b.a?b.a(d):b.call(null,d)):null}],null)}function Gm(){var a=Xe.b(Lg,/^\d{0,3}$/);return Fm(a,he)};function Hm(a){var b=sl.a(null),c=Me(tg,a);return new X(null,2,5,Z,[function(){return bc(b)},function(d){return cf(b,Te(function(e){var f=U(e,0);e=U(e,1);return v(e.a?e.a(d):e.call(null,d))?f:null},c))}],null)};function Im(a){return ae(Lg(/\d{0,2}\/?\d{0,2}/,a))}function Jm(a){var b=Lg(/(\d{2})\/?(\d{2})/,a),c=U(b,0),d=U(b,1);b=U(b,2);return v(c)?[C.a(d),v(b)?"/":null,C.a(b)].join(""):a}function Km(a){var b=Lg(/(\d{2})\/?(\d{0,2})/,a);a=U(b,0);var c=U(b,1);b=U(b,2);c=parseInt(c);b=parseInt(b);return v(a)?1<=c&&12>=c&&0<b:a}
function Lm(){var a=Fm(Im,Jm),b=U(a,0),c=U(a,1);a=Hm(S(["Expiração é obrigatório",Qd,"Data é inválida",We.b(qb,Km)]));var d=U(a,0),e=U(a,1);return function(){return new X(null,5,5,Z,[aj,new X(null,3,5,Z,[Gj,new u(null,1,[$i,Uj],null),"Expiração"],null),v(d.l?d.l():d.call(null))?new X(null,2,5,Z,[Bi,d.l?d.l():d.call(null)],null):null,new X(null,2,5,Z,[bi,new u(null,8,[pj,wk(S([yh,d])),Ci,nk,li,Uj,ni,b.l?b.l():b.call(null),Wj,function(f){f=f.target.value;return c.a?c.a(f):c.call(null,f)},ui,function(){var f=
b.l?b.l():b.call(null);return e.a?e.a(f):e.call(null,f)},mk,Uh,Th,"DD / AA"],null)],null),function(){var f=Lg(/(\d{2})\/(\d{2})/,b.l?b.l():b.call(null)),h=U(f,0),k=U(f,1);f=U(f,2);return null!=h?new X(null,3,5,Z,[aj,new X(null,2,5,Z,[Pj,new u(null,3,[Ci,kj,Ah,Qi,ni,k],null)],null),new X(null,2,5,Z,[Pj,new u(null,3,[Ci,kj,Ah,Ih,ni,f],null)],null)],null):null}()],null)}}
function Mm(){return new X(null,3,5,Z,[aj,new X(null,3,5,Z,[Gj,new u(null,1,[$i,li],null),"Nome do Titular"],null),new X(null,2,5,Z,[Dj,new u(null,3,[Ci,nk,Ah,Tj,Th,"JOAQUIM M M ASSIS"],null)],null)],null)}var Nm=Og("(?:(\\d{0,4})\\s?(?:(\\d{0,4})\\s?(?:(\\d{0,4})\\s?(?:(\\d{0,4}))?)?)?)?");function Om(a){return ae(Lg(/(\d(\d(\d(\d\s?)?)?)?){0,4}/,a))}function Pm(a){a=Lg(Nm,a);a=G(a);M(a);a=O(a);return tk(jf(ae,a))}
function Qm(){var a=Fm(Om,Pm),b=U(a,0),c=U(a,1);return function(){return new X(null,3,5,Z,[aj,new X(null,3,5,Z,[Gj,new u(null,1,[$i,Fh],null),"Número do cartão"],null),new X(null,2,5,Z,[Rj,new u(null,6,[Ci,nk,Ah,Dh,ni,b.l?b.l():b.call(null),Wj,function(d){d=d.target.value;return c.a?c.a(d):c.call(null,d)},mk,Uh,Th,"1234 5678 9012 3456"],null)],null)],null)}}
function Rm(){var a=Gm(),b=U(a,0),c=U(a,1);return function(){return new X(null,3,5,Z,[aj,new X(null,3,5,Z,[Gj,new u(null,1,[$i,bk],null),"Código de verificação"],null),new X(null,2,5,Z,[Kj,new u(null,6,[Ci,nk,Ah,Li,ni,b.l?b.l():b.call(null),Wj,function(d){d=d.target.value;return c.a?c.a(d):c.call(null,d)},mk,Uh,Th,"000"],null)],null)],null)}};var Sm=sl.a(new u(null,3,[Mh,Re,xi,Dd,Zj,null],null));wc(Sm,Ei,function(a,b,c,d){Sg(bh(S([new u(null,4,[Rh,a,Vj,b,wh,c,Lh,d],null)])));v(fb)?(a=ib(),Sg("\n"),a=(D.b(a,jb),null)):a=null;return a});function Tm(){var a=bc(Sm);a=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;var b=D.b(a,Zj);a=D.b(a,xi);return M(jf(function(c){return cd.b(b,mj.a(c))},a))};var Um=Og("(?:(\\d{3})\\.?(?:(\\d{3})\\.?(?:(\\d{3})-?(?:(\\d{2}))?)?)?)?");function Vm(a){var b=Lg(Um,a),c=U(b,0),d=U(b,1),e=U(b,2),f=U(b,3);b=U(b,4);d=[C.a(d),v(e)?".":null,C.a(e),v(f)?".":null,C.a(f),v(b)?"-":null,C.a(b)].join("");return v(c)?d:a}function Wm(a){return null!=Lg(/[\d\.-]{0,14}/,a)}function Xm(a){function b(d){return 11-(fe(je,ef.f(ke,ff(d,c),pe(Jg(d+2))))%11+11)%11}var c=lf(parseInt,Ng(a));return cd.b(b(9),D.b(c,9))&&cd.b(b(10),D.b(c,10))}
function Ym(){var a=Fm(Wm,Vm),b=U(a,0),c=U(a,1);a=Hm(S(["CPF é obrigatório",Qd,"CPF não é válido",We.b(qb,Xm)]));var d=U(a,0),e=U(a,1);return function(){return new X(null,5,5,Z,[aj,new X(null,3,5,Z,[Gj,new u(null,1,[$i,Si],null),"CPF"],null),v(d.l?d.l():d.call(null))?new X(null,2,5,Z,[Bi,d.l?d.l():d.call(null)],null):null,new X(null,2,5,Z,[Zh,new u(null,8,[pj,wk(S([yh,function(){return null!=(d.l?d.l():d.call(null))}])),Ci,nk,Ah,kk,ni,b.l?b.l():b.call(null),Wj,function(f){f=f.target.value;return c.a?
c.a(f):c.call(null,f)},ui,function(){var f=b.l?b.l():b.call(null);return e.a?e.a(f):e.call(null,f)},Th,"123.456.789-00",mk,Uh],null)],null),new X(null,2,5,Z,[Pj,new u(null,3,[Ci,kj,Ah,ok,ni,zh],null)],null)],null)}};var Zm={},$m,an={};function bn(a,b){var c=cn;if(null!=a&&null!=a.Jb)a=a.Jb(a,b,c);else{var d=bn[q(null==a?null:a)];if(null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else if(d=bn._,null!=d)a=d.f?d.f(a,b,c):d.call(null,a,b,c);else throw A("WritePort.put!",a);}return a}function dn(a){if(null!=a&&null!=a.ob)a=a.ob(a);else{var b=dn[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=dn._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("Channel.close!",a);}return a}
function en(a){if(null!=a&&null!=a.sc)a=!0;else{var b=en[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=en._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("Handler.active?",a);}return a}function fn(a){if(null!=a&&null!=a.tc)a=a.$;else{var b=fn[q(null==a?null:a)];if(null!=b)a=b.a?b.a(a):b.call(null,a);else if(b=fn._,null!=b)a=b.a?b.a(a):b.call(null,a);else throw A("Handler.commit",a);}return a}
function gn(a,b){if(null!=a&&null!=a.rc)a=a.rc(a,b);else{var c=gn[q(null==a?null:a)];if(null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else if(c=gn._,null!=c)a=c.b?c.b(a,b):c.call(null,a,b);else throw A("Buffer.add!*",a);}return a}var hn=function hn(a){switch(arguments.length){case 1:return hn.a(arguments[0]);case 2:return hn.b(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",C.a(arguments.length)].join(""));}};hn.a=function(a){return a};
hn.b=function(a,b){if(null==b)throw Error("Assert failed: (not (nil? itm))");return gn(a,b)};hn.v=2;var jn={};function kn(a,b,c,d,e){for(var f=0;;)if(f<e)c[d+f]=a[b+f],f+=1;else break}function ln(a){this.length=this.I=this.head=0;this.c=a}ln.prototype.pop=function(){if(0===this.length)return null;var a=this.c[this.I];this.c[this.I]=null;this.I=(this.I+1)%this.c.length;--this.length;return a};ln.prototype.unshift=function(a){this.c[this.head]=a;this.head=(this.head+1)%this.c.length;this.length+=1;return null};function mn(a,b){a.length+1===a.c.length&&a.resize();a.unshift(b)}
ln.prototype.resize=function(){var a=Array(2*this.c.length);return this.I<this.head?(kn(this.c,this.I,a,0,this.length),this.I=0,this.head=this.length,this.c=a):this.I>this.head?(kn(this.c,this.I,a,0,this.c.length-this.I),kn(this.c,0,a,this.c.length-this.I,this.head),this.I=0,this.head=this.length,this.c=a):this.I===this.head?(this.head=this.I=0,this.c=a):null};function nn(a,b){for(var c=a.length,d=0;;)if(d<c){var e=a.pop();(b.a?b.a(e):b.call(null,e))&&a.unshift(e);d+=1}else break}
function on(a){if(!(0<a))throw Error("Assert failed: Can't create a ring buffer of size 0\n(\x3e n 0)");return new ln(Array(a))}function pn(a,b){this.G=a;this.n=b;this.h=2;this.w=0}function qn(a){return a.G.length===a.n}pn.prototype.rc=function(a,b){mn(this.G,b);return this};pn.prototype.L=function(){return this.G.length};if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof Zm||"undefined"===typeof an||"undefined"===typeof jn||"undefined"===typeof rn)var rn={};function sn(){return Sa("iPhone")&&!Sa("iPod")&&!Sa("iPad")};Sa("Opera");Sa("Trident")||Sa("MSIE");Sa("Edge");!Sa("Gecko")||Ka("WebKit")&&!Sa("Edge")||Sa("Trident")||Sa("MSIE")||Sa("Edge");Ka("WebKit")&&!Sa("Edge")&&Sa("Mobile");Sa("Macintosh");Sa("Windows");Sa("Linux")||Sa("CrOS");var tn=aa.navigator||null;tn&&(tn.appVersion||"").indexOf("X11");Sa("Android");sn();Sa("iPad");Sa("iPod");sn()||Sa("iPad")||Sa("iPod");Ka("KaiOS");Ka("GAFP");function un(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};var vn;
function wn(){var a=aa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Sa("Presto")&&(a=function(){var e=un("IFRAME");e.style.display="none";Xa(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Va());e.close();var h="callImmediate"+Math.random(),k="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ma(function(l){if(("*"==k||l.origin==k)&&l.data==h)this.port1.onmessage()},this);
f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(h,k)}}});if("undefined"!==typeof a&&!Sa("Trident")&&!Sa("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.lc;c.lc=null;e()}};return function(e){d.next={lc:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in un("SCRIPT")?function(e){var f=un("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);
f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){aa.setTimeout(e,0)}};var xn=on(32),yn=!1,zn=!1;function An(){yn=!0;zn=!1;for(var a=0;;){var b=xn.pop();if(null!=b&&(b.l?b.l():b.call(null),1024>a)){a+=1;continue}break}yn=!1;return 0<xn.length?Bn.l?Bn.l():Bn.call(null):null}function Bn(){if(zn&&yn)return null;zn=!0;!ba(aa.setImmediate)||aa.Window&&aa.Window.prototype&&!Sa("Edge")&&aa.Window.prototype.setImmediate==aa.setImmediate?(vn||(vn=wn()),vn(An)):aa.setImmediate(An)}function Cn(a){mn(xn,a);Bn()};var Dn={},En;
function Fn(a){if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof Zm||"undefined"===typeof an||"undefined"===typeof Dn||"undefined"===typeof En)En=function(b,c){this.val=b;this.cd=c;this.h=425984;this.w=0},En.prototype.P=function(b,c){return new En(this.val,c)},En.prototype.M=function(){return this.cd},En.prototype.Va=function(){return this.val},En.cc=function(){return new X(null,2,5,Z,[gj,fj],null)},En.gb=!0,En.Ra="cljs.core.async.impl.channels/t_cljs$core$async$impl$channels25889",En.pb=
function(b){return tc(b,"cljs.core.async.impl.channels/t_cljs$core$async$impl$channels25889")};return new En(a,Re)}function Gn(a,b){this.rb=a;this.val=b}function Hn(a){return en(a.rb)}function In(a,b,c,d){this.Ya=a;this.Nb=0;this.wa=b;this.Mb=0;this.G=c;this.closed=!1;this.la=d}function Jn(a){for(;;){var b=a.wa.pop();if(null!=b){var c=b.rb;Cn(function(d){return function(){return d.a?d.a(!0):d.call(null,!0)}}(c.$,c,b.val,b,a))}break}nn(a.wa,Ve());a.ob(null)}
In.prototype.Jb=function(a,b,c){var d=this,e=this;if(null==b)throw Error("Assert failed: Can't put nil on a channel\n(not (nil? val))");var f=d.closed;if(f)return Fn(!f);if(v(function(){var p=d.G;return v(p)?qb(qn(d.G)):p}())){var h=nd(d.la.b?d.la.b(d.G,b):d.la.call(null,d.G,b));c=function(){for(var p=Dd;;)if(0<d.Ya.length&&0<R(d.G)){var r=d.Ya.pop(),w=r.$,y=d.G.G.pop();p=Cd.b(p,function(B,I,W){return function(){return I.a?I.a(W):I.call(null,W)}}(p,w,y,r,h,f,e))}else return p}();h&&Jn(e);if(G(c)){c=
G(c);a=null;for(var k=0,l=0;;)if(l<k){var m=a.H(null,l);Cn(m);l+=1}else if(c=G(c))a=c,Xd(a)?(c=Dc(a),l=Ec(a),a=c,k=R(c),c=l):(c=M(a),Cn(c),c=O(a),a=null,k=0),l=0;else break}return Fn(!0)}a=function(){for(;;){var p=d.Ya.pop();if(v(p)){if(v(!0))return p}else return null}}();if(v(a)){var n=a.$;Cn(function(){return n.a?n.a(b):n.call(null,b)});return Fn(!0)}64<d.Mb?(d.Mb=0,nn(d.wa,Hn)):d.Mb+=1;if(v(c.$b())){if(!(1024>d.wa.length))throw Error(["Assert failed: ",["No more than ",C.a(1024)," pending puts are allowed on a single channel. Consider using a windowed buffer."].join(""),
"\n(\x3c (.-length puts) impl/MAX-QUEUE-SIZE)"].join(""));mn(d.wa,new Gn(c,b))}return null};
function Kn(a,b){if(null!=a.G&&0<R(a.G)){b=b.$;if(v(b)){var c=a.G.G.pop(),d=0<a.wa.length?function(){for(var y=Dd;;){var B=a.wa.pop(),I=B.val;B=B.rb.$;y=v(B)?Cd.b(y,B):y;I=v(B)?nd(a.la.b?a.la.b(a.G,I):a.la.call(null,a.G,I)):null;if(!(qb(I)&&qb(qn(a.G))&&0<a.wa.length))return new X(null,2,5,Z,[I,y],null)}}():null,e=U(d,0),f=U(d,1);v(e)&&Jn(a);for(var h=G(f),k=null,l=0,m=0;;)if(m<l){var n=k.H(null,m);Cn(function(y,B,I,W,ha){return function(){return ha.a?ha.a(!0):ha.call(null,!0)}}(h,k,l,m,n,c,d,e,f,
b,b,a));m+=1}else{var p=G(h);if(p){n=p;if(Xd(n))h=Dc(n),m=Ec(n),k=h,l=R(h),h=m;else{var r=M(n);Cn(function(y,B,I,W,ha){return function(){return ha.a?ha.a(!0):ha.call(null,!0)}}(h,k,l,m,r,n,p,c,d,e,f,b,b,a));h=O(n);k=null;l=0}m=0}else break}return Fn(c)}return null}c=function(){for(;;){var y=a.wa.pop();if(v(y)){if(en(y.rb))return y}else return null}}();if(v(c)){var w=fn(c.rb);Cn(function(){return w.a?w.a(!0):w.call(null,!0)});return Fn(c.val)}if(v(a.closed))return v(a.G)&&(a.la.a?a.la.a(a.G):a.la.call(null,
a.G)),v(v(!0)?b.$:!0)?(b=function(){var y=a.G;return v(y)?0<R(a.G):y}(),c=v(b)?a.G.G.pop():null,Fn(c)):null;64<a.Nb?(a.Nb=0,nn(a.Ya,en)):a.Nb+=1;if(v(b.$b())){if(!(1024>a.Ya.length))throw Error(["Assert failed: ",["No more than ",C.a(1024)," pending takes are allowed on a single channel."].join(""),"\n(\x3c (.-length takes) impl/MAX-QUEUE-SIZE)"].join(""));mn(a.Ya,b)}return null}
In.prototype.ob=function(){var a=this;if(!a.closed)for(a.closed=!0,v(function(){var e=a.G;return v(e)?0===a.wa.length:e}())&&(a.la.a?a.la.a(a.G):a.la.call(null,a.G));;){var b=a.Ya.pop();if(null!=b){var c=b.$,d=v(function(){var e=a.G;return v(e)?0<R(a.G):e}())?a.G.G.pop():null;Cn(function(e,f){return function(){return e.a?e.a(f):e.call(null,f)}}(c,d,b,this))}else break}return null};function Ln(a){console.log(a);return null}
function Mn(a,b){var c=v(null)?null:Ln;b=c.a?c.a(b):c.call(null,b);return null==b?a:hn.b(a,b)}
function Nn(a){return new In(on(32),on(32),a,function(){var b=v(null)?null.a?null.a(hn):null.call(null,hn):hn;return function(){function c(f,h){try{return b.b?b.b(f,h):b.call(null,f,h)}catch(k){return Mn(f,k)}}function d(f){try{return b.a?b.a(f):b.call(null,f)}catch(h){return Mn(f,h)}}var e=null;e=function(f,h){switch(arguments.length){case 1:return d.call(this,f);case 2:return c.call(this,f,h)}throw Error("Invalid arity: "+arguments.length);};e.a=d;e.b=c;return e}()}())};var On={},Pn;
function Qn(a){if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof Zm||"undefined"===typeof an||"undefined"===typeof On||"undefined"===typeof Pn)Pn=function(b,c){this.$=b;this.dd=c;this.h=393216;this.w=0},Pn.prototype.P=function(b,c){return new Pn(this.$,c)},Pn.prototype.M=function(){return this.dd},Pn.prototype.sc=function(){return!0},Pn.prototype.$b=function(){return!0},Pn.prototype.tc=function(){return this.$},Pn.cc=function(){return new X(null,2,5,Z,[pk,gk],null)},Pn.gb=
!0,Pn.Ra="cljs.core.async.impl.ioc-helpers/t_cljs$core$async$impl$ioc_helpers28004",Pn.pb=function(b){return tc(b,"cljs.core.async.impl.ioc-helpers/t_cljs$core$async$impl$ioc_helpers28004")};return new Pn(a,Re)}function Rn(a){try{var b=a[0];return b.a?b.a(a):b.call(null,a)}catch(c){if(c instanceof Object)throw b=c,a[6].ob(null),b;throw c;}}function Sn(a,b,c){c=Kn(c,Qn(function(d){a[2]=d;a[1]=b;return Rn(a)}));return v(c)?(a[2]=bc(c),a[1]=b,Ai):null}
function Tn(a,b,c){b=b.Jb(null,c,Qn(function(d){a[2]=d;a[1]=2;return Rn(a)}));return v(b)?(a[2]=bc(b),a[1]=2,Ai):null}function Un(a,b){a=a[6];null!=b&&a.Jb(null,b,Qn(function(){return null}));a.ob(null);return a}
function Vn(a){for(;;){var b=a[4],c=Di.a(b),d=rj.a(b),e=a[5];if(v(function(){var f=e;return v(f)?qb(b):f}()))throw e;if(v(function(){var f=e;return v(f)?(f=c,v(f)?cd.b(ei,d)||e instanceof d:f):f}())){a[1]=c;a[2]=e;a[5]=null;a[4]=Hd.i(b,Di,null,S([rj,null]));break}if(v(function(){var f=e;return v(f)?qb(c)&&qb(hi.a(b)):f}()))a[4]=xj.a(b);else{if(v(function(){var f=e;return v(f)?qb(c)?hi.a(b):!1:f}())){a[1]=hi.a(b);a[4]=Hd.f(b,hi,null);break}if(v(qb(e)?hi.a(b):!1)){a[1]=hi.a(b);a[4]=Hd.f(b,hi,null);
break}if(qb(e)&&qb(hi.a(b))){a[1]=Aj.a(b);a[4]=xj.a(b);break}throw Error("No matching clause");}}};function Wn(a){a=cd.b(a,0)?null:a;if(v(null)&&!v(a))throw Error("Assert failed: buffer must be supplied when transducer is\nbuf-or-n");a="number"===typeof a?new pn(on(a),a):a;return Nn(a)}
var cn=function(a){if("undefined"===typeof Za||"undefined"===typeof $a||"undefined"===typeof Zm||"undefined"===typeof $m)$m=function(b,c,d){this.$=b;this.jc=c;this.ed=d;this.h=393216;this.w=0},$m.prototype.P=function(b,c){return new $m(this.$,this.jc,c)},$m.prototype.M=function(){return this.ed},$m.prototype.sc=function(){return!0},$m.prototype.$b=function(){return this.jc},$m.prototype.tc=function(){return this.$},$m.cc=function(){return new X(null,3,5,Z,[pk,Ph,zj],null)},$m.gb=!0,$m.Ra="cljs.core.async/t_cljs$core$async28122",
$m.pb=function(b){return tc(b,"cljs.core.async/t_cljs$core$async28122")};return new $m(a,!0,Re)}(function(){return null});function Xn(a,b){a=bn(a,b);return v(a)?bc(a):!0};var Yn=bf(null),Zn=bf(null);firebase.firestore.FieldValue.serverTimestamp();var $n=bf(Dd);function ao(a,b){return M(M(jf(function(c){return lj.a(M(O(c)))===b},Ye(a))))}function bo(a,b,c){var d=ao(a,b);d=v(d)?d:R(a);b=D.f(a,d,new u(null,2,[lj,b,of,Dg],null));c=nf(b,c);return Hd.f(a,d,c)}function co(a,b){var c=G(b);M(c);O(c);a=a.firestore();c=bc(Zn);v(c)&&a.settings(lh(c));c=b;for(b=!0;;){var d=G(c);c=M(d);var e=O(d);d=c;c=e;a=b?a.collection(ve(d)):a.doc(d);if(Qd(c))return a;b=!b}}
function eo(a){return cd.b(a.substring(0,1),":")?(a=uk(a.substring(1),"/"),Me(ue,a)):a}function fo(a){return ge(function(b,c,d){return Hd.f(b,eo(c),d)},Re,ph(a,S([qh,!1])))}function go(a,b){return xg.i(S([new u(null,2,[Wh,co(a,b),xh,b],null),Ue(R(b))?new u(null,1,[mj,null==b?null:Zb(b)],null):null]))}function ho(a){if(v(a)){var b=U(a,0);return Wd(b)?null:new u(null,1,[Jh,new X(null,1,5,Z,[a],null)],null)}return null}function io(a){return"string"===typeof a?new X(null,2,5,Z,[a,"asc"],null):a}
function jo(a){var b=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a,c=D.b(b,Jh),d=D.b(b,Hj);D.b(b,Sh);D.b(b,di);D.b(b,yi);D.b(b,jj);D.b(b,Cj);return xg.i(S([a,ho(c),v(d)?new u(null,1,[Hj,lf(io,d)],null):null]))}function ko(a,b,c){return xg.i(S([go(a,b),new u(null,1,[Sj,jo(c)],null)]))}function lo(a,b){if(!Wd(b))throw Error("Assert failed: (vector? reference)");return Ud(null==b?null:Zb(b))?ko(a,null==b?null:$b(b),null==b?null:Zb(b)):Ue(R(b))?go(a,b):ko(a,b,Re)}
function mo(a,b){return no(a,b,function(c){return new rh(new u(null,1,[Jj,c],null))})}function no(a,b,c){var d=Wn(null);a.then(function(e){e=null==e?null:b.a?b.a(e):b.call(null,e);return null==e?null:Xn(d,e)}).catch(function(e){e=c.a?c.a(e):c.call(null,e);return v(e)?(console.error(bh(S([e]))),Xn(d,e)):null}).finally(function(){return dn(d)});return d}function oo(a){return xg.i(S([new u(null,1,[Bj,bc(Yn)],null),a]))}
function po(a,b){return vb(function(c,d){var e=U(d,0),f=U(d,1);d=U(d,2);return c.where(C.a(e),f,Rd(d)?lh(d):d)},a,Jh.a(b))}function qo(a,b){return vb(function(c,d){var e=U(d,0);d=U(d,1);return c.orderBy(C.a(e),d)},a,Hj.a(b))}function ro(a,b){a=qo(po(a,b),b);b=Sh.a(b);return v(b)?a.limit(b):a}function so(a,b){if(v(b.exists)){var c=fo(b.data());var d=b.id;a=new u(null,3,[mj,d,Yi,Cd.b(null==a?null:$b(a),d),Oj,b.metadata.hasPendingWrites],null);c=Nd(c,a)}else c=yj;return c}
function to(a,b){b=oo(b);b=null!=b&&(b.h&64||t===b.V)?Me(tg,b):b;var c=D.b(b,Bj);b=D.b(b,Fi);c=lo(c,a);var d=null!=c&&(c.h&64||t===c.V)?Me(tg,c):c;c=D.b(d,Wh);d=D.b(d,Sj);v(d)?b=mo(ro(c,d).get(),function(e){var f=bf(Nd(Dd,new u(null,1,[Yi,a],null)));e.forEach(function(h){return df.f(f,Cd,so(a,h))});return bc(f)}):(v(b)?(df.u($n,bo,b,a),b=b.get(c)):b=c.get(),b=mo(b,function(e){return so(a,e)}));return b};ob();ob();var uo=bf(null);function vo(a){return v(a)?cf(uo,new u(null,2,[dj,a.isAnonymous,ii,a.uid],null)):null}wc(Yn,Ch,function(a,b,c,d){return d.auth().onAuthStateChanged(vo)});ob();function wo(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];b=U(1<b.length?new H(b.slice(1),0,null):null,0);return to(c,b)};var xo=sl.a(new u(null,2,[Vh,"subscribe",ck,xi],null)),yo=Xe.f(df,xo,Hd);function zo(a){var b=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;a=D.b(b,nj);b=D.b(b,li);return new X(null,3,5,Z,[Qh,new X(null,2,5,Z,[ki,new u(null,1,[Hi,a],null)],null),new X(null,2,5,Z,[Zi,b],null)],null)};function Ao(a,b){var c=Z;a=new X(null,2,5,Z,[zo,a],null);var d=new X(null,1,5,Z,[Wi],null);var e=Tm();var f=null!=e&&(e.h&64||t===e.V)?Me(tg,e):e;e=D.b(f,Oi);f=D.b(f,ak);e=new X(null,3,5,Z,[Yj,new X(null,3,5,Z,[mi,new X(null,2,5,Z,[Xi,"Plano"],null),new X(null,2,5,Z,[oj,e],null)],null),new X(null,3,5,Z,[mi,new X(null,2,5,Z,[Xi,"Preço"],null),new X(null,2,5,Z,[oj,vk(f)],null)],null)],null);return new X(null,5,5,c,[ri,a,d,e,new X(null,3,5,Z,[ek,new u(null,2,[ik,"#",Ni,b],null),"Trocar"],null)],null)}
;function Bo(a){var b=Wn(null);window.Mercadopago.createToken(a,function(c,d){var e=Wn(1);Cn(function(){var f=function(){return function(){function k(n){for(;;){a:try{for(;;){var p=n,r=p[1];if(1===r){var w=300>c,y=ph(d,S([qh,!0]));var B=Tn(p,b,new X(null,2,5,Z,[w,y],null))}else B=2===r?Un(p,p[2]):null;if(!se(B,Ai)){var I=B;break a}}}catch(W){if(W instanceof Object)n[5]=W,Vn(n),I=Ai;else throw W;}if(!se(I,Ai))return I}}function l(){var n=[null,null,null,null,null,null,null];n[0]=m;n[1]=1;return n}var m=
null;m=function(n){switch(arguments.length){case 0:return l.call(this);case 1:return k.call(this,n)}throw Error("Invalid arity: "+arguments.length);};m.l=l;m.a=k;return m}()}(),h=function(){var k=f.l?f.l():f.call(null);k[6]=e;return k}();return Rn(h)});return e});return b};ob();function Co(a){var b=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a,c=D.b(b,mj);a=D.b(b,Oi);var d=D.b(b,vh);b=D.b(b,ak);return new X(null,5,5,Z,[ij,new u(null,3,[Rh,c,pj,wk(S([fi,function(){return cd.b(Zj.a(bc(Sm)),c)}])),Ni,function(){return df.u(Sm,Hd,Zj,c)}],null),new X(null,2,5,Z,[si,vk(b)],null),new X(null,2,5,Z,[Ii,a],null),new X(null,2,5,Z,[sj,d],null)],null)}
function Do(a){var b=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;a=D.b(b,Mh);b=D.b(b,xi);return new X(null,3,5,Z,[tj,new X(null,3,5,Z,[Oh,new X(null,2,5,Z,[zo,a],null),new X(null,2,5,Z,[Xh,Kg(ef.b(Co,b))],null)],null),new X(null,3,5,Z,[Lj,new u(null,1,[Ni,function(){return yo.b?yo.b(ck,gi):yo.call(null,ck,gi)}],null),"Assinar"],null)],null)}window.Mercadopago.setPublishableKey("TEST-21ee96e7-5cab-40a3-959c-7da1a0adbd2a");
function Eo(a){a.preventDefault();a.persist();var b=Wn(1);Cn(function(){var c=function(){function e(f){var h=f[1];if(1===h)return h=Bo(a.target),Sn(f,2,h);if(2===h){var k=f[2];h=U(k,0);k=U(k,1);f[7]=k;f[1]=v(h)?3:4;return Ai}return 3===h?(h=yo.b?yo.b(ck,qi):yo.call(null,ck,qi),f[2]=h,f[1]=5,Ai):4===h?(h=df.u(Sm,Hd,Jj,"Verifique os dados do cartão."),f[2]=h,f[1]=5,Ai):5===h?Un(f,f[2]):null}return function(){function f(l){for(;;){a:try{for(;;){var m=e(l);if(!se(m,Ai)){var n=m;break a}}}catch(p){if(p instanceof
Object)l[5]=p,Vn(l),n=Ai;else throw p;}if(!se(n,Ai))return n}}function h(){var l=[null,null,null,null,null,null,null,null];l[0]=k;l[1]=1;return l}var k=null;k=function(l){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,l)}throw Error("Invalid arity: "+arguments.length);};k.l=h;k.a=f;return k}()}(),d=function(){var e=c.l?c.l():c.call(null);e[6]=b;return e}();return Rn(d)});return b}
function Fo(a){var b=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;a=D.b(b,Mh);b=D.b(b,Jj);return new X(null,3,5,Z,[ai,new X(null,3,5,Z,[Ao,a,function(c){c.preventDefault();return yo.b?yo.b(ck,xi):yo.call(null,ck,xi)}],null),new X(null,12,5,Z,[zi,new u(null,1,[Fj,Eo],null),new X(null,2,5,Z,[Gh,"Pagamento"],null),v(b)?new X(null,2,5,Z,[Kh,b],null):null,new X(null,1,5,Z,[Ym],null),new X(null,3,5,Z,[Gj,new u(null,1,[$i,Eh],null),"E-mail"],null),new X(null,2,5,Z,[Nh,new u(null,3,[Ci,Eh,li,Eh,Th,"fulano@exemplo.com.br"],
null)],null),new X(null,1,5,Z,[Mm],null),new X(null,1,5,Z,[Qm],null),new X(null,1,5,Z,[Lm],null),new X(null,1,5,Z,[Rm],null),new X(null,3,5,Z,[fk,new u(null,1,[Ci,ti],null),"Pagar"],null)],null)],null)}function Go(a){var b=document.createElement("script");b.src="https://telegram.org/js/telegram-widget.js?14";b.async=!0;b.dataset.telegramLogin="new_agent_773_bot";b.dataset.size="large";b.dataset.onauth="onlypartners.core.create_subscription(user)";b.dataset.requestAccess="write";a.appendChild(b)}
function Ho(){var a=sl.a(null);return function(){var b=Z,c=new u(null,1,[Wh,function(d){return cf(a,d)}],null);v(bc(a))&&Go(bc(a));return new X(null,3,5,b,[Ti,c,null],null)}}
function Io(a){a=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;a=D.b(a,Mh);return new X(null,5,5,Z,[Gi,new X(null,2,5,Z,[jk,new u(null,1,[Hi,"/img/success.svg"],null)],null),new X(null,2,5,Z,[dk,"Agora basta você acessar com seu Telegram clicando no botão abaixo que te adicionaremos no grupo."],null),new X(null,2,5,Z,[zo,a],null),new X(null,1,5,Z,[Ho],null)],null)}
var Jo=new X(null,1,5,Z,[xk(xk(function(a){a=null!=a&&(a.h&64||t===a.V)?Me(tg,a):a;var b=D.b(a,ck);switch(b instanceof E?b.oa:null){case "plans":return new X(null,2,5,Z,[Do,a],null);case "payment":return new X(null,2,5,Z,[Fo,a],null);case "confirmation":return new X(null,2,5,Z,[Io,a],null);default:return null}},xo),Sm)],null),Ko=document.getElementById("app");(function(a,b){pl();return Em(function(){return vm(Kd(a)?a.l?a.l():a.call(null):a)},b)})(Jo,Ko);var Lo=Wn(1);
Cn(function(){var a=function(){function c(d){var e=d[1];if(1===e){a:{e=[lk,Xj];for(var f=["AIzaSyDdGlT3chqZXptsT82H6jSvLKhvs0FqiME","only-partners"],h=e.length,k=0,l=yc(Yf);;)if(k<h){var m=k+1;l=Bc(l,e[k],f[k]);k=m}else{e=Ac(l);break a}}f=e;h=null!=f&&(f.h&64||t===f.V)?Me(tg,f):f;e=D.b(h,lk);h=D.b(h,Xj);f=Jd.i(f,lk,S([Xj]));Qd(f)||cf(Zn,f);e=new u(null,3,[vi,e,pi,[C.a(h),".firebaseapp.com"].join(""),Mj,h],null);e=lh(e);e=firebase.initializeApp(e);e=cf(Yn,e);f=wo(new X(null,2,5,Z,[Qj,"fnNebpIsLJkXBQJhoUBo"],
null));d[7]=e;return Sn(d,2,f)}return 2===e?(e=d[2],f=wo(new X(null,3,5,Z,[Qj,"fnNebpIsLJkXBQJhoUBo",xi],null)),d[8]=e,Sn(d,3,f)):3===e?(e=d[8],e=df.i(Sm,Hd,Mh,e,S([xi,d[2]])),Un(d,e)):null}return function(){function d(h){for(;;){a:try{for(;;){var k=c(h);if(!se(k,Ai)){var l=k;break a}}}catch(m){if(m instanceof Object)h[5]=m,Vn(h),l=Ai;else throw m;}if(!se(l,Ai))return l}}function e(){var h=[null,null,null,null,null,null,null,null,null];h[0]=f;h[1]=1;return h}var f=null;f=function(h){switch(arguments.length){case 0:return e.call(this);
case 1:return d.call(this,h)}throw Error("Invalid arity: "+arguments.length);};f.l=e;f.a=d;return f}()}(),b=function(){var c=a.l?a.l():a.call(null);c[6]=Lo;return c}();return Rn(b)});
})();
